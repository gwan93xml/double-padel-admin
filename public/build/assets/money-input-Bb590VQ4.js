import{r as N,R as ce,j as Be}from"./app-CQ-G37p-.js";import{c as Me}from"./createLucideIcon-iWXofaGH.js";var u=function(){return u=Object.assign||function(r){for(var a,t=1,i=arguments.length;t<i;t++){a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(r[n]=a[n])}return r},u.apply(this,arguments)};function Ue(e,r){var a={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(a[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,t=Object.getOwnPropertySymbols(e);i<t.length;i++)r.indexOf(t[i])<0&&Object.prototype.propertyIsEnumerable.call(e,t[i])&&(a[t[i]]=e[t[i]]);return a}function V(e,r,a){if(a||arguments.length===2)for(var t=0,i=r.length,n;t<i;t++)(n||!(t in r))&&(n||(n=Array.prototype.slice.call(r,0,t)),n[t]=r[t]);return e.concat(n||Array.prototype.slice.call(r))}var O=function(e){return e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")},Ge={k:1e3,m:1e6,b:1e9},$e=function(e,r){r===void 0&&(r=".");var a=new RegExp("(\\d+(".concat(O(r),"\\d*)?)([kmb])$"),"i"),t=e.match(a);if(t){var i=t[1],n=t[3],o=Ge[n.toLowerCase()];return Number(i.replace(r,"."))*o}},Te=function(e,r){r===void 0&&(r=",");var a=new RegExp(O(r),"g");return e.replace(a,"")},We=function(e,r){var a=O(r.join("")),t=new RegExp("[^\\d".concat(a,"]"),"gi");return e.replace(t,"")},le=function(e){var r=e.value,a=e.groupSeparator,t=a===void 0?",":a,i=e.decimalSeparator,n=i===void 0?".":i,o=e.allowDecimals,c=o===void 0?!0:o,l=e.decimalsLimit,C=l===void 0?2:l,R=e.allowNegativeValue,p=R===void 0?!0:R,v=e.disableAbbreviations,I=v===void 0?!1:v,d=e.prefix,f=d===void 0?"":d,m=e.transformRawValue,j=m===void 0?function($){return $}:m,x=j(r);if(x==="-")return x;var D=I?[]:["k","m","b"],K=new RegExp("((^|\\D)-\\d)|(-".concat(O(f),")")),ae=K.test(x),P=RegExp("(\\d+)-?".concat(O(f))).exec(r)||[],F=P[0],z=P[1],J=f?F?x.replace(F,"").concat(z):x.replace(f,""):x,Q=Te(J,t),A=We(Q,V([t,n],D,!0)),L=A;if(!I){if(D.some(function($){return $===A.toLowerCase().replace(n,"")}))return"";var X=$e(A,n);X&&(L=String(X))}var B=ae&&p?"-":"";if(n&&L.includes(n)){var M=A.split(n),Y=M[0],U=M[1],G=C&&U?U.slice(0,C):U,Z=c?"".concat(n).concat(G):"";return"".concat(B).concat(Y).concat(Z)}return"".concat(B).concat(L)},He=function(e,r,a){if(a!==void 0&&e.length>1){if(a===0)return e.replace(r,"");if(e.includes(r)){var t=e.split(r),i=t[0],n=t[1];if(n.length===a)return e;if(n.length>a)return"".concat(i).concat(r).concat(n.slice(0,a))}var o=e.length>a?new RegExp("(\\d+)(\\d{".concat(a,"})")):new RegExp("(\\d)(\\d+)"),c=e.match(o);if(c){var i=c[1],n=c[2];return"".concat(i).concat(r).concat(n)}}return e},he=function(e,r){var a=r.groupSeparator,t=a===void 0?",":a,i=r.decimalSeparator,n=i===void 0?".":i,o=new RegExp("\\d([^".concat(O(t)).concat(O(n),"0-9]+)")),c=e.match(o);return c?c[1]:void 0},q=function(e){var r=e.value,a=e.decimalSeparator,t=e.intlConfig,i=e.decimalScale,n=e.prefix,o=n===void 0?"":n,c=e.suffix,l=c===void 0?"":c;if(r===""||r===void 0)return"";if(r==="-")return"-";var C=new RegExp("^\\d?-".concat(o?"".concat(O(o),"?"):"","\\d")).test(r),R=a!=="."?qe(r,a,C):r;a&&a!=="-"&&R.startsWith(a)&&(R="0"+R);var p={minimumFractionDigits:i||0,maximumFractionDigits:20},v=t?new Intl.NumberFormat(t.locale,t.currency?u(u({},p),{style:"currency",currency:t.currency}):p):new Intl.NumberFormat(void 0,p),I=v.formatToParts(Number(R)),d=ze(I,e),f=he(d,u({},e)),m=r.slice(-1)===a?a:"",j=R.match(RegExp("\\d+\\.(\\d+)"))||[],x=j[1];return i===void 0&&x&&a&&(d.includes(a)?d=d.replace(RegExp("(\\d+)(".concat(O(a),")(\\d+)"),"g"),"$1$2".concat(x)):f&&!l?d=d.replace(f,"".concat(a).concat(x).concat(f)):d="".concat(d).concat(a).concat(x)),l&&m?"".concat(d).concat(m).concat(l):f&&m?d.replace(f,"".concat(m).concat(f)):f&&l?d.replace(f,"".concat(m).concat(l)):[d,m,l].join("")},qe=function(e,r,a){var t=e;return r&&r!=="."&&(t=t.replace(RegExp(O(r),"g"),"."),a&&r==="-"&&(t="-".concat(t.slice(1)))),t},ze=function(e,r){var a=r.prefix,t=r.groupSeparator,i=r.decimalSeparator,n=r.decimalScale,o=r.disableGroupSeparators,c=o===void 0?!1:o;return e.reduce(function(l,C,R){var p=C.type,v=C.value;return R===0&&a?p==="minusSign"?[v,a]:p==="currency"?V(V([],l,!0),[a],!1):[a,v]:p==="currency"?a?l:V(V([],l,!0),[v],!1):p==="group"?c?l:V(V([],l,!0),[t!==void 0?t:v],!1):p==="decimal"?n!==void 0&&n===0?l:V(V([],l,!0),[i!==void 0?i:v],!1):p==="fraction"?V(V([],l,!0),[n!==void 0?v.slice(0,n):v],!1):V(V([],l,!0),[v],!1)},[""]).join("")},Je={currencySymbol:"",groupSeparator:"",decimalSeparator:"",prefix:"",suffix:""},Qe=function(e){var r=e||{},a=r.locale,t=r.currency,i=a?new Intl.NumberFormat(a,t?{currency:t,style:"currency"}:void 0):new Intl.NumberFormat;return i.formatToParts(1000.1).reduce(function(n,o,c){return o.type==="currency"?c===0?u(u({},n),{currencySymbol:o.value,prefix:o.value}):u(u({},n),{currencySymbol:o.value,suffix:o.value}):o.type==="group"?u(u({},n),{groupSeparator:o.value}):o.type==="decimal"?u(u({},n),{decimalSeparator:o.value}):n},Je)},ye=function(e){return RegExp(/\d/,"gi").test(e)},Xe=function(e,r,a){if(r===void 0&&(r="."),a===void 0||e===""||e===void 0)return e;if(!e.match(/\d/g))return"";var t=e.split(r),i=t[0],n=t[1];if(a===0)return i;var o=n||"";if(o.length<a)for(;o.length<a;)o+="0";else o=o.slice(0,a);return"".concat(i).concat(r).concat(o)},Ye=function(e){var r=e.selectionStart,a=e.value,t=e.lastKeyStroke,i=e.stateValue,n=e.groupSeparator,o=r,c=a;if(i&&o){var l=a.split("");return t==="Backspace"&&i[o]===n&&(l.splice(o-1,1),o-=1),t==="Delete"&&i[o]===n&&(l.splice(o,1),o+=1),c=l.join(""),{modifiedValue:c,cursorPosition:o}}return{modifiedValue:c,cursorPosition:r}},xe=N.forwardRef(function(e,r){var a=e.allowDecimals,t=a===void 0?!0:a,i=e.allowNegativeValue,n=i===void 0?!0:i,o=e.id,c=e.name,l=e.className,C=e.customInput,R=e.decimalsLimit,p=e.defaultValue,v=e.disabled,I=v===void 0?!1:v,d=e.maxLength,f=e.value,m=e.onValueChange,j=e.fixedDecimalLength,x=e.placeholder,D=e.decimalScale,K=e.prefix,ae=e.suffix,P=e.intlConfig,F=e.step,z=e.min,J=e.max,Q=e.disableGroupSeparators,A=Q===void 0?!1:Q,L=e.disableAbbreviations,X=L===void 0?!1:L,B=e.decimalSeparator,M=e.groupSeparator,Y=e.onChange,U=e.onFocus,G=e.onBlur,Z=e.onKeyDown,$=e.onKeyUp,we=e.transformRawValue,fe=e.formatValueOnBlur,Ve=fe===void 0?!0:fe,Re=Ue(e,["allowDecimals","allowNegativeValue","id","name","className","customInput","decimalsLimit","defaultValue","disabled","maxLength","value","onValueChange","fixedDecimalLength","placeholder","decimalScale","prefix","suffix","intlConfig","step","min","max","disableGroupSeparators","disableAbbreviations","decimalSeparator","groupSeparator","onChange","onFocus","onBlur","onKeyDown","onKeyUp","transformRawValue","formatValueOnBlur"]);if(B&&ye(B))throw new Error("decimalSeparator cannot be a number");if(M&&ye(M))throw new Error("groupSeparator cannot be a number");var _=N.useMemo(function(){return Qe(P)},[P]),g=B||_.decimalSeparator||"",T=M||_.groupSeparator||"";if(g&&T&&g===T&&A===!1)throw new Error("decimalSeparator cannot be the same as groupSeparator");var W={decimalSeparator:g,groupSeparator:T,disableGroupSeparators:A,intlConfig:P,prefix:K||_.prefix,suffix:ae},te={decimalSeparator:g,groupSeparator:T,allowDecimals:t,decimalsLimit:R||j||2,allowNegativeValue:n,disableAbbreviations:X,prefix:K||_.prefix,transformRawValue:we},se=N.useState(function(){return p!=null?q(u(u({},W),{decimalScale:D,value:String(p)})):f!=null?q(u(u({},W),{decimalScale:D,value:String(f)})):""}),S=se[0],H=se[1],de=N.useState(!1),ne=de[0],Ee=de[1],pe=N.useState(0),oe=pe[0],ie=pe[1],ve=N.useState(0),me=ve[0],Ne=ve[1],ge=N.useState(null),Ce=ge[0],Oe=ge[1],k=N.useRef(null);N.useImperativeHandle(r,function(){return k.current});var be=function(s,y){Ee(!0);var b=Ye({selectionStart:y,value:s,lastKeyStroke:Ce,stateValue:S,groupSeparator:T}),h=b.modifiedValue,w=b.cursorPosition,E=le(u({value:h},te));if(!(d&&E.replace(/-/g,"").length>d)){if(E===""||E==="-"||E===g){m&&m(void 0,c,{float:null,formatted:"",value:""}),H(E),ie(1);return}var ee=g?E.replace(g,"."):E,Pe=parseFloat(ee),ue=q(u({value:E},W));if(w!=null){var re=w+(ue.length-s.length);re=re<=0?K?K.length:0:re,ie(re),Ne(me+1)}if(H(ue),m){var Le={float:Pe,formatted:ue,value:E};m(E,c,Le)}}},De=function(s){var y=s.target,b=y.value,h=y.selectionStart;be(b,h),Y&&Y(s)},Fe=function(s){return U&&U(s),S?S.length:0},ke=function(s){var y=s.target.value,b=le(u({value:y},te));if(b==="-"||b===g||!b){H(""),G&&G(s);return}var h=He(b,g,j),w=Xe(h,g,D!==void 0?D:j),E=parseFloat(w.replace(g,".")),ee=q(u(u({},W),{value:w}));m&&Ve&&m(w,c,{float:E,formatted:ee,value:w}),H(ee),G&&G(s)},je=function(s){var y=s.key;if(Oe(y),F&&(y==="ArrowUp"||y==="ArrowDown")){s.preventDefault(),ie(S.length);var b=parseFloat(f!=null?String(f).replace(g,"."):le(u({value:S},te)))||0,h=y==="ArrowUp"?b+F:b-F;if(z!==void 0&&h<Number(z)||J!==void 0&&h>Number(J))return;var w=String(F).includes(".")?Number(String(F).split(".")[1].length):void 0;be(String(w?h.toFixed(w):h).replace(".",g))}Z&&Z(s)},Ae=function(s){var y=s.key,b=s.currentTarget.selectionStart;if(y!=="ArrowUp"&&y!=="ArrowDown"&&S!=="-"){var h=he(S,{groupSeparator:T,decimalSeparator:g});if(h&&b&&b>S.length-h.length&&k.current){var w=S.length-h.length;k.current.setSelectionRange(w,w)}}$&&$(s)};N.useEffect(function(){f==null&&p==null&&H("")},[p,f]),N.useEffect(function(){ne&&S!=="-"&&k.current&&document.activeElement===k.current&&k.current.setSelectionRange(oe,oe)},[S,oe,k,ne,me]);var Ie=function(){return f!=null&&S!=="-"&&(!g||S!==g)?q(u(u({},W),{decimalScale:ne?void 0:D,value:String(f)})):S},Se=u({type:"text",inputMode:"decimal",id:o,name:c,className:l,onChange:De,onBlur:ke,onFocus:Fe,onKeyDown:je,onKeyUp:Ae,placeholder:x,disabled:I,value:Ie(),ref:k},Re);if(C){var Ke=C;return ce.createElement(Ke,u({},Se))}return ce.createElement("input",u({},Se))});xe.displayName="CurrencyInput";const Ze=ce.forwardRef(({className:e,...r},a)=>Be.jsx(xe,{onFocus:t=>{t.target.select()},ref:a,className:Me("flex w-full py-2 text-end rounded-md border border-input bg-background px-3  text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),decimalsLimit:2,allowDecimals:!0,...r}));Ze.displayName="MoneyInput";export{Ze as M};
