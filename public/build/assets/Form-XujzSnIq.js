import{W as F,r as E,j as s,y as S}from"./app-xdIDsNuc.js";import{B as w}from"./index-D9fYs-5N.js";import{C as I,a as G,b as M,c as P,d as q}from"./card-DPe-xeUS.js";import{C as f}from"./checkbox-C3fx99cs.js";import{F as j}from"./form-group-DJppTG6k.js";import{I as A}from"./input-Pb5O0huv.js";import{t as g}from"./use-toast-BOfnQU58.js";import"./utils-jM7Hu9J5.js";import"./index-CltWYr8P.js";import"./index-DY1xKekZ.js";import"./index-CCSo0cdO.js";import"./index-CZTB0vk4.js";import"./check-B2a_CU3u.js";import"./createLucideIcon-D9qBrcbq.js";import"./label-DxiqzSVl.js";function X({initialData:d={name:"",actions:[]},actions:o,onSubmit:b,submitButtonText:c,successMessage:C,redirectTo:k}){var x,u;const{data:a,setData:t,clearErrors:v,errors:m,setError:y}=F({...d,actions:((x=d.actions)==null?void 0:x.map(e=>typeof e=="object"?e.id:e))||[]}),[p,h]=E.useState(!1);async function N(){var e,r,l;v(),h(!0);try{await b(a),g({title:"Sukses",description:C}),S.visit(k)}catch(i){if(((e=i.response)==null?void 0:e.status)===422){const n=i.response.data.errors;y(n)}else g({variant:"destructive",title:"Gagal",description:((l=(r=i.response)==null?void 0:r.data)==null?void 0:l.message)||"Terjadi kesalahan"})}finally{h(!1)}}return s.jsx("div",{className:"p-5",children:s.jsxs(I,{children:[s.jsxs(G,{children:[s.jsx(M,{children:"Form Module"}),s.jsx(P,{children:"Isikan data module dengan benar"})]}),s.jsxs(q,{children:[s.jsxs("div",{className:"mb-4",children:[s.jsx(j,{label:"Nama",error:m.name,required:!0,children:s.jsx(A,{type:"text",value:a.name,onChange:e=>{t("name",e.target.value)}})}),s.jsx(j,{label:"Aksi",error:m.actions,children:s.jsxs("div",{className:"grid grid-cols-1 gap-x-4 gap-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 pb-2 border-b",children:[s.jsx(f,{id:"check-all",checked:((u=a.actions)==null?void 0:u.length)===o.length&&o.length>0,onCheckedChange:e=>{e?t("actions",o.map(r=>r.id)):t("actions",[])}}),s.jsx("label",{htmlFor:"check-all",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:"Pilih Semua"})]}),o.map(e=>{var r;return s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(f,{id:e.name,checked:(r=a.actions)==null?void 0:r.includes(e.id),onCheckedChange:l=>{var i;l?t("actions",[...a.actions||[],e.id]):t("actions",(i=a.actions)==null?void 0:i.filter(n=>n!==e.id))}}),s.jsx("label",{htmlFor:e.name,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:e.name})]},e.id)})]})})]}),s.jsx(w,{disabled:p,onClick:N,children:p?`${c}...`:c})]})]})})}export{X as default};
