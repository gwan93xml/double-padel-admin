import{r as x,j as o}from"./app-CQ-G37p-.js";import{h as m}from"./moment-C5S46NFB.js";import{R as b}from"./report-list-CoUR2Q-E.js";import{I as l}from"./input-BXXA-PDa.js";import{B as j}from"./button-ymMXdPy5.js";import{F as a}from"./form-group-CHZXn8bM.js";import{S as v}from"./SearchCustomer-BbTZ5_2l.js";import{C as n}from"./currency-formatter-D5vTOkIG.js";import{A as N}from"./AuthenticatedLayout-X6euxa7E.js";import{D as k}from"./DivisionList-Dge3XhOp.js";import{S as C}from"./search-B9EA-nRY.js";import"./table-BSdxGOLt.js";import"./createLucideIcon-iWXofaGH.js";import"./card-Bq41eL_q.js";import"./list-DIayZXqH.js";import"./filter-BZN7rDIQ.js";import"./file-text-vhY6aTSF.js";import"./file-spreadsheet-Dv5Qp-1R.js";import"./index-D0iIn24t.js";import"./label-Blk7FhF1.js";import"./index-DqZ46QiR.js";import"./loader-circle-i2ANfqrZ.js";import"./x-D2Pel9EU.js";import"./index-BHS3gC_j.js";import"./index-B9C1SM0Q.js";import"./tslib.es6-eMSY344_.js";import"./index-uJ2KZHf0.js";import"./index-C7S3ohsj.js";import"./index-B9VoEdXn.js";import"./can-DARgw7Bo.js";import"./chevron-right-DWL5tPD-.js";import"./use-toast-XJEkqv7A.js";import"./badge-CsIJHFj0.js";import"./triangle-alert-byTh5Szo.js";import"./calendar-BV_-Gsoc.js";import"./checkbox-DaA1krf_.js";import"./index-CZ_DqijM.js";import"./command-BCd-qebN.js";import"./dialog-CBBIkam9.js";import"./popover-BMGWAYFn.js";import"./chevron-down-BOk5s691.js";function _(){const[s,d]=x.useState([]),u={monthFrom:m().format("YYYY-MM"),monthTo:m().format("YYYY-MM"),divisions:[],customer:void 0,customer_id:void 0},c=[{header:"No",key:"no",width:"w-12",renderCell:(e,r)=>r+1},{header:"No. Faktur",key:"invoice",renderCell:e=>o.jsx("a",{href:`/admin/sale/${e.id}/edit`,className:"text-blue-600 hover:underline",target:"_blank",children:e.no})},{header:"No. PO",key:"invoice",renderCell:e=>e.purchase_order_number??"-"},{header:"Tanggal",key:"date",width:"w-28",renderCell:e=>m(e.sale_date).format("DD/MM/YYYY")},{header:"Divisi",key:"division",width:"w-48",renderCell:e=>{var r;return((r=e.division)==null?void 0:r.name)??"-"}},{header:"Pelanggan",key:"customer",width:"w-48",renderCell:e=>{var r;return((r=e.customer)==null?void 0:r.name)??"-"}},{header:"Harga",key:"subtotal",width:"w-32",align:"right",renderCell:e=>o.jsx(n,{amount:Number(e.subtotal)}),renderFooter:e=>e.reduce((r,t)=>r+Number(t.subtotal),0).toLocaleString("id-ID")},{header:"Diskon",key:"discount",width:"w-24",align:"right",renderCell:e=>o.jsx(n,{amount:Number(e.discount)+Number(e.sales_discount)}),renderFooter:e=>e.reduce((r,t)=>r+Number(t.discount)+Number(t.sales_discount),0).toLocaleString("id-ID")},{header:"Pajak",key:"tax",width:"w-24",align:"right",renderCell:e=>o.jsx(n,{amount:Number(e.tax)}),renderFooter:e=>e.reduce((r,t)=>r+Number(t.tax),0).toLocaleString("id-ID")},{header:"Total",key:"total_amount",width:"w-32",align:"right",renderCell:e=>o.jsx(n,{amount:Number(e.total_amount)}),renderFooter:e=>e.reduce((r,t)=>r+Number(t.total_amount),0).toLocaleString("id-ID")}];function h(e){let r=`/admin/sales-report/export/excel?monthFrom=${e.monthFrom}&monthTo=${e.monthTo}`;return e.divisions&&e.divisions.length>0&&e.divisions.forEach((t,i)=>{r+=`&divisions[${i}][id]=${t.id}`}),e.customer_id&&(r+=`&customer_id=${e.customer_id}`),r}function p(e){let r=`/admin/sales-report/export/pdf?monthFrom=${e.monthFrom}&monthTo=${e.monthTo}`;return e.divisions&&e.divisions.length>0&&e.divisions.forEach((t,i)=>{r+=`&divisions[${i}][id]=${t.id}`}),e.customer_id&&(r+=`&customer_id=${e.customer_id}`),r}return o.jsx(b,{title:"Laporan Penjualan",description:"Daftar transaksi penjualan berdasarkan periode, divisi, dan pelanggan",fetchUrl:"/admin/sales-report/list",exportPdfUrl:p,exportExcelUrl:h,initialFilters:u,renderFilter:(e,r,t)=>o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-4 items-end",children:[o.jsx("div",{className:"lg:col-span-4",children:o.jsx(a,{label:"Divisi",children:o.jsx(k,{selectedDivisions:s||[],onSelectionChange:i=>{d(i),r({...e,divisions:i.map(g=>({id:g.id}))})}})})}),o.jsx("div",{className:"lg:col-span-4",children:o.jsx(a,{label:"Pelanggan",children:o.jsx(v,{value:e.customer,onChange:i=>r({...e,customer:i,customer_id:(i==null?void 0:i.id)??""}),clearable:!0})})}),o.jsx("div",{className:"lg:col-span-2",children:o.jsx(a,{label:"Dari Bulan",children:o.jsx(l,{type:"month",value:e.monthFrom,onChange:i=>r({...e,monthFrom:i.target.value})})})}),o.jsx("div",{className:"lg:col-span-2",children:o.jsx(a,{label:"Hingga Bulan",children:o.jsx(l,{type:"month",value:e.monthTo,onChange:i=>r({...e,monthTo:i.target.value})})})}),o.jsx("div",{className:"lg:col-span-12 flex justify-end gap-2 mt-4",children:o.jsxs(j,{onClick:t,className:"bg-blue-600 hover:bg-blue-700",children:[o.jsx(C,{className:"h-4 w-4 mr-2"})," Tampilkan"]})})]}),columns:c})}_.layout=s=>o.jsx(N,{breadcrumbs:[{label:"Dashboard",href:"/admin"},{label:"Laporan",href:"#"},{label:"Penjualan",href:"#"}],children:s});export{_ as default};
