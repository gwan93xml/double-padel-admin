import{W as q,r as g,j as e,a as _,y as k}from"./app-CQ-G37p-.js";import{S as w,a as B,b as E}from"./SearchUnitReport-BSGRusST.js";import{S as D}from"./SearchVendor-DVTa9TJs.js";import{B as I}from"./button-ymMXdPy5.js";import{F as s}from"./form-group-CHZXn8bM.js";import{I as c}from"./input-BXXA-PDa.js";import{M as b}from"./money-input-Bb590VQ4.js";import{T as V,a as A,b as v,c as o,d as H,e as l}from"./table-BSdxGOLt.js";import{T as K}from"./textarea-BvykTLwI.js";import{t as f}from"./use-toast-XJEkqv7A.js";import{A as R}from"./AuthenticatedLayout-X6euxa7E.js";import"./select-BSIJzAmS.js";import"./index-B9C1SM0Q.js";import"./index-DqZ46QiR.js";import"./index-D0iIn24t.js";import"./tslib.es6-eMSY344_.js";import"./index-C7S3ohsj.js";import"./index-B9VoEdXn.js";import"./createLucideIcon-iWXofaGH.js";import"./index-CZ_DqijM.js";import"./chevron-down-BOk5s691.js";import"./card-Bq41eL_q.js";import"./loader-circle-i2ANfqrZ.js";import"./search-B9EA-nRY.js";import"./x-D2Pel9EU.js";import"./label-Blk7FhF1.js";import"./index-BHS3gC_j.js";import"./index-uJ2KZHf0.js";import"./can-DARgw7Bo.js";import"./chevron-right-DWL5tPD-.js";import"./badge-CsIJHFj0.js";import"./currency-formatter-D5vTOkIG.js";import"./moment-C5S46NFB.js";import"./triangle-alert-byTh5Szo.js";import"./calendar-BV_-Gsoc.js";function U(){var u,p,h;const{data:a,setData:t,reset:M,errors:i,setError:y,clearErrors:C}=q({item_category_id:"",code:"",name:"",barcode:"",unit:"",purchase_price:"",selling_price:"",vendor_id:"",vendor:void 0,units:[]}),[d,m]=g.useState(!1);async function S(){C(),m(!0);try{const r=await _.post("/admin/item-non-stock",a);f({title:"Sukses",description:"Data item non stok berhasil disimpan"}),k.visit("/admin/item-non-stock/create")}catch(r){if(r.response.status===422){const n=r.response.data.errors;y(n)}else f({variant:"destructive",title:"Gagal",description:r.response.data.message})}finally{m(!1)}}return g.useEffect(()=>{async function r(){const n=await _(`/admin/unit/${a.unit}/by-unit`);t("units",n.data.data.sub_units)}r()},[a.unit]),e.jsxs("div",{className:"p-5 mb-96",children:[e.jsx(s,{label:"Kode",name:"code",error:i.code,required:!0,children:e.jsx(c,{value:a.code,onChange:r=>{t({...a,code:r.target.value})}})}),e.jsx(s,{label:"Nama",name:"name",error:i.name,required:!0,children:e.jsx(c,{value:a.name,onChange:r=>{t({...a,name:r.target.value})}})}),e.jsx(s,{label:"Kategori",name:"item_category_id",error:i.item_category_id,required:!0,children:e.jsx(w,{value:a.item_category_id,onChange:r=>{t({...a,item_category_id:r})}})}),e.jsxs("div",{className:"flex gap-x-3",children:[e.jsxs("div",{className:"w-2/3",children:[e.jsx(s,{label:"Satuan",name:"unit",error:i.unit,required:!0,children:e.jsx(B,{value:a.unit,onChange:r=>{t("unit",r)}})}),e.jsx(s,{label:"Laporan",name:"unit",error:i.unit_report_1||i.unit_report_2,required:!0,children:e.jsx(E,{value1:a.unit_report_1,value2:a.unit_report_2,unit:a.unit,onChange1:r=>{t("unit_report_1",r)},onChange2:r=>{t("unit_report_2",r)}})})]}),e.jsx("div",{className:"w-1/3",children:e.jsxs(V,{children:[e.jsx(A,{children:e.jsxs(v,{children:[e.jsx(o,{children:"NO"}),e.jsx(o,{children:"SATUAN"}),e.jsx(o,{className:"w-[100px]",children:"KONVERSI"}),e.jsx(o,{})]})}),e.jsx(H,{children:(u=a.units)==null?void 0:u.map((r,n)=>e.jsxs(v,{children:[e.jsx(l,{children:n+1}),e.jsx(l,{children:r.name}),e.jsx(l,{children:e.jsx(c,{type:"number",className:"text-end",value:r.conversion,onChange:N=>{var x;t("units",(x=a.units)==null?void 0:x.map((j,T)=>T==n?{...j,conversion:N.target.value}:j))}})}),e.jsx(l,{children:a.units[0].name})]}))})]})})]}),e.jsx(s,{label:"Harga Beli",error:i.purchase_price,required:!0,children:e.jsx(b,{value:a.purchase_price,onValueChange:r=>{t("purchase_price",r)}})}),e.jsx(s,{label:"Harga Jual",error:i.selling_price,required:!0,children:e.jsx(b,{value:a.selling_price,onValueChange:r=>{t("selling_price",r)}})}),e.jsx(s,{label:"Keterangan",required:!0,error:i.description,children:e.jsx(K,{value:a.description,onChange:r=>{t("purchase_price",r.target.value)}})}),e.jsx(s,{label:"Vendor",required:!0,error:i.vendor_id,children:e.jsx(D,{value:{id:a.vendor_id??"",name:((p=a.vendor)==null?void 0:p.name)??"",code:((h=a.vendor)==null?void 0:h.code)??""},onChange:r=>{var n;t({...a,vendor:r,vendor_id:(n=r.id)==null?void 0:n.toString()})}})}),e.jsx(I,{disabled:d,onClick:S,children:d?"Menyimpan...":"Simpan"})]})}U.layout=a=>e.jsx(R,{breadcrumbs:[{label:"Dashboard",href:"/admin/"},{label:"Barang Non Stok",href:"/admin/item-non-stock"},{label:"Tambah Barang",href:"#"}],children:a});export{U as default};
