import{j as r}from"./app-CQ-G37p-.js";import{S as d}from"./SearchChartOfAccount-0Jd4yGJY.js";import{S as f}from"./SearchItem-DGpcvLrN.js";import{S as F}from"./SearchSubUnit-CTrUekdR.js";import{B as j}from"./button-ymMXdPy5.js";import{D as S,a as C,b as y,d as N}from"./dialog-CBBIkam9.js";import{F as n}from"./form-group-CHZXn8bM.js";import{I as s}from"./input-BXXA-PDa.js";import{M as l}from"./money-input-Bb590VQ4.js";import{T as k}from"./textarea-BvykTLwI.js";import{c as q}from"./index-BHS3gC_j.js";import"./card-Bq41eL_q.js";import"./createLucideIcon-iWXofaGH.js";import"./badge-CsIJHFj0.js";import"./loader-circle-i2ANfqrZ.js";import"./search-B9EA-nRY.js";import"./x-D2Pel9EU.js";import"./file-text-vhY6aTSF.js";import"./package-Cd0mGsRo.js";import"./select-BSIJzAmS.js";import"./index-B9C1SM0Q.js";import"./index-DqZ46QiR.js";import"./index-D0iIn24t.js";import"./tslib.es6-eMSY344_.js";import"./index-C7S3ohsj.js";import"./index-B9VoEdXn.js";import"./index-CZ_DqijM.js";import"./chevron-down-BOk5s691.js";import"./label-Blk7FhF1.js";import"./index-uJ2KZHf0.js";function ie({formDialog:c,onOpenChange:m,data:e,setData:o,errors:i,onSave:b}){var p,u,a,h;return r.jsx(S,{open:c.open,onOpenChange:()=>m(!1),children:r.jsxs(C,{className:" max-h-[80vh] overflow-y-auto",children:[r.jsx(y,{children:r.jsx(q,{children:c.isEdit?"Edit Item":"Tambahkan item"})}),r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex border border-gray-200 shadow-sm rounded justify-stretch",children:[r.jsx("div",{className:`flex-1 p-2 text-center border-r cursor-pointer font-bold " ${e.is_stock?"bg-blue-600 rounded-l text-white":""}`,onClick:()=>{o({...e,is_stock:!0})},children:"STOCK"}),r.jsx("div",{className:`flex-1 p-2 text-center cursor-pointer font-bold ${e.is_stock?"":"bg-blue-600 rounded-r text-white"}`,onClick:()=>{o({...e,is_stock:!1})},children:"NON STOCK"})]}),e.is_stock&&r.jsx(r.Fragment,{children:r.jsx(n,{label:"Item",error:i.item_name,name:"item_id",required:!0,children:r.jsx(f,{value:{id:e.item_id??"",code:((p=e.item)==null?void 0:p.code)??"",name:((u=e.item)==null?void 0:u.name)??"",purchase_price:(e==null?void 0:e.price)??"0",selling_price:(e==null?void 0:e.price)??"0",unit:(e==null?void 0:e.unit)??"",description:(e==null?void 0:e.notes)??""},onChange:t=>{o({...e,item_id:t.id,item_name:t.name,price:t.selling_price??0,item:{code:t.code,name:t.name},notes:t.description})}})})}),!e.is_stock&&r.jsxs(r.Fragment,{children:[r.jsx(n,{label:"Item",error:i.item_name,name:"item_name",required:!0,children:r.jsx(s,{type:"text",value:e.item_name,onChange:t=>{o({...e,item_id:t.target.value,item:{code:t.target.value,name:t.target.value},item_name:t.target.value})}})}),r.jsx(n,{label:"Akun",error:i.chart_of_account_id,name:"chart_of_account_id",children:r.jsx(d,{value:{id:e.chart_of_account_id,code:(a=e.chart_of_account)==null?void 0:a.code,name:(h=e.chart_of_account)==null?void 0:h.name},onChange:t=>{o({...e,chart_of_account_id:t.id,chart_of_account:t})}})}),r.jsx(n,{label:"Satuan",error:i.unit,name:"unit",children:r.jsx(s,{type:"text",value:e.unit,onChange:t=>{o({...e,unit:t.target.value})}})})]}),r.jsx(n,{label:"Harga",error:i.price,name:"price",children:r.jsx(l,{value:e.price,onValueChange:t=>{o({...e,price:t==null?void 0:t.toString(),subtotal:(parseFloat((t==null?void 0:t.toString())??"0")*parseFloat(e.quantity??"1")).toString(),total:(parseFloat((t==null?void 0:t.toString())??"0")*parseFloat(e.quantity??"1")-parseFloat(e.discount??"0")).toString()})}})}),r.jsx(n,{label:"Jumlah",error:i.quantity,name:"quantity",children:r.jsx(s,{type:"number",value:e.quantity,className:"text-right",onChange:t=>{o({...e,quantity:t.target.value,subtotal:(parseFloat(e.price??"0")*parseFloat(t.target.value)).toString(),total:(parseFloat(e.price??"0")*parseFloat(t.target.value)-parseFloat(e.discount??"0")).toString()})}})}),e.is_stock&&r.jsx(n,{label:"Satuan",error:i.unit,required:!0,children:r.jsx(F,{value:e.unit,itemId:e.item_id,onChange:t=>{o("unit",t)}})}),r.jsx(n,{label:"Subtotal",error:i.subtotal,name:"subtotal",children:r.jsx(l,{value:e.subtotal,className:"text-right",onValueChange:t=>{o({...e,subtotal:t==null?void 0:t.toString(),total:(parseFloat((t==null?void 0:t.toString())??"0")-parseFloat(e.discount??"0")).toString(),price:(parseFloat((t==null?void 0:t.toString())??"0")/parseFloat(e.quantity??"1")).toString()})}})}),r.jsxs("div",{className:"flex",children:[r.jsx("div",{className:"w-3/4",children:r.jsx(n,{label:"Discount",error:i.discount,name:"discount",children:r.jsx(l,{value:e.discount,className:"text-right",onValueChange:t=>{o({...e,discount:t,discount_percent:0,total:(parseFloat(e.subtotal)-parseFloat(t)).toString()})}})})}),r.jsx("div",{className:"w-1/4",children:r.jsx(n,{label:"%",error:i.discount,name:"discount",children:r.jsx(s,{type:"number",value:e.discount_percent,className:"text-right",onChange:t=>{const x=parseFloat(e.subtotal??"0"),g=(x*parseFloat(t.target.value)/100).toFixed(2),_=(x-parseFloat(g)).toFixed(2);o({...e,discount_percent:t.target.value,discount:g,total:_})}})})})]}),r.jsx(n,{label:"Total",error:i.total,name:"total",children:r.jsx(l,{disabled:!0,value:e.total,className:"text-right"})}),r.jsx(n,{label:"Catatan",error:i.notes,name:"notes",children:r.jsx(k,{value:e.notes,onChange:t=>{o({...e,notes:t.target.value})}})})]}),r.jsxs(N,{children:[r.jsx(j,{type:"button",variant:"outline",onClick:()=>{m(!1)},children:"Batal"}),r.jsx(j,{type:"button",onClick:b,children:c.isEdit?"Edit":"Tambah"})]})]})})}export{ie as default};
