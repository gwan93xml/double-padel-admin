import{r as t,j as e,a as ne}from"./app-xdIDsNuc.js";import{B as p}from"./index-D9fYs-5N.js";import{T as Ze,a as Qe,b as J,c as _,d as Xe,e as M}from"./table-DWveCIF-.js";import{I as L}from"./input-Pb5O0huv.js";import{S as va,a as Na,b as ka,c as Sa,d as Re}from"./select-CnbTIwKL.js";import{C as Se,d as we,a as He,b as Ye,c as qe}from"./card-DPe-xeUS.js";import{B as se,a as wa}from"./badge-ZAY5fO7e.js";import{f as te,g as re,E as ze,h as Ca,i as Da,j as $a,e as z}from"./AuthenticatedLayout-DtjjUv9R.js";import{h as De}from"./moment-DPfounic.js";import{D as ce,b as ie,c as oe,d as de,e as Ue,f as ea,S as Ma}from"./dialog-D0N63b2F.js";import{u as Ta,t as Ea}from"./use-toast-BOfnQU58.js";import{F as le}from"./form-group-DJppTG6k.js";import{T as Fa}from"./textarea-CBlx0qbf.js";import{c as w}from"./createLucideIcon-D9qBrcbq.js";import{F as Ve,S as Ia}from"./search-DVUbBZlE.js";import{P as Aa}from"./plus-g40r8l_n.js";import{T as Ke}from"./trash-2-DreEqKRe.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=w("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=w("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=w("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=w("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=w("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ja=w("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=w("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=w("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=w("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=w("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);let Me;function Ra(){const[o,s]=t.useState(!1),[d,u]=t.useState(),[x,n]=t.useState({title:"",description:"",cancelText:"Cancel",confirmText:"Confirm"});Me=m=>(n(m),s(!0),new Promise(b=>{u(()=>b)}));const y=m=>{s(!1),d==null||d(m)};return e.jsx(ce,{open:o,onOpenChange:s,children:e.jsxs(ie,{children:[e.jsxs(oe,{children:[e.jsx(de,{children:x.title}),e.jsx(Ue,{children:x.description})]}),e.jsxs(ea,{children:[e.jsx(p,{type:"button",variant:"ghost",onClick:()=>y(!1),children:x.cancelText}),e.jsx(p,{type:"button",variant:"destructive",onClick:()=>y(!0),children:x.confirmText})]})]})})}let aa;function Ha(){const[o,s]=t.useState(!1),[d,u]=t.useState(),[x,n]=t.useState({title:"",description:"",cancelText:"Cancel",confirmText:"Confirm"}),[y,m]=t.useState("");aa=g=>(n(g),m(""),s(!0),new Promise(v=>{u(()=>v)}));const b=g=>{s(!1),d==null||d({confirmed:g,reason:g?y:void 0})};return e.jsx(ce,{open:o,onOpenChange:s,children:e.jsxs(ie,{children:[e.jsxs(oe,{children:[e.jsx(de,{children:x.title}),e.jsx(Ue,{children:x.description})]}),e.jsxs("div",{className:"py-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Alasan"}),e.jsx(Fa,{className:"w-full rounded-md border p-2 text-sm",value:y,onChange:g=>m(g.target.value),placeholder:"Tulis alasan di sini..."})]}),e.jsxs(ea,{children:[e.jsx(p,{type:"button",variant:"ghost",onClick:()=>b(!1),children:x.cancelText}),e.jsx(p,{type:"button",variant:"destructive",onClick:()=>b(!0),disabled:!y.trim(),children:x.confirmText})]})]})})}const Ya=()=>{const[o,s]=t.useState(!1),[d,u]=t.useState(),[x,n]=t.useState();return{isOpen:o,transactionId:d,transactionType:x,showJournal:(g,v)=>{u(g),n(v),s(!0)},hideJournal:()=>{s(!1),setTimeout(()=>{u(void 0),n(void 0)},300)},toggleJournal:()=>{s(!o)}}};function qa({open:o,onOpenChange:s,transactionId:d,transactionType:u,title:x="Detail Jurnal"}){const[n,y]=t.useState(null),[m,b]=t.useState(!1),[g,v]=t.useState(null),{toast:he}=Ta();t.useEffect(()=>{o&&d&&u&&V()},[o,d,u]),t.useEffect(()=>{o||(y(null),v(null))},[o]);const V=async()=>{var h;b(!0),v(null);try{const f=await ne.get("/admin/journal/find-by-transaction",{params:{transaction_id:d,transaction_type:u}});y(f.data.data)}catch(f){console.error("Error fetching journal:",f),((h=f.response)==null?void 0:h.status)===404?v("Jurnal tidak ditemukan untuk transaksi ini."):(v("Gagal memuat data jurnal. Silakan coba lagi."),he({variant:"destructive",title:"Error",description:"Gagal memuat data jurnal"}))}finally{b(!1)}},A=()=>{var h;return((h=n==null?void 0:n.transactions)==null?void 0:h.reduce((f,T)=>f+T.debit,0))||0},me=()=>{var h;return((h=n==null?void 0:n.transactions)==null?void 0:h.reduce((f,T)=>f+T.credit,0))||0},xe=()=>e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx($e,{className:"h-8 w-8 animate-spin mr-2"}),e.jsx("span",{children:"Memuat data jurnal..."})]}),ge=()=>e.jsxs("div",{className:"text-center p-8",children:[e.jsx("p",{className:"text-red-500 mb-2",children:g}),e.jsx("button",{onClick:V,className:"text-blue-500 hover:text-blue-700 underline",children:"Coba lagi"})]}),ue=()=>{var h,f,T;return n?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"font-semibold text-sm text-gray-600",children:"Nomor Jurnal:"}),e.jsx("p",{className:"font-mono",children:n.number})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-semibold text-sm text-gray-600",children:"Tanggal:"}),e.jsx("p",{children:De(n.date).format("DD MMMM YYYY")})]}),n.division&&e.jsxs("div",{children:[e.jsx("label",{className:"font-semibold text-sm text-gray-600",children:"Divisi:"}),e.jsxs("p",{children:[((h=n.division)==null?void 0:h.code)??""," - ",((f=n.division)==null?void 0:f.name)??""]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-semibold text-sm text-gray-600",children:"Keterangan:"}),e.jsx("p",{children:n.notes})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Detail Transaksi"}),e.jsxs(Ze,{children:[e.jsx(Qe,{children:e.jsxs(J,{children:[e.jsx(_,{children:"Akun"}),e.jsx(_,{children:"Catatan"}),e.jsx(_,{className:"text-right",children:"Debit"}),e.jsx(_,{className:"text-right",children:"Kredit"})]})}),e.jsx(Xe,{children:(T=n.transactions)==null?void 0:T.map(j=>{var R,K;return e.jsxs(J,{className:`${j.journal_id!==n.id?"bg-yellow-50":""}`,children:[e.jsx(M,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:((R=j.chart_of_account)==null?void 0:R.code)??""}),e.jsx("div",{className:"text-sm text-gray-500",children:((K=j.chart_of_account)==null?void 0:K.name)??""})]})}),e.jsx(M,{children:j.notes}),e.jsx(M,{className:"text-right",children:j.debit>0&&e.jsx(te,{amount:j.debit})}),e.jsx(M,{className:"text-right",children:j.credit>0&&e.jsx(te,{amount:j.credit})})]},j.id)})})]})]}),e.jsx("div",{className:"border-t pt-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-semibold",children:"Total:"}),e.jsxs("div",{className:"flex space-x-8",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Debit"}),e.jsx("div",{className:"font-semibold",children:e.jsx(te,{amount:A()})})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Kredit"}),e.jsx("div",{className:"font-semibold",children:e.jsx(te,{amount:me()})})]})]})]})})]}):null};return e.jsx(ce,{open:o,onOpenChange:s,children:e.jsxs(ie,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsx(oe,{children:e.jsxs(de,{children:[x,u&&d&&e.jsxs("span",{className:"text-sm font-normal text-gray-500 ml-2",children:["(",u," #",d,")"]})]})}),e.jsxs("div",{className:"mt-4",children:[m&&xe(),g&&!m&&ge(),n&&!m&&!g&&ue()]})]})})}function is({columns:o,apiUrl:s,refreshTrigger:d,canCreate:u=!1,canUpdate:x=!1,canDelete:n=!1,onCreate:y,onEdit:m,onDelete:b,onDetail:g,onExport:v,onPrint:he,onPrintDelivery:V,isFilterDate:A,isFilterDivision:me,canForceDelete:xe=!1,title:ge="Data Management",description:ue="Manage your data with advanced filtering and actions",additionalFilters:h=[],withReason:f=!1,auditableType:T,transactionType:j,additionalActionButtons:R,additionalTools:K}){const sa=()=>{Object.keys(localStorage).forEach(r=>{r.startsWith(`${s}.`)&&localStorage.removeItem(r)})},[P,O]=t.useState([]),[H,Te]=t.useState(!1),[B,Ee]=t.useState(!1),[Fe,je]=t.useState(null);t.useState([]);const[k,fe]=t.useState(null),[C,G]=t.useState("asc"),[S,pe]=t.useState(""),[Y,W]=t.useState(!0),[ta,q]=t.useState(1),[Ie,ra]=t.useState(0),[Ae,ye]=t.useState(!1),[la,Pe]=t.useState(""),[E,be]=t.useState(null),[F,ve]=t.useState(null),[D,Oe]=t.useState({id:"",code:"",name:""}),[$,Ne]=t.useState({}),[na,ca]=t.useState({}),[Z,ke]=t.useState(!1),[Q,Le]=t.useState(!1),{isOpen:ia,hideJournal:oa,showJournal:da}=Ya(),[ha,ma]=t.useState();t.useEffect(()=>{(()=>{const r=localStorage.getItem(`${s}.startDate`),c=localStorage.getItem(`${s}.endDate`);r&&be(r),c&&ve(c);const l=localStorage.getItem(`${s}.searchTerm`);l&&pe(l);const i=localStorage.getItem(`${s}.division`);if(i)try{const I=JSON.parse(i);Oe(I)}catch(I){console.error("Error parsing stored division:",I)}const N=localStorage.getItem(`${s}.additionalFilters`);if(N)try{const I=JSON.parse(N);Ne(I)}catch(I){console.error("Error parsing stored additional filters:",I)}const _e=localStorage.getItem(`${s}.sortColumn`),ae=localStorage.getItem(`${s}.sortOrder`);_e&&fe(_e),ae&&(ae==="asc"||ae==="desc")&&G(ae),localStorage.getItem(`${s}.showFilters`)==="true"&&ke(!0),Le(!0)})()},[s]),t.useEffect(()=>{const a=async()=>{const r=h.filter(i=>i.apiUrl).map(async i=>{try{const N=await ne.get(i.apiUrl);return{key:i.key,options:N.data}}catch(N){return console.error(`Error loading options for ${i.key}:`,N),{key:i.key,options:[]}}}),c=await Promise.all(r),l={};c.forEach(i=>{l[i.key]=i.options}),ca(l)};h.length>0&&a()},[h]),t.useEffect(()=>{E?localStorage.setItem(`${s}.startDate`,E.toString()):localStorage.removeItem(`${s}.startDate`)},[E,s]),t.useEffect(()=>{F?localStorage.setItem(`${s}.endDate`,F.toString()):localStorage.removeItem(`${s}.endDate`)},[F,s]),t.useEffect(()=>{S?localStorage.setItem(`${s}.searchTerm`,S):localStorage.removeItem(`${s}.searchTerm`)},[S,s]),t.useEffect(()=>{D.id||D.code||D.name?localStorage.setItem(`${s}.division`,JSON.stringify(D)):localStorage.removeItem(`${s}.division`)},[D,s]),t.useEffect(()=>{Object.values($).some(r=>r!==""&&r!==null&&r!==void 0&&r!=="all")?localStorage.setItem(`${s}.additionalFilters`,JSON.stringify($)):localStorage.removeItem(`${s}.additionalFilters`)},[$,s]),t.useEffect(()=>{k?localStorage.setItem(`${s}.sortColumn`,k):localStorage.removeItem(`${s}.sortColumn`)},[k,s]),t.useEffect(()=>{localStorage.setItem(`${s}.sortOrder`,C)},[C,s]),t.useEffect(()=>{localStorage.setItem(`${s}.showFilters`,Z.toString())},[Z,s]);const X=t.useRef(),xa=t.useCallback(a=>{H||B||(X.current&&X.current.disconnect(),X.current=new IntersectionObserver(r=>{r[0].isIntersecting&&Y&&ga()}),a&&X.current.observe(a))},[H,B,Y]);t.useEffect(()=>{Q&&(O([]),q(1),W(!0),U(!0))},[s,k,C,S,d,E,F,D.id,$,Q]),t.useEffect(()=>{Q&&(O([]),q(1),W(!0),U(!0))},[Q]);const U=async(a=!1)=>{a?Te(!0):Ee(!0),je(null);try{const r=a?1:ta,c=new URLSearchParams({take:"50",page:r.toString(),sort:k||"",order:C,search:S,division_id:me&&D.id?D.id:"",start_date:A&&E?De(E).format("YYYY-MM-DD"):"",end_date:A&&F?De(F).format("YYYY-MM-DD"):""});Object.entries($).forEach(([i,N])=>{N!=null&&N!==""&&c.append(i,N.toString())});const{data:l}=await ne.get(`${s}/list?${c}`);O(a?l.data:i=>[...i,...l.data]),ra(l.total),W(l.current_page<l.last_page),q(a?2:i=>i+1)}catch{je("An error occurred while fetching data")}finally{Te(!1),Ee(!1)}},ga=()=>{!B&&Y&&U(!1)},ua=a=>{k===a?G(C==="asc"?"desc":"asc"):(fe(a),G("asc"))},ja=a=>{pe(a.target.value)},fa=a=>k!==a?e.jsx(Be,{className:"ml-2 h-4 w-4 text-gray-400"}):C==="asc"?e.jsx(Oa,{className:"ml-2 h-4 w-4 text-blue-600"}):C==="desc"?e.jsx(Pa,{className:"ml-2 h-4 w-4 text-blue-600"}):e.jsx(Be,{className:"ml-2 h-4 w-4 text-gray-400"}),Je=()=>{O([]),q(1),W(!0),U(!0)},pa=()=>{pe(""),Oe({id:"",code:"",name:""}),be(null),ve(null),fe(null),G("asc"),Ne({}),ke(!1),sa(),localStorage.setItem(`${s}.sortOrder`,"asc"),localStorage.setItem(`${s}.showFilters`,"false"),Le(!0)},ee=(a,r)=>{Ne(c=>({...c,[a]:r}))},ya=a=>{const r=a.type==="select"?$[a.key]||"all":$[a.key]||"";switch(a.type){case"select":const c=a.options||na[a.key]||[];return e.jsx(le,{label:a.label,children:e.jsxs(va,{value:r,onValueChange:l=>ee(a.key,l==="all"?"":l),children:[e.jsx(Na,{children:e.jsx(ka,{placeholder:a.placeholder||`Pilih ${a.label}`})}),e.jsxs(Sa,{children:[e.jsx(Re,{value:"all",children:a.placeholder||`All ${a.label}`}),c.map(l=>e.jsx(Re,{value:l.value??"",children:l.label},l.value))]})]})},a.key);case"input":return e.jsx(le,{label:a.label,children:e.jsx(L,{placeholder:a.placeholder||`Enter ${a.label}`,value:r,onChange:l=>ee(a.key,l.target.value)})},a.key);case"number":return e.jsx(le,{label:a.label,children:e.jsx(L,{type:"number",placeholder:a.placeholder||`Enter ${a.label}`,value:r,onChange:l=>ee(a.key,l.target.value)})},a.key);case"date":return e.jsx(le,{label:a.label,children:e.jsx(L,{type:"date",value:r,onChange:l=>ee(a.key,l.target.value)})},a.key);default:return null}};function ba(a){Me({title:"Apakah Anda yakin?",description:"Tindakan ini tidak dapat dibatalkan. Ini akan menghapus data Anda secara permanen.",cancelText:"Batal",confirmText:"Ya, Hapus data"}).then(async r=>{if(r)try{await ne.delete(`${s}/${a}/force-delete`),O(c=>c.filter(l=>l.id!==a)),Ea({title:"Data berhasil dihapus",description:"Data telah dihapus secara permanen."})}catch{je("An error occurred while deleting the data")}})}return Fe?e.jsx(Se,{className:"border-red-200 dark:border-red-800",children:e.jsxs(we,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mb-4",children:e.jsx(re,{className:"h-8 w-8 text-red-600 dark:text-red-400"})}),e.jsx("h3",{className:"text-lg font-medium text-red-900 dark:text-red-100 mb-2",children:"Error Loading Data"}),e.jsx("p",{className:"text-red-600 dark:text-red-400 text-center mb-4",children:Fe}),e.jsxs(p,{onClick:Je,variant:"outline",className:"border-red-200 text-red-700 hover:bg-red-50 bg-transparent",children:[e.jsx(Ce,{className:"h-4 w-4 mr-2"}),"Try Again"]})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-6 p-4 md:p-6 min-h-screen",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2  rounded-lg",children:e.jsx(re,{className:"h-6 w-6 "})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:ge}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:ue})]})]})}),e.jsxs(Se,{className:"shadow-lg  ",children:[e.jsxs(He,{className:"border-b",children:[e.jsxs(Ye,{className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"h-5 w-5"}),"Filters & Actions"]}),e.jsx(qe,{className:"",children:"Search, filter, and manage your data"})]}),e.jsx(we,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-4 items-end",children:[e.jsxs("div",{className:"lg:col-span-3",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:"Search Data"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ia,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(L,{placeholder:"Search records...",value:S,onChange:ja,className:"pl-10 bg-white dark:bg-black"})]})]}),A&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:"Start Date"}),e.jsx(L,{type:"date",value:E??"",onChange:a=>be(a.target.value),className:""})]}),e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:"End Date"}),e.jsx(L,{type:"date",value:F??"",onChange:a=>ve(a.target.value),className:""})]})]}),h.length>0&&e.jsxs("div",{className:"lg:col-span-12",children:[e.jsx("div",{className:"flex items-center gap-2 mb-3",children:e.jsxs(p,{variant:"outline",size:"sm",onClick:()=>ke(!Z),className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"h-4 w-4"}),"Additional Filters",e.jsx(se,{variant:"secondary",className:"ml-1",children:Object.values($).filter(a=>a!==""&&a!==null&&a!==void 0&&a!=="all").length})]})}),Z&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4  rounded-lg border",children:h.map(a=>ya(a))})]}),e.jsxs("div",{className:`${A?"lg:col-span-4":"lg:col-span-8"} flex gap-2`,children:[e.jsxs(p,{variant:"secondary",onClick:pa,children:[e.jsx(Ce,{className:"h-4 w-4 mr-2"}),"Clear"]}),v&&e.jsxs(p,{variant:"outline",onClick:v,children:[e.jsx(La,{className:"h-4 w-4 mr-2"}),"Export"]}),u?e.jsxs(e.Fragment,{children:[e.jsxs(p,{onClick:y,children:[e.jsx(Aa,{className:"h-4 w-4 mr-2"}),"Add New"]}),K]}):null]})]})})]}),e.jsxs(Se,{className:"",children:[e.jsx(He,{className:"border-b border-gray-200 dark:border-gray-600",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsxs(Ye,{className:"text-xl text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[e.jsx(re,{className:"h-5 w-5"}),"Data Records"]}),e.jsxs(qe,{className:"text-gray-600 dark:text-gray-400",children:[S&&`Filtered by: "${S}" | `,k&&`Sorted by: ${k} (${C}) | `,"Showing ",P.length," of ",Ie," records"]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-4 md:mt-0",children:[Y&&e.jsx(se,{variant:"outline",children:"More available"}),e.jsxs(p,{variant:"outline",size:"sm",onClick:Je,disabled:H,children:[e.jsx(Ce,{className:`h-4 w-4 mr-2 ${H?"animate-spin":""}`}),"Refresh"]})]})]})}),e.jsxs(we,{className:"p-0",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Ze,{children:[e.jsx(Qe,{children:e.jsxs(J,{className:"",children:[e.jsx(_,{className:"w-[10px] font-semibold text-gray-900 dark:text-gray-100",children:e.jsx("div",{className:"flex items-center gap-2 p-2",children:e.jsx(ze,{className:"h-4 w-4"})})}),o.map(a=>e.jsx(_,{className:`${a.className} font-semibold text-gray-900 dark:text-gray-100`,children:e.jsxs(p,{variant:"ghost",onClick:()=>ua(a.accessorKey),className:`w-full justify-between hover:bg-gray-100 dark:hover:bg-gray-600 ${k===a.accessorKey?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":""}`,children:[a.header,fa(a.accessorKey)]})},a.accessorKey))]})}),e.jsx(Xe,{children:H&&P.length===0?e.jsx(J,{children:e.jsx(M,{colSpan:o.length+2,className:"text-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center",children:e.jsx($e,{className:"h-8 w-8 text-blue-600 dark:text-blue-400 animate-spin"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Loading Data"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Please wait while we fetch your data..."})]})]})})}):P.length===0?e.jsx(J,{children:e.jsx(M,{colSpan:o.length+2,className:"text-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center",children:e.jsx(re,{className:"h-8 w-8 text-gray-400 dark:text-gray-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"No Data Found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:S?`No records match "${S}"`:"No data available"})]})]})})}):P.map((a,r)=>e.jsxs(J,{ref:r===P.length-1?xa:null,className:`
                          hover:bg-blue-50/50 dark:hover:bg-gray-700/50 transition-colors border-b border-gray-200 dark:border-gray-600
                          ${a.deleted_at?"bg-red-50 dark:bg-red-900/20":""}
                          ${a.is_pinned?"bg-yellow-200 dark:bg-yellow-900/20":""}
                        `,onDoubleClick:()=>{a.deleted_at?g&&g(a.id):m&&m(a.id)},children:[e.jsx(M,{className:"",children:e.jsxs("div",{className:"relative flex items-center",children:[a.deleted_at==null&&e.jsxs(Ca,{children:[e.jsx(Da,{asChild:!0,children:e.jsx(p,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-gray-100 dark:hover:bg-gray-600",children:e.jsx(ze,{className:"h-4 w-4"})})}),e.jsxs($a,{align:"end",className:"w-48",children:[x?e.jsxs(z,{onClick:()=>m&&m(a.id),className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(Ma,{className:"h-4 w-4"}),"Edit",e.jsx("a",{className:"ml-auto hover:text-blue-500",target:"_blank",onClick:c=>c.stopPropagation(),href:`${s}/${a.id}/edit`,rel:"noreferrer",children:e.jsx(Ge,{className:"h-4 w-4"})})]}):null,j?e.jsxs(z,{onClick:()=>{ma(a.id),da(a.id,j)},className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(_a,{className:"h-4 w-4"}),"Journal"]}):null,he&&e.jsxs(z,{onClick:()=>{Pe(`${s}/${a.id}/print`),ye(!0)},className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(We,{className:"h-4 w-4"}),"Print",e.jsx("a",{className:"ml-auto hover:text-blue-500",target:"_blank",onClick:c=>c.stopPropagation(),href:`${s}/${a.id}/print`,rel:"noreferrer",children:e.jsx(Ge,{className:"h-4 w-4"})})]}),V&&e.jsxs(z,{onClick:()=>{Pe(`${s}/${a.id}/print-delivery`),ye(!0)},className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(Ja,{className:"h-4 w-4"}),"Print Delivery"]}),R&&R(a),n?e.jsxs(e.Fragment,{children:[e.jsx(wa,{}),e.jsxs(z,{onClick:async()=>{if(f){const{confirmed:c,reason:l}=await aa({title:"Apakah Anda yakin?",description:"Tindakan ini tidak dapat dibatalkan. Ini akan menghapus data Anda secara permanen.",cancelText:"Batal",confirmText:"Ya, Hapus data"});c&&b(a.id,l)}else await Me({title:"Apakah Anda yakin?",description:"Tindakan ini tidak dapat dibatalkan. Ini akan menghapus data Anda secara permanen.",cancelText:"Batal",confirmText:"Ya, Hapus data"})&&b(a.id)},className:"flex items-center gap-2 cursor-pointer text-red-600 focus:text-red-600",children:[e.jsx(Ke,{className:"h-4 w-4"}),"Delete"]})]}):null]})]}),a.deleted_at&&xe&&e.jsx(p,{variant:"destructive",size:"sm",onClick:()=>ba(a.id),className:"h-8 w-8 p-0",children:e.jsx(Ke,{className:"h-4 w-4"})}),a.deleted_at&&e.jsx(se,{variant:"destructive",className:"text-xs",children:"Deleted"})]})}),o.map(c=>e.jsx(M,{className:c.className,children:c.cell(a)},c.accessorKey))]},r))})]})}),B&&e.jsx("div",{className:"flex items-center justify-center py-6 border-t border-gray-200 dark:border-gray-600",children:e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400",children:[e.jsx($e,{className:"h-4 w-4 animate-spin"}),"Loading more data..."]})}),!Y&&P.length>0&&e.jsx("div",{className:"text-center py-6 border-t border-gray-200 dark:border-gray-600",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(se,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200 dark:bg-green-900/30 dark:text-green-300 dark:border-green-700",children:"All data loaded"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Showing all ",Ie.toLocaleString()," records"]})]})})]})]})]}),Ae&&e.jsx(ce,{open:Ae,onOpenChange:ye,children:e.jsxs(ie,{className:"max-w-7xl max-h-[90vh] overflow-auto",children:[e.jsx(oe,{children:e.jsxs(de,{className:"flex items-center gap-2",children:[e.jsx(We,{className:"h-5 w-5"}),"Print Preview"]})}),e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsx("iframe",{src:la,className:"w-full h-[80vh] border-0",title:"Print Preview"})})]})}),e.jsx(Ra,{}),e.jsx(Ha,{}),e.jsx(qa,{open:ia,onOpenChange:oa,transactionId:ha,transactionType:j,title:"Jurnal "+j})]})}export{is as E,Me as s};
