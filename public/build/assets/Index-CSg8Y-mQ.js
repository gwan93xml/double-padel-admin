import{r as u,j as e,c as w,y as n}from"./app-CQ-G37p-.js";import{C as B,S as C,A as F}from"./AuthenticatedLayout-X6euxa7E.js";import{B as r}from"./button-ymMXdPy5.js";import{I as H}from"./input-BXXA-PDa.js";import{B as A}from"./badge-CsIJHFj0.js";import{C as o,a as m,b as x,d as h,c as _}from"./card-Bq41eL_q.js";import{T as U,a as z,b as P,c as l,d as q,e as d}from"./table-BSdxGOLt.js";import{D as M,f as O,a as E,b as $,c as Y,e as G,d as J}from"./dialog-CBBIkam9.js";import{L as f}from"./label-Blk7FhF1.js";import{S as K}from"./switch-eqMsYDO6.js";import{T as Q}from"./textarea-BvykTLwI.js";import{A as V,a as W}from"./alert-QQ3yNdZx.js";import{C as X}from"./circle-alert-DNqBTniX.js";import{U as Z}from"./users-CyDfFij0.js";import{a as g}from"./createLucideIcon-iWXofaGH.js";import{P as ee}from"./plus-gEoqNGty.js";import{T as I}from"./trash-2-CvcuuDsN.js";import{S as se}from"./square-pen-Pz9x-bS-.js";import"./index-D0iIn24t.js";import"./index-DqZ46QiR.js";import"./index-BHS3gC_j.js";import"./index-B9C1SM0Q.js";import"./tslib.es6-eMSY344_.js";import"./index-uJ2KZHf0.js";import"./x-D2Pel9EU.js";import"./index-C7S3ohsj.js";import"./index-B9VoEdXn.js";import"./can-DARgw7Bo.js";import"./chevron-right-DWL5tPD-.js";import"./use-toast-XJEkqv7A.js";import"./currency-formatter-D5vTOkIG.js";import"./moment-C5S46NFB.js";import"./triangle-alert-byTh5Szo.js";import"./calendar-BV_-Gsoc.js";import"./index-D-8iXXsP.js";import"./index-Cu_r977E.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=g("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=g("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=g("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);function ie({allowedIps:a,currentIp:c,stats:t,auth:le}){const[D,v]=u.useState(!1),[j,p]=u.useState({ip_address:"",description:"",is_active:!0}),[y,N]=u.useState(!1),k=s=>{s.preventDefault(),N(!0),n.post(route("admin.allowed-ips.store"),j,{onSuccess:()=>{v(!1),p({ip_address:"",description:"",is_active:!0})},onFinish:()=>N(!1)})},T=s=>{n.post(route("admin.allowed-ips.toggle",s))},S=s=>{confirm("Are you sure you want to delete this IP address?")&&n.delete(route("admin.allowed-ips.destroy",s))},b=()=>{n.post(route("admin.allowed-ips.add-current"))},L=()=>{confirm("Are you sure you want to delete all inactive IP addresses?")&&n.delete(route("admin.allowed-ips.bulk-delete-inactive"))},R=s=>new Date(s).toLocaleString();return e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(V,{children:[e.jsx(X,{className:"h-4 w-4"}),e.jsxs(W,{children:["Your current IP address is: ",e.jsx("strong",{children:c}),!a.data.some(s=>s.ip_address===c&&s.is_active)&&e.jsx("span",{className:"ml-2",children:e.jsx(r,{size:"sm",onClick:b,className:"ml-2",children:"Add to Allowed List"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(o,{children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium",children:"Total IPs"}),e.jsx(Z,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(h,{children:e.jsx("div",{className:"text-2xl font-bold",children:t.total})})]}),e.jsxs(o,{children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium",children:"Active IPs"}),e.jsx(te,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(h,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.active})})]}),e.jsxs(o,{children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium",children:"Recently Used (7 days)"}),e.jsx(B,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(h,{children:e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.recently_used})})]})]}),e.jsxs(o,{children:[e.jsxs(m,{children:[e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-5 w-5"}),"IP Access Control"]}),e.jsx(_,{children:"Manage IP addresses that are allowed to access the application"})]}),e.jsx(h,{children:e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs(M,{open:D,onOpenChange:v,children:[e.jsx(O,{asChild:!0,children:e.jsxs(r,{children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),"Add IP Address"]})}),e.jsxs(E,{children:[e.jsxs($,{children:[e.jsx(Y,{children:"Add New IP Address"}),e.jsx(G,{children:"Add a new IP address or CIDR range to the allowed list"})]}),e.jsxs("form",{onSubmit:k,children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(f,{htmlFor:"ip_address",children:"IP Address or CIDR Range"}),e.jsx(H,{id:"ip_address",placeholder:"192.168.1.100 or 192.168.1.0/24",value:j.ip_address,onChange:s=>p(i=>({...i,ip_address:s.target.value})),required:!0})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(f,{htmlFor:"description",children:"Description"}),e.jsx(Q,{id:"description",placeholder:"Office network, Admin home, etc.",value:j.description,onChange:s=>p(i=>({...i,description:s.target.value}))})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(K,{id:"is_active",checked:j.is_active,onCheckedChange:s=>p(i=>({...i,is_active:s}))}),e.jsx(f,{htmlFor:"is_active",children:"Active"})]})]}),e.jsx(J,{children:e.jsx(r,{type:"submit",disabled:y,children:y?"Adding...":"Add IP"})})]})]})]}),e.jsxs(r,{variant:"outline",onClick:b,disabled:a.data.some(s=>s.ip_address===c&&s.is_active),children:["Add Current IP (",c,")"]}),t.total>t.active&&e.jsxs(r,{variant:"outline",onClick:L,className:"text-red-600 hover:text-red-700",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Delete Inactive"]})]})})]}),e.jsxs(o,{children:[e.jsxs(m,{children:[e.jsx(x,{children:"Allowed IP Addresses"}),e.jsx(_,{children:t.total===0?"No IP restrictions configured. All IPs are allowed to access the application.":`${t.total} IP address(es) configured. Only these IPs can access the application.`})]}),e.jsx(h,{children:a.data.length>0?e.jsxs(U,{children:[e.jsx(z,{children:e.jsxs(P,{children:[e.jsx(l,{children:"IP Address"}),e.jsx(l,{children:"Description"}),e.jsx(l,{children:"Status"}),e.jsx(l,{children:"Created By"}),e.jsx(l,{children:"Last Used"}),e.jsx(l,{children:"Actions"})]})}),e.jsx(q,{children:a.data.map(s=>e.jsxs(P,{children:[e.jsxs(d,{className:"font-mono",children:[s.ip_address,s.ip_address===c&&e.jsx(A,{variant:"outline",className:"ml-2 text-xs",children:"Current"})]}),e.jsx(d,{children:s.description||"-"}),e.jsx(d,{children:e.jsx(A,{variant:s.is_active?"default":"secondary",children:s.is_active?"Active":"Inactive"})}),e.jsx(d,{children:s.created_by||"-"}),e.jsx(d,{children:s.last_used_at?R(s.last_used_at):"Never"}),e.jsx(d,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(r,{size:"sm",variant:"outline",onClick:()=>T(s.id),children:s.is_active?e.jsx(re,{className:"h-4 w-4"}):e.jsx(ae,{className:"h-4 w-4"})}),e.jsx(w,{href:route("admin.allowed-ips.edit",s.id),children:e.jsx(r,{size:"sm",variant:"outline",children:e.jsx(se,{className:"h-4 w-4"})})}),e.jsx(r,{size:"sm",variant:"outline",onClick:()=>S(s.id),className:"text-red-600 hover:text-red-700",children:e.jsx(I,{className:"h-4 w-4"})})]})})]},s.id))})]}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(C,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No IP addresses configured"}),e.jsx("p",{className:"text-sm",children:"All IP addresses are currently allowed to access the application"})]})})]}),a.last_page>1&&e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"flex gap-2",children:a.links.map((s,i)=>e.jsx(w,{href:s.url,className:`px-3 py-2 rounded ${s.active?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,dangerouslySetInnerHTML:{__html:s.label}},i))})})]})})}ie.layout=a=>e.jsx(F,{breadcrumbs:[{label:"Dashboard",href:"/admin"},{label:"Pengaturan",href:"#"},{label:"IP Access Control",href:"#"}],children:a});export{ie as default};
