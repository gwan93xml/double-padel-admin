import{r as p,j as t}from"./app-CQ-G37p-.js";import{A as f}from"./auto-manual-toggle-Drq7Gsew.js";import{M as m}from"./money-input-Bb590VQ4.js";import{l as e}from"./lodash-Caeo88pO.js";import"./createLucideIcon-iWXofaGH.js";import"./settings-BIxmfjj-.js";function _({data:s,type_ofTax:x,setData:r}){var c,d;p.useEffect(()=>{var o,i;if(s.tax_is_auto)if(x){const n=e.sum(((o=s.items)==null?void 0:o.map(u=>parseFloat(u.subtotal??"0")))??[]),a=e.sum(((i=s.items)==null?void 0:i.map(u=>parseFloat(u.discount??"0")))??[]),l=Math.round((n-a)*parseFloat(x.rate??"0")/100);r("tax",l)}else r("tax",0)},[x,JSON.stringify(s.items),s.tax_is_auto]);function h(){var n,a;const o=e.sum(((n=s.items)==null?void 0:n.map(l=>parseFloat(l.subtotal??"0")))??[]),i=e.sum(((a=s.items)==null?void 0:a.map(l=>parseFloat(l.discount??"0")))??[]);return o-i+Number(s.tax??0)}return t.jsx("table",{className:"w-full",children:t.jsxs("tbody",{children:[t.jsxs("tr",{children:[t.jsx("td",{className:"text-right font-semibold font-mono",children:"SUBTOTAL"}),t.jsx("td",{className:"text-right w-4/5 md:w-1/5 font-bold pl-8",children:t.jsx(m,{readOnly:!0,value:e.sum(((c=s.items)==null?void 0:c.map(o=>parseFloat(o.subtotal??"0")))??[]).toFixed(2)})})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"text-right font-semibold font-mono",children:"DISKON"}),t.jsx("td",{className:"text-right font-bold pl-8",children:t.jsx(m,{readOnly:!0,value:e.sum(((d=s.items)==null?void 0:d.map(o=>parseFloat(o.discount??"0")))??[]).toFixed(2)})})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"text-right font-mono font-semibold",children:"PAJAK"}),t.jsx("td",{className:"text-right pl-8",children:t.jsxs("div",{className:"flex",children:[t.jsx(f,{isAuto:s.tax_is_auto,onToggle:o=>r("tax_is_auto",o)}),t.jsx(m,{value:s.tax,readOnly:s.tax_is_auto,className:" m-0 font-bold",onValueChange:o=>{r("tax",o)}})]})})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"text-right font-mono font-bold",children:"TOTAL"}),t.jsx("td",{className:"text-right font-bold pl-8",children:t.jsx(m,{readOnly:!0,value:h().toFixed(2)})})]})]})})}export{_ as default};
