import{j as i}from"./app-CQ-G37p-.js";import{h as o}from"./moment-C5S46NFB.js";import{R as g}from"./report-list-CoUR2Q-E.js";import{B as n}from"./button-ymMXdPy5.js";import{F as l}from"./form-group-CHZXn8bM.js";import{C as s}from"./currency-formatter-D5vTOkIG.js";import{A as j}from"./AuthenticatedLayout-X6euxa7E.js";import{S as v}from"./SearchCustomer-BbTZ5_2l.js";import{D as Y}from"./date-filter-BrNgVtk9.js";import{D as _}from"./DivisionList-Dge3XhOp.js";import{S as b,a as D,b as f,c as y,d as p}from"./select-BSIJzAmS.js";import{S as C}from"./search-B9EA-nRY.js";import"./table-BSdxGOLt.js";import"./createLucideIcon-iWXofaGH.js";import"./card-Bq41eL_q.js";import"./list-DIayZXqH.js";import"./filter-BZN7rDIQ.js";import"./file-text-vhY6aTSF.js";import"./file-spreadsheet-Dv5Qp-1R.js";import"./index-D0iIn24t.js";import"./label-Blk7FhF1.js";import"./index-DqZ46QiR.js";import"./input-BXXA-PDa.js";import"./index-BHS3gC_j.js";import"./index-B9C1SM0Q.js";import"./tslib.es6-eMSY344_.js";import"./index-uJ2KZHf0.js";import"./x-D2Pel9EU.js";import"./index-C7S3ohsj.js";import"./index-B9VoEdXn.js";import"./can-DARgw7Bo.js";import"./chevron-right-DWL5tPD-.js";import"./use-toast-XJEkqv7A.js";import"./badge-CsIJHFj0.js";import"./triangle-alert-byTh5Szo.js";import"./calendar-BV_-Gsoc.js";import"./loader-circle-i2ANfqrZ.js";import"./index-Cu_r977E.js";import"./index-D-8iXXsP.js";import"./calendar-days-CaBtbxTM.js";import"./checkbox-DaA1krf_.js";import"./index-CZ_DqijM.js";import"./command-BCd-qebN.js";import"./dialog-CBBIkam9.js";import"./popover-BMGWAYFn.js";import"./chevron-down-BOk5s691.js";function M(){const m={divisions:[],monthFrom:o().format("YYYY-MM"),monthTo:o().format("YYYY-MM"),year:o().format("YYYY"),division:void 0,customer_id:void 0,customer:void 0,division_id:void 0,dateType:"year",date:o().format("YYYY-MM-DD"),dateFrom:o().startOf("month").format("YYYY-MM-DD"),dateTo:o().endOf("month").format("YYYY-MM-DD"),untilDate:o().format("YYYY-MM-DD"),sort:"CUSTOMER_NAME",status:"all"},c=[{header:"No",key:"no",renderCell:(e,r)=>r+1},{header:"Divisi",key:"division",renderCell:e=>{var r;return((r=e.division)==null?void 0:r.name)??"-"}},{header:"Nomor PO.",key:"purchase_order_number",renderCell:e=>e.purchase_order_number??"-"},{header:"Nama",key:"name",renderCell:e=>{var r;return((r=e.customer)==null?void 0:r.name)??"-"},isMerged:!0,mergeKey:"customer.name"},{header:"Tanggal",key:"date",renderCell:e=>o(e.date).format("DD/MM/YYYY")},{header:"Jatuh Tempo",key:"amount",renderCell:e=>e.due_date?o(e.due_date).format("DD/MM/YYYY"):"-"},{header:"Total Piutang",key:"amount",renderCell:e=>i.jsx(s,{amount:Number(e.amount)}),renderFooter:e=>i.jsx(s,{amount:e.reduce((r,a)=>r+parseFloat(String(a.amount)),0)})},{header:"Diterima",key:"paid_amount_filtered",renderCell:e=>i.jsx(s,{amount:Number(e.paid_amount_filtered)}),renderFooter:e=>i.jsx(s,{amount:e.reduce((r,a)=>r+parseFloat(String(a.paid_amount_filtered)),0)})},{header:"Sisa Piutang",key:"remaining_amount_filtered",renderCell:e=>i.jsx(s,{amount:Number(e.remaining_amount_filtered)}),renderFooter:e=>i.jsx(s,{amount:e.reduce((r,a)=>r+parseFloat(String(a.remaining_amount_filtered)),0)})}];function u(e,r){let a=`${e}?monthFrom=${r.monthFrom}&monthTo=${r.monthTo}&division_id=${r.division_id||""}&customer_id=${r.customer_id||""}&dateType=${r.dateType||"year"}&year=${r.year||""}&date=${r.date||""}&dateFrom=${r.dateFrom||""}&dateTo=${r.dateTo||""}&untilDate=${r.untilDate||""}&status=${r.status||"all"}`;return r.sort&&(a+=`&sort=${r.sort}`),r.divisions&&r.divisions.length>0&&r.divisions.forEach((t,d)=>{a+=`&divisions[${d}][id]=${t.id}`}),a}function h(e){return u("/admin/receivable-report/export/pdf",e)}function x(e){return u("/admin/receivable-report/export/excel",e)}return i.jsx(g,{title:"Laporan Piutang",description:"Daftar piutang berdasarkan filter waktu, customer, dan divisi",fetchUrl:"/admin/receivable-report/list",exportPdfUrl:h,exportExcelUrl:x,initialFilters:m,renderFilter:(e,r,a)=>i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-4 items-end",children:[i.jsx("div",{className:"lg:col-span-6",children:i.jsx(l,{label:"Status Pembayaran",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx(n,{size:"sm",variant:e.status==="all"?"default":"outline",onClick:()=>r({...e,status:"all"}),children:"Semua"}),i.jsx(n,{size:"sm",variant:e.status==="unpaid"?"default":"outline",onClick:()=>r({...e,status:"unpaid"}),children:"Belum Dibayar"}),i.jsx(n,{size:"sm",variant:e.status==="paid"?"default":"outline",onClick:()=>r({...e,status:"paid"}),children:"Sudah Dibayar"})]})})}),i.jsx("div",{className:"lg:col-span-6",children:i.jsx(l,{label:"Divisi",children:i.jsx(_,{selectedDivisions:e.divisions,onSelectionChange:t=>{r({...e,divisions:t,division_id:t.map(d=>d.id).join(",")})}})})}),i.jsx("div",{className:"lg:col-span-6",children:i.jsx(l,{label:"Pelanggan",children:i.jsx(v,{value:e.customer,onChange:t=>r({...e,customer:t,customer_id:t.id}),clearable:!0})})}),i.jsx("div",{className:"lg:col-span-6",children:i.jsx(Y,{f:e,setF:r})}),i.jsx("div",{className:"lg:col-span-2",children:i.jsx(l,{label:"Urutan",children:i.jsxs(b,{value:e.sort||void 0,onValueChange:t=>{t&&r({...e,sort:t})},children:[i.jsx(D,{children:i.jsx(f,{placeholder:"Pilih opsi..."})}),i.jsxs(y,{children:[i.jsx(p,{value:"CUSTOMER_NAME",children:"Nama Pelanggan"}),i.jsx(p,{value:"DATE",children:"Tanggal"})]})]})})}),i.jsx("div",{className:"lg:col-span-12 flex justify-end gap-2 mt-4 border-t pt-2",children:i.jsxs(n,{onClick:a,children:[i.jsx(C,{className:"h-4 w-4 mr-2"})," Tampilkan"]})})]}),columns:c,isMerged:!0})}M.layout=m=>i.jsx(j,{breadcrumbs:[{label:"Dashboard",href:"/admin/"},{label:"Laporan",href:"#"},{label:"Piutang",href:"#"}],children:m});export{M as default};
