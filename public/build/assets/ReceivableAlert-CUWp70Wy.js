import{r as b,j as e}from"./app-CQ-G37p-.js";import{D as N,f as y,a as T,b as k,c as w}from"./dialog-CBBIkam9.js";import{B as D}from"./button-ymMXdPy5.js";import{B as x}from"./badge-CsIJHFj0.js";import{T as v,a as C,b as h,c as r,d as _,e as l}from"./table-BSdxGOLt.js";import{C as i}from"./currency-formatter-D5vTOkIG.js";import{h as t}from"./moment-C5S46NFB.js";import{T as d}from"./triangle-alert-byTh5Szo.js";import{E as B}from"./eye-DwuHDobg.js";import{C as j}from"./calendar-days-CaBtbxTM.js";import"./index-BHS3gC_j.js";import"./index-B9C1SM0Q.js";import"./index-DqZ46QiR.js";import"./index-D0iIn24t.js";import"./tslib.es6-eMSY344_.js";import"./index-uJ2KZHf0.js";import"./createLucideIcon-iWXofaGH.js";import"./x-D2Pel9EU.js";function Q({overdueReceivables:n=[],customerName:m}){const[g,u]=b.useState(!1);if(n.length===0)return null;const o=n.reduce((s,a)=>s+a.remaining_amount,0),p=n.reduce((s,a)=>t(a.due_date).isBefore(t(s.due_date))?a:s),c=t().diff(t(p.due_date),"days");return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-300 border border-red-200",role:"alert",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(d,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"font-medium",children:"Peringatan Piutang Jatuh Tempo!"})]}),e.jsxs(N,{open:g,onOpenChange:u,children:[e.jsx(y,{asChild:!0,children:e.jsxs(D,{variant:"outline",size:"sm",className:"ml-2",children:[e.jsx(B,{className:"h-4 w-4 mr-1"}),"Lihat Detail"]})}),e.jsxs(T,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsx(k,{children:e.jsxs(w,{className:"flex items-center",children:[e.jsx(d,{className:"h-5 w-5 mr-2 text-red-500"}),"Data Piutang Jatuh Tempo - ",m]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-red-50 p-4 rounded-lg border border-red-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-red-600",children:"Total Jatuh Tempo"}),e.jsx("p",{className:"text-lg font-bold text-red-800",children:e.jsx(i,{amount:o})})]}),e.jsx(d,{className:"h-8 w-8 text-red-500"})]})}),e.jsx("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-orange-600",children:"Jumlah Transaksi"}),e.jsxs("p",{className:"text-lg font-bold text-orange-800",children:[n.length," transaksi"]})]}),e.jsx(j,{className:"h-8 w-8 text-orange-500"})]})}),e.jsx("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-yellow-600",children:"Terlama Jatuh Tempo"}),e.jsxs("p",{className:"text-lg font-bold text-yellow-800",children:[c," hari"]})]}),e.jsx(j,{className:"h-8 w-8 text-yellow-500"})]})})]}),e.jsx("div",{className:"border rounded-lg",children:e.jsxs(v,{children:[e.jsx(C,{children:e.jsxs(h,{className:"bg-gray-50",children:[e.jsx(r,{className:"font-semibold",children:"No. PO"}),e.jsx(r,{className:"font-semibold",children:"Tanggal"}),e.jsx(r,{className:"font-semibold",children:"Jatuh Tempo"}),e.jsx(r,{className:"font-semibold",children:"Terlambat"}),e.jsx(r,{className:"font-semibold text-right",children:"Jumlah"}),e.jsx(r,{className:"font-semibold text-right",children:"Sisa Piutang"}),e.jsx(r,{className:"font-semibold",children:"Status"})]})}),e.jsx(_,{children:n.map(s=>{const a=t().diff(t(s.due_date),"days"),f=a>30;return e.jsxs(h,{className:`${f?"bg-red-50":"hover:bg-gray-50"}`,children:[e.jsx(l,{className:"font-medium",children:s.purchase_order_number}),e.jsx(l,{children:t(s.date).format("DD/MM/YYYY")}),e.jsx(l,{children:e.jsx("span",{className:a>30?"text-red-600 font-medium":"text-orange-600",children:t(s.due_date).format("DD/MM/YYYY")})}),e.jsx(l,{children:e.jsxs(x,{variant:a>30?"destructive":"secondary",className:a>30?"bg-red-100 text-red-800":"bg-orange-100 text-orange-800",children:[a," hari"]})}),e.jsx(l,{className:"text-right",children:e.jsx(i,{amount:s.amount})}),e.jsx(l,{className:"text-right font-medium",children:e.jsx("span",{className:"text-red-600",children:e.jsx(i,{amount:s.remaining_amount})})}),e.jsx(l,{children:e.jsx(x,{variant:s.status==="unpaid"?"destructive":"secondary",children:s.status==="unpaid"?"Belum Bayar":"Sebagian"})})]},s.id)})})]})}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"Catatan:"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("li",{children:"• Piutang yang terlambat lebih dari 30 hari ditandai dengan latar belakang merah"}),e.jsx("li",{children:"• Segera lakukan tindakan penagihan untuk mengurangi risiko piutang tak tertagih"}),e.jsx("li",{children:"• Pertimbangkan untuk memberikan diskon atau fasilitas pembayaran"})]})]})]})]})]})]}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("p",{className:"mb-1",children:["Customer ",e.jsx("strong",{children:m})," memiliki ",e.jsxs("strong",{children:[n.length," transaksi"]})," piutang yang telah jatuh tempo"]}),e.jsxs("p",{className:"text-xs",children:["Total: ",e.jsx("strong",{children:e.jsx(i,{amount:o})})," | Terlama: ",e.jsxs("strong",{children:[c," hari"]})," sejak jatuh tempo"]})]})]})})}export{Q as default};
