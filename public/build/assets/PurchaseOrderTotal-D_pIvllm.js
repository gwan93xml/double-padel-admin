import{r as f,j as t}from"./app-CQ-G37p-.js";import{A as p}from"./auto-manual-toggle-Drq7Gsew.js";import{M as m}from"./money-input-Bb590VQ4.js";import{l}from"./lodash-Caeo88pO.js";import"./createLucideIcon-iWXofaGH.js";import"./settings-BIxmfjj-.js";function _({data:s,type_ofTax:x,setData:r}){var u,d;f.useEffect(()=>{var o,a;if(s.tax_is_auto)if(x){const c=l.sum(((o=s.items)==null?void 0:o.map(e=>parseFloat(e.subtotal??"0")))??[]),n=l.sum(((a=s.items)==null?void 0:a.map(e=>parseFloat(e.discount??"0")))??[]),i=Math.round((c-n)*parseFloat(x.rate??"0")/100);r("tax",Math.round(i))}else r("tax",0)},[x,JSON.stringify(s.items),s.tax_is_auto]);function h(){var n,i;const o=l.sum(((n=s.items)==null?void 0:n.map(e=>parseFloat(e.subtotal??"0")))??[]),a=l.sum(((i=s.items)==null?void 0:i.map(e=>parseFloat(e.discount??"0")))??[]),c=Number(s.tax)??0;return o-a+c}return t.jsx("table",{className:"w-full",children:t.jsxs("tbody",{children:[t.jsxs("tr",{children:[t.jsx("td",{className:"text-right font-semibold font-mono",children:"SUBTOTAL"}),t.jsx("td",{className:"text-right w-4/5 md:w-1/5 pl-8",children:t.jsx(m,{readOnly:!0,className:"m-0 font-bold",value:l.sum(((u=s.items)==null?void 0:u.map(o=>parseFloat(o.subtotal??"0")))??[]).toFixed(2)})})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"text-right font-semibold font-mono",children:"DISKON"}),t.jsx("td",{className:"text-right font-bold pl-8",children:t.jsx(m,{readOnly:!0,className:"m-0 font-bold",value:l.sum(((d=s.items)==null?void 0:d.map(o=>parseFloat(o.discount??"0")))??[]).toFixed(2)})})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"text-right font-semibold font-mono",children:"PAJAK"}),t.jsx("td",{className:"text-right pl-8",children:t.jsxs("div",{className:"flex",children:[t.jsx(p,{isAuto:s.tax_is_auto,onToggle:o=>{r("tax_is_auto",o)}}),t.jsx(m,{value:s.tax,className:"m-0 font-bold",readOnly:s.tax_is_auto,onValueChange:o=>{r({...s,tax:o})}})]})})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"text-right font-bold font-mono",children:"TOTAL"}),t.jsx("td",{className:"text-right font-bold pl-8",children:t.jsx(m,{readOnly:!0,className:"font-bold text-black",value:h().toFixed(2)})})]})]})})}export{_ as default};
