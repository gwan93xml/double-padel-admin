import{r as v,j as o}from"./app-CQ-G37p-.js";import{h as s}from"./moment-C5S46NFB.js";import{R as x}from"./report-list-CoUR2Q-E.js";import{I as l}from"./input-BXXA-PDa.js";import{B as b}from"./button-ymMXdPy5.js";import{F as n}from"./form-group-CHZXn8bM.js";import{S as j}from"./SearchVendor-DVTa9TJs.js";import{C as a}from"./currency-formatter-D5vTOkIG.js";import{A as F}from"./AuthenticatedLayout-X6euxa7E.js";import{D as _}from"./DivisionList-Dge3XhOp.js";import{S as k}from"./search-B9EA-nRY.js";import"./table-BSdxGOLt.js";import"./createLucideIcon-iWXofaGH.js";import"./card-Bq41eL_q.js";import"./list-DIayZXqH.js";import"./filter-BZN7rDIQ.js";import"./file-text-vhY6aTSF.js";import"./file-spreadsheet-Dv5Qp-1R.js";import"./index-D0iIn24t.js";import"./label-Blk7FhF1.js";import"./index-DqZ46QiR.js";import"./loader-circle-i2ANfqrZ.js";import"./x-D2Pel9EU.js";import"./index-BHS3gC_j.js";import"./index-B9C1SM0Q.js";import"./tslib.es6-eMSY344_.js";import"./index-uJ2KZHf0.js";import"./index-C7S3ohsj.js";import"./index-B9VoEdXn.js";import"./can-DARgw7Bo.js";import"./chevron-right-DWL5tPD-.js";import"./use-toast-XJEkqv7A.js";import"./badge-CsIJHFj0.js";import"./triangle-alert-byTh5Szo.js";import"./calendar-BV_-Gsoc.js";import"./checkbox-DaA1krf_.js";import"./index-CZ_DqijM.js";import"./command-BCd-qebN.js";import"./dialog-CBBIkam9.js";import"./popover-BMGWAYFn.js";import"./chevron-down-BOk5s691.js";function y(){const[d,m]=v.useState([]),p={monthFrom:s().format("YYYY-MM"),monthTo:s().format("YYYY-MM"),division:void 0,vendor_id:void 0,vendor:void 0,division_id:void 0},c=[{header:"No",key:"no",renderCell:(e,r)=>r+1},{header:"Invoice",key:"invoice",renderCell:e=>o.jsx("a",{href:`/admin/purchase/${e.id}/edit`,className:"text-blue-600 hover:underline",target:"_blank",children:e.invoice_number})},{header:"Tanggal",key:"date",renderCell:e=>s(e.purchase_date).format("DD/MM/YYYY")},{header:"Divisi",key:"division",renderCell:e=>{var r;return((r=e.division)==null?void 0:r.name)??"-"}},{header:"Vendor",key:"vendor",renderCell:e=>{var r;return((r=e.vendor)==null?void 0:r.name)??"-"}},{header:"Harga",key:"subtotal",align:"right",renderCell:e=>o.jsx(a,{amount:Number(e.subtotal)}),renderFooter:e=>e.reduce((r,i)=>r+Number(i.subtotal),0).toLocaleString("id-ID")},{header:"Diskon",key:"discount",align:"right",renderCell:e=>o.jsx(a,{amount:Number(e.discount)+Number(e.purchase_discount)}),renderFooter:e=>e.reduce((r,i)=>r+parseFloat(String(i.discount))+parseFloat(String(i.purchase_discount)),0).toLocaleString("id-ID")},{header:"Pajak",key:"tax",align:"right",renderCell:e=>o.jsx(a,{amount:Number(e.tax)}),renderFooter:e=>e.reduce((r,i)=>r+parseFloat(String(i.tax)),0).toLocaleString("id-ID")},{header:"By. Kirim",key:"shipping",align:"right",renderCell:e=>o.jsx(a,{amount:Number(e.shipping_cost)}),renderFooter:e=>e.reduce((r,i)=>r+parseFloat(String(i.shipping_cost)),0).toLocaleString("id-ID")},{header:"Materai",key:"stamp",align:"right",renderCell:e=>o.jsx(a,{amount:Number(e.stamp_duty)}),renderFooter:e=>e.reduce((r,i)=>r+parseFloat(String(i.stamp_duty)),0).toLocaleString("id-ID")},{header:"Total",key:"total",align:"right",renderCell:e=>o.jsx(a,{amount:Number(e.total_amount)}),renderFooter:e=>e.reduce((r,i)=>r+parseFloat(String(i.total_amount)),0).toLocaleString("id-ID")}];function h(e){let r=`/admin/purchase-report/export/excel?monthFrom=${e.monthFrom}&monthTo=${e.monthTo}`;return e.divisions&&e.divisions.length>0&&e.divisions.forEach((i,t)=>{r+=`&divisions[${t}][id]=${i.id}`}),e.vendor_id&&(r+=`&vendor_id=${e.vendor_id}`),r}function u(e){let r=`/admin/purchase-report/export/pdf?monthFrom=${e.monthFrom}&monthTo=${e.monthTo}`;return e.divisions&&e.divisions.length>0&&e.divisions.forEach((i,t)=>{r+=`&divisions[${t}][id]=${i.id}`}),e.vendor_id&&(r+=`&vendor_id=${e.vendor_id}`),r}return o.jsx(x,{title:"Laporan Pembelian",description:"Daftar transaksi pembelian berdasarkan filter waktu, vendor, dan divisi",fetchUrl:"/admin/purchase-report/list",exportPdfUrl:u,exportExcelUrl:h,initialFilters:p,renderFilter:(e,r,i)=>o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-4 items-end",children:[o.jsx("div",{className:"lg:col-span-4",children:o.jsx(n,{label:"Divisi",children:o.jsx(_,{selectedDivisions:d||[],onSelectionChange:t=>{r({...e,divisions:t.map(g=>({id:g.id}))}),m(t)}})})}),o.jsx("div",{className:"lg:col-span-4",children:o.jsx(n,{label:"Vendor",children:o.jsx(j,{value:e.vendor,onChange:t=>r({...e,vendor:t,vendor_id:t.id}),clearable:!0})})}),o.jsx("div",{className:"lg:col-span-2",children:o.jsx(n,{label:"Dari Bulan",children:o.jsx(l,{type:"month",value:e.monthFrom,onChange:t=>r({...e,monthFrom:t.target.value})})})}),o.jsx("div",{className:"lg:col-span-2",children:o.jsx(n,{label:"Hingga Bulan",children:o.jsx(l,{type:"month",value:e.monthTo,onChange:t=>r({...e,monthTo:t.target.value})})})}),o.jsx("div",{className:"lg:col-span-12 flex justify-end gap-2 mt-4",children:o.jsxs(b,{onClick:i,className:"bg-blue-600 hover:bg-blue-700",children:[o.jsx(k,{className:"h-4 w-4 mr-2"})," Tampilkan"]})})]}),columns:c})}y.layout=d=>o.jsx(F,{breadcrumbs:[{label:"Dashboard",href:"/admin/"},{label:"Laporan",href:"#"},{label:"Pembelian",href:"#"}],children:d});export{y as default};
