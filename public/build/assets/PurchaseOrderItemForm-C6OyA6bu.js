import{j as t}from"./app-CQ-G37p-.js";import{S as d}from"./SearchChartOfAccount-0Jd4yGJY.js";import{S as v}from"./SearchItem-DGpcvLrN.js";import{S as F}from"./SearchSubUnit-CTrUekdR.js";import{B as j}from"./button-ymMXdPy5.js";import{D as f,a as C,b as S,c as y,d as N}from"./dialog-CBBIkam9.js";import{F as n}from"./form-group-CHZXn8bM.js";import{I as l}from"./input-BXXA-PDa.js";import{M as s}from"./money-input-Bb590VQ4.js";import{T as k}from"./textarea-BvykTLwI.js";import"./card-Bq41eL_q.js";import"./createLucideIcon-iWXofaGH.js";import"./badge-CsIJHFj0.js";import"./loader-circle-i2ANfqrZ.js";import"./search-B9EA-nRY.js";import"./x-D2Pel9EU.js";import"./file-text-vhY6aTSF.js";import"./package-Cd0mGsRo.js";import"./select-BSIJzAmS.js";import"./index-B9C1SM0Q.js";import"./index-DqZ46QiR.js";import"./index-D0iIn24t.js";import"./tslib.es6-eMSY344_.js";import"./index-C7S3ohsj.js";import"./index-B9VoEdXn.js";import"./index-CZ_DqijM.js";import"./chevron-down-BOk5s691.js";import"./index-BHS3gC_j.js";import"./index-uJ2KZHf0.js";import"./label-Blk7FhF1.js";function ie({formDialog:c,onOpenChange:u,data:e,setData:o,onSave:_,errors:i}){var m,a,p,h;return t.jsx(f,{open:c.open,onOpenChange:u,children:t.jsxs(C,{className:" max-h-[80vh] overflow-y-auto",children:[t.jsx(S,{children:t.jsx(y,{children:c.isEdit?"Edit Item":"Tambahkan item"})}),t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex border border-gray-200 shadow-sm rounded justify-stretch",children:[t.jsx("div",{className:`flex-1 p-2 text-center border-r cursor-pointer font-bold " ${e.is_stock?"bg-blue-600 rounded-l text-white":""}`,onClick:()=>{o({...e,is_stock:!0})},children:"STOCK"}),t.jsx("div",{className:`flex-1 p-2 text-center cursor-pointer font-bold ${e.is_stock?"":"bg-blue-600 rounded-r text-white"}`,onClick:()=>{o({...e,is_stock:!1})},children:"NON STOCK"})]}),e.is_stock&&t.jsx(n,{label:"Item",error:i.item_name,name:"item_id",required:!0,children:t.jsx(v,{value:{id:e.item_id??"",code:((m=e.item)==null?void 0:m.code)??"",name:((a=e.item)==null?void 0:a.name)??"",purchase_price:(e==null?void 0:e.price)??"0",selling_price:(e==null?void 0:e.price)??"0",unit:(e==null?void 0:e.unit)??"0",description:e.notes},onChange:r=>{o({...e,item_id:r.id,item_name:r.name,price:r.purchase_price??0,item:{code:r.code,name:r.name},notes:r.description})}})}),!e.is_stock&&t.jsxs(t.Fragment,{children:[t.jsx(n,{label:"Item",error:i.item_name,name:"item_name",required:!0,children:t.jsx(l,{type:"text",value:e.item_name,onChange:r=>{o({...e,item_id:r.target.value,item:{code:r.target.value,name:r.target.value},item_name:r.target.value})}})}),t.jsx(n,{label:"Akun",error:i.chart_of_account_id,name:"chart_of_account_id",children:t.jsx(d,{value:{id:e.chart_of_account_id,code:(p=e.chart_of_account)==null?void 0:p.code,name:(h=e.chart_of_account)==null?void 0:h.name},onChange:r=>{o({...e,chart_of_account_id:r.id,chart_of_account:r})}})}),t.jsx(n,{label:"Satuan",error:i.unit,name:"unit",children:t.jsx(l,{type:"text",value:e.unit,onChange:r=>{o({...e,unit:r.target.value})}})})]}),t.jsx(n,{label:"Harga",error:i.price,name:"price",children:t.jsx(s,{value:e.price,onValueChange:r=>{o({...e,price:r,subtotal:(parseFloat(r)*parseFloat(e.quantity)).toString(),total:(parseFloat(r)*parseFloat(e.quantity)-parseFloat(e.discount)).toString()})}})}),t.jsx(n,{label:"Jumlah",error:i.quantity,name:"quantity",children:t.jsx(l,{type:"number",value:e.quantity,className:"text-right",onChange:r=>{o({...e,quantity:r.target.value,subtotal:(parseFloat(e.price??"0")*parseFloat(r.target.value)).toString(),total:(parseFloat(e.price??"0")*parseFloat(r.target.value)-parseFloat(e.discount)).toString()})}})}),e.is_stock&&t.jsx(n,{label:"Satuan",error:i.unit,required:!0,children:t.jsx(F,{value:e.unit,itemId:e.item_id,onChange:r=>{o("unit",r)}})}),t.jsx(n,{label:"Subtotal",error:i.subtotal,name:"subtotal",children:t.jsx(s,{value:e.subtotal,className:"text-right",onValueChange:r=>{o({...e,subtotal:r,price:(parseFloat(r)/parseFloat(e.quantity)).toString(),total:(parseFloat(r)-parseFloat(e.discount)).toString()})}})}),t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"w-3/4",children:t.jsx(n,{label:"Discount",error:i.discount,name:"discount",children:t.jsx(s,{value:e.discount,className:"text-right",onValueChange:r=>{o({...e,discount:r,discount_percent:0,total:(parseFloat(e.subtotal)-parseFloat(r)).toString()})}})})}),t.jsx("div",{className:"w-1/4",children:t.jsx(n,{label:"%",error:i.discount,name:"discount",children:t.jsx(l,{type:"number",value:e.discount_percent,className:"text-right",onChange:r=>{const x=parseFloat(e.subtotal??"0"),g=(x*parseFloat(r.target.value)/100).toFixed(2),b=(x-parseFloat(g)).toFixed(2);o({...e,discount_percent:r.target.value,discount:g,total:b})}})})})]}),t.jsx(n,{label:"Total",error:i.total,name:"total",children:t.jsx(s,{disabled:!0,value:e.total,className:"text-right",onChange:r=>{o({...e,total:r.target.value})}})}),t.jsx(n,{label:"Catatan",error:i.notes,name:"notes",children:t.jsx(k,{value:e.notes,onChange:r=>{o({...e,notes:r.target.value})}})})]}),t.jsxs(N,{children:[t.jsx(j,{type:"button",variant:"outline",onClick:u,children:"Batal"}),t.jsx(j,{type:"button",onClick:()=>_(e),children:c.isEdit?"Edit":"Tambah"})]})]})})}export{ie as default};
