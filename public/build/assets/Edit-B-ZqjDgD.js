import{W as N,r as S,j as e,a as T,y as C}from"./app-CQ-G37p-.js";import{B as m}from"./button-ymMXdPy5.js";import{F as x}from"./form-group-CHZXn8bM.js";import{I as d}from"./input-BXXA-PDa.js";import{T as E,a as A,b as j,c,d as k,e as o}from"./table-BSdxGOLt.js";import{A as w}from"./AuthenticatedLayout-X6euxa7E.js";import{t as f}from"./use-toast-XJEkqv7A.js";import{P as D}from"./plus-gEoqNGty.js";import"./index-D0iIn24t.js";import"./createLucideIcon-iWXofaGH.js";import"./label-Blk7FhF1.js";import"./index-DqZ46QiR.js";import"./index-BHS3gC_j.js";import"./index-B9C1SM0Q.js";import"./tslib.es6-eMSY344_.js";import"./index-uJ2KZHf0.js";import"./x-D2Pel9EU.js";import"./index-C7S3ohsj.js";import"./index-B9VoEdXn.js";import"./can-DARgw7Bo.js";import"./chevron-right-DWL5tPD-.js";import"./badge-CsIJHFj0.js";import"./currency-formatter-D5vTOkIG.js";import"./moment-C5S46NFB.js";import"./triangle-alert-byTh5Szo.js";import"./calendar-BV_-Gsoc.js";function B({unit:l}){const{data:r,setData:i,clearErrors:v,reset:F,errors:p,setError:g}=N(l),[h,b]=S.useState(!1);async function y(){v(),b(!0);try{const s=await T.put(`/admin/unit/${r.id}`,r);f({title:"Sukses",description:"Data satuan berhasil diubah"}),C.visit("/admin/unit")}catch(s){if(s.response.status===422){const t=s.response.data.errors;g(t)}else f({variant:"destructive",title:"Gagal",description:s.response.data.message})}finally{b(!1)}}function _(){i({...r,sub_units:[...r.sub_units,{name:"",conversion:"1"}]})}return e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"grid grid-cols-1 gap-x-4  gap-y-4",children:[e.jsx(x,{label:"Nama",error:p.name,required:!0,children:e.jsx(d,{type:"text",value:r.name,onChange:s=>{i("name",s.target.value)}})}),e.jsx(x,{required:!0,error:p.sub_units,label:"Sub Satuan",children:e.jsxs(E,{children:[e.jsx(A,{children:e.jsxs(j,{children:[e.jsx(c,{className:"w-[10px]",children:"NO"}),e.jsx(c,{className:"w-[60%]",children:"SATUAN"}),e.jsx(c,{children:"KONVERSI"})]})}),e.jsx(k,{children:r.sub_units.map((s,t)=>e.jsxs(j,{children:[e.jsx(o,{children:t+1}),e.jsx(o,{children:e.jsx(d,{type:"text",value:s.name,onChange:n=>{i("sub_units",r.sub_units.map((a,u)=>u===t?{...a,name:n.target.value}:a))}})}),e.jsx(o,{children:e.jsx(d,{type:"number",className:"text-end",value:s.conversion,onChange:n=>{i("sub_units",r.sub_units.map((a,u)=>u===t?{...a,conversion:n.target.value}:a))}})}),e.jsx(o,{children:e.jsx(m,{variant:"destructive",onClick:()=>{i("sub_units",r.sub_units.filter((n,a)=>a!==t))},children:"Hapus"})})]}))})]})}),e.jsx(m,{onClick:_,children:e.jsx(D,{})}),e.jsx("div",{children:e.jsx(m,{disabled:h,onClick:y,children:h?"Mengubah...":"Ubah"})})]})})}B.layout=l=>e.jsx(w,{breadcrumbs:[{label:"Dashboard",href:"/admin"},{label:"Master File",href:"#"},{label:"Satuan",href:"/admin/unit"},{label:"Edit",href:"#"}],children:l});export{B as default};
