import{r as i,j as t}from"./app-CQ-G37p-.js";import{D as C,a as I,b as S,c as _,d as F}from"./dialog-CBBIkam9.js";import{B as j}from"./button-ymMXdPy5.js";import{I as K}from"./input-BXXA-PDa.js";import{T as q}from"./textarea-BvykTLwI.js";import{F as m}from"./form-group-CHZXn8bM.js";import{S as w}from"./SearchItem-DGpcvLrN.js";import{S as B}from"./SearchSubUnit-CTrUekdR.js";import"./index-BHS3gC_j.js";import"./index-B9C1SM0Q.js";import"./index-DqZ46QiR.js";import"./index-D0iIn24t.js";import"./tslib.es6-eMSY344_.js";import"./index-uJ2KZHf0.js";import"./createLucideIcon-iWXofaGH.js";import"./x-D2Pel9EU.js";import"./label-Blk7FhF1.js";import"./card-Bq41eL_q.js";import"./badge-CsIJHFj0.js";import"./loader-circle-i2ANfqrZ.js";import"./search-B9EA-nRY.js";import"./package-Cd0mGsRo.js";import"./select-BSIJzAmS.js";import"./index-C7S3ohsj.js";import"./index-B9VoEdXn.js";import"./index-CZ_DqijM.js";import"./chevron-down-BOk5s691.js";function ce({show:a,isEdit:p,item:r,errors:c,warehouseId:k,onClose:d,onSave:l,onItemChange:D,onQuantityChange:R,onUnitChange:b,onRemarksChange:E}){var h,g,x,y,v;const f=i.useRef(null),n=i.useRef(null),o=i.useRef(null),u=i.useRef(null),T=i.useRef(null);return i.useEffect(()=>{a&&setTimeout(()=>{f.current&&f.current.focus()},150)},[a]),i.useEffect(()=>{const e=s=>{s.key==="Enter"&&o.current&&o.current.contains(document.activeElement)&&(s.preventDefault(),u.current&&u.current.focus())};return a&&document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[a]),t.jsx(C,{open:a,onOpenChange:d,children:t.jsxs(I,{className:"max-h-[80vh] overflow-y-auto",children:[t.jsx(S,{children:t.jsx(_,{children:p?"Edit Item":"Tambahkan Item"})}),t.jsx("form",{onSubmit:e=>e.preventDefault(),children:t.jsxs("div",{className:"space-y-4",children:[t.jsx(m,{label:"Item",error:c.item_id,name:"item_id",children:t.jsx(w,{itemCodeRef:f,warehouseId:k,value:{id:r.item_id??"",code:((h=r.item)==null?void 0:h.code)??"",name:((g=r.item)==null?void 0:g.name)??"",purchase_price:String(((x=r.item)==null?void 0:x.purchase_price)??"0"),selling_price:String(((y=r.item)==null?void 0:y.selling_price)??"0"),unit:((v=r.item)==null?void 0:v.unit)??""},onChange:e=>{D(e),setTimeout(()=>{n.current&&(n.current.focus(),n.current.select())},100)},nextRef:n})}),t.jsx(m,{label:"Jumlah",error:c.quantity,name:"quantity",children:t.jsx(K,{ref:n,type:"number",value:r.quantity,className:"text-right",onFocus:e=>{e.target.select()},onChange:e=>R(e.target.value),onKeyDown:e=>{e.key==="Enter"&&(e.preventDefault(),o.current&&setTimeout(()=>{o.current.focus(),o.current.click()},50))}})}),t.jsx(m,{label:"Satuan",error:c.unit,required:!0,children:t.jsx(B,{ref:o,value:r.unit,itemId:r.item_id,onChange:e=>{e!==""&&(b(e),setTimeout(()=>{u.current&&u.current.focus()},100))}})}),t.jsx(m,{label:"Keterangan",error:c.remarks,name:"remarks",children:t.jsx(q,{ref:u,value:r.remarks,onChange:e=>E(e.target.value),onKeyDown:e=>{e.key==="Enter"&&!e.shiftKey?(e.preventDefault(),l()):e.key==="ArrowUp"&&n.current&&(n.current.focus(),setTimeout(()=>{var s;return(s=n.current)==null?void 0:s.select()},0))},onFocus:e=>{setTimeout(()=>{e.target.setSelectionRange(e.target.value.length,e.target.value.length)},0)}})})]})}),t.jsxs(F,{children:[t.jsx(j,{type:"button",variant:"outline",onClick:d,children:"Batal"}),t.jsx(j,{ref:T,type:"button",onClick:()=>{l()},onKeyDown:e=>{e.key==="Enter"&&(e.preventDefault(),l())},children:p?"Edit":"Tambah"})]})]})})}export{ce as default};
