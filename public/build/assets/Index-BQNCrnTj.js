import{r as n,j as e,b as C,y as o}from"./app-xdIDsNuc.js";import{d as q,A as z}from"./AuthenticatedLayout-DtjjUv9R.js";import{c as M,B as i}from"./index-D9fYs-5N.js";import{I as O}from"./input-Pb5O0huv.js";import{S as _,B as k}from"./badge-ZAY5fO7e.js";import{C as x,a as m,b as h,d as j,c as P}from"./card-DPe-xeUS.js";import{T as E,a as V,b as D,c as d,d as $,e as c}from"./table-DWveCIF-.js";import{D as Y,a as G,b as J,c as K,d as Q,e as W,f as X,S as Z}from"./dialog-D0N63b2F.js";import{L as f}from"./label-DxiqzSVl.js";import{S as ee}from"./switch-yjkDMiNg.js";import{T as se}from"./textarea-CBlx0qbf.js";import{c as v}from"./utils-jM7Hu9J5.js";import{c as g}from"./createLucideIcon-D9qBrcbq.js";import{U as ae}from"./users-BcHBMDRy.js";import{P as te}from"./plus-g40r8l_n.js";import{T as I}from"./trash-2-DreEqKRe.js";import"./index-CltWYr8P.js";import"./index-4rFdga_w.js";import"./index-Dy_V4ZJ5.js";import"./index-CCSo0cdO.js";import"./index-CZTB0vk4.js";import"./x-Cp6Dz_ky.js";import"./index-OwxvCaeV.js";import"./moment-DPfounic.js";import"./check-B2a_CU3u.js";import"./star-DujE_Tw0.js";import"./use-toast-BOfnQU58.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=g("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=g("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=g("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=g("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),ce=M("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),T=n.forwardRef(({className:a,variant:r,...t},y)=>e.jsx("div",{ref:y,role:"alert",className:v(ce({variant:r}),a),...t}));T.displayName="Alert";const ne=n.forwardRef(({className:a,...r},t)=>e.jsx("h5",{ref:t,className:v("mb-1 font-medium leading-none tracking-tight",a),...r}));ne.displayName="AlertTitle";const S=n.forwardRef(({className:a,...r},t)=>e.jsx("div",{ref:t,className:v("text-sm [&_p]:leading-relaxed",a),...r}));S.displayName="AlertDescription";function oe({allowedIps:a,currentIp:r,stats:t,auth:y}){const[R,N]=n.useState(!1),[u,p]=n.useState({ip_address:"",description:"",is_active:!0}),[b,w]=n.useState(!1),L=s=>{s.preventDefault(),w(!0),o.post(route("admin.allowed-ips.store"),u,{onSuccess:()=>{N(!1),p({ip_address:"",description:"",is_active:!0})},onFinish:()=>w(!1)})},B=s=>{o.post(route("admin.allowed-ips.toggle",s))},F=s=>{confirm("Are you sure you want to delete this IP address?")&&o.delete(route("admin.allowed-ips.destroy",s))},A=()=>{o.post(route("admin.allowed-ips.add-current"))},H=()=>{confirm("Are you sure you want to delete all inactive IP addresses?")&&o.delete(route("admin.allowed-ips.bulk-delete-inactive"))},U=s=>new Date(s).toLocaleString();return e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(T,{children:[e.jsx(re,{className:"h-4 w-4"}),e.jsxs(S,{children:["Your current IP address is: ",e.jsx("strong",{children:r}),!a.data.some(s=>s.ip_address===r&&s.is_active)&&e.jsx("span",{className:"ml-2",children:e.jsx(i,{size:"sm",onClick:A,className:"ml-2",children:"Add to Allowed List"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(x,{children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium",children:"Total IPs"}),e.jsx(ae,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(j,{children:e.jsx("div",{className:"text-2xl font-bold",children:t.total})})]}),e.jsxs(x,{children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium",children:"Active IPs"}),e.jsx(de,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(j,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.active})})]}),e.jsxs(x,{children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium",children:"Recently Used (7 days)"}),e.jsx(q,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(j,{children:e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.recently_used})})]})]}),e.jsxs(x,{children:[e.jsxs(m,{children:[e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-5 w-5"}),"IP Access Control"]}),e.jsx(P,{children:"Manage IP addresses that are allowed to access the application"})]}),e.jsx(j,{children:e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs(Y,{open:R,onOpenChange:N,children:[e.jsx(G,{asChild:!0,children:e.jsxs(i,{children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),"Add IP Address"]})}),e.jsxs(J,{children:[e.jsxs(K,{children:[e.jsx(Q,{children:"Add New IP Address"}),e.jsx(W,{children:"Add a new IP address or CIDR range to the allowed list"})]}),e.jsxs("form",{onSubmit:L,children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(f,{htmlFor:"ip_address",children:"IP Address or CIDR Range"}),e.jsx(O,{id:"ip_address",placeholder:"192.168.1.100 or 192.168.1.0/24",value:u.ip_address,onChange:s=>p(l=>({...l,ip_address:s.target.value})),required:!0})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(f,{htmlFor:"description",children:"Description"}),e.jsx(se,{id:"description",placeholder:"Office network, Admin home, etc.",value:u.description,onChange:s=>p(l=>({...l,description:s.target.value}))})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ee,{id:"is_active",checked:u.is_active,onCheckedChange:s=>p(l=>({...l,is_active:s}))}),e.jsx(f,{htmlFor:"is_active",children:"Active"})]})]}),e.jsx(X,{children:e.jsx(i,{type:"submit",disabled:b,children:b?"Adding...":"Add IP"})})]})]})]}),e.jsxs(i,{variant:"outline",onClick:A,disabled:a.data.some(s=>s.ip_address===r&&s.is_active),children:["Add Current IP (",r,")"]}),t.total>t.active&&e.jsxs(i,{variant:"outline",onClick:H,className:"text-red-600 hover:text-red-700",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Delete Inactive"]})]})})]}),e.jsxs(x,{children:[e.jsxs(m,{children:[e.jsx(h,{children:"Allowed IP Addresses"}),e.jsx(P,{children:t.total===0?"No IP restrictions configured. All IPs are allowed to access the application.":`${t.total} IP address(es) configured. Only these IPs can access the application.`})]}),e.jsx(j,{children:a.data.length>0?e.jsxs(E,{children:[e.jsx(V,{children:e.jsxs(D,{children:[e.jsx(d,{children:"IP Address"}),e.jsx(d,{children:"Description"}),e.jsx(d,{children:"Status"}),e.jsx(d,{children:"Created By"}),e.jsx(d,{children:"Last Used"}),e.jsx(d,{children:"Actions"})]})}),e.jsx($,{children:a.data.map(s=>e.jsxs(D,{children:[e.jsxs(c,{className:"font-mono",children:[s.ip_address,s.ip_address===r&&e.jsx(k,{variant:"outline",className:"ml-2 text-xs",children:"Current"})]}),e.jsx(c,{children:s.description||"-"}),e.jsx(c,{children:e.jsx(k,{variant:s.is_active?"default":"secondary",children:s.is_active?"Active":"Inactive"})}),e.jsx(c,{children:s.created_by||"-"}),e.jsx(c,{children:s.last_used_at?U(s.last_used_at):"Never"}),e.jsx(c,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{size:"sm",variant:"outline",onClick:()=>B(s.id),children:s.is_active?e.jsx(le,{className:"h-4 w-4"}):e.jsx(ie,{className:"h-4 w-4"})}),e.jsx(C,{href:route("admin.allowed-ips.edit",s.id),children:e.jsx(i,{size:"sm",variant:"outline",children:e.jsx(Z,{className:"h-4 w-4"})})}),e.jsx(i,{size:"sm",variant:"outline",onClick:()=>F(s.id),className:"text-red-600 hover:text-red-700",children:e.jsx(I,{className:"h-4 w-4"})})]})})]},s.id))})]}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(_,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No IP addresses configured"}),e.jsx("p",{className:"text-sm",children:"All IP addresses are currently allowed to access the application"})]})})]}),a.last_page>1&&e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"flex gap-2",children:a.links.map((s,l)=>e.jsx(C,{href:s.url,className:`px-3 py-2 rounded ${s.active?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,dangerouslySetInnerHTML:{__html:s.label}},l))})})]})})}oe.layout=a=>e.jsx(z,{breadcrumbs:[{label:"Dashboard",href:"/admin"},{label:"Pengaturan",href:"#"},{label:"IP Access Control",href:"#"}],children:a});export{oe as default};
