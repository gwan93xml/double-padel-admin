import{r as c,j as e,a as b}from"./app-CQ-G37p-.js";import{B as _}from"./button-ymMXdPy5.js";import{C as D}from"./checkbox-DaA1krf_.js";import{C}from"./currency-formatter-D5vTOkIG.js";import{D as y,a as $,b as N,c as E,d as M}from"./dialog-CBBIkam9.js";import{T as P,a as B,b as g,c as n,d as S,e as i}from"./table-BSdxGOLt.js";import{h as j}from"./moment-C5S46NFB.js";import"./index-D0iIn24t.js";import"./createLucideIcon-iWXofaGH.js";import"./index-B9C1SM0Q.js";import"./index-DqZ46QiR.js";import"./tslib.es6-eMSY344_.js";import"./index-CZ_DqijM.js";import"./index-B9VoEdXn.js";import"./index-uJ2KZHf0.js";import"./index-BHS3gC_j.js";import"./x-D2Pel9EU.js";function H({customer_id:h,formDialog:r,setFormDialog:x,onChange:v,accountReceivableHeader:p}){const[w,m]=c.useState([]),[l,d]=c.useState([]);c.useEffect(()=>{async function s(){const{data:a}=await b.get(`/admin/receivable-report/list?customer_id=${h}&account_receivable_header_id=${(p==null?void 0:p.id)||"0"}`);m(a.data)}s(),d([])},[h,r.show]),c.useEffect(()=>{async function s(){const{data:a}=await b.get(`/admin/receivable-report/list?customer_id=${h}`);m(a.data)}s()},[]);function k(s,a){d(s?[...l,a]:l.filter(o=>`${o.id}-${o.created_at}`!=`${a.id}-${a.created_at}`))}function T(){v(l),x({...r,show:!1}),d([])}function Y(s){s.sale?window.open(`/admin/sale/${s.sale.id}/edit`,"_blank"):s.sales_deposit&&window.open(`/admin/sales-deposit/${s.sales_deposit.id}/edit`,"_blank")}return e.jsx(e.Fragment,{children:e.jsx(y,{open:r.show,onOpenChange:()=>x({...r,show:!1}),children:e.jsxs($,{className:"min-w-[70%]",children:[e.jsx(N,{children:e.jsx(E,{children:r.isEdit?"Edit Item":"Tambahkan item"})}),e.jsx("div",{className:" max-h-[70vh] overflow-y-auto",children:e.jsxs(P,{children:[e.jsx(B,{children:e.jsxs(g,{children:[e.jsx(n,{}),e.jsx(n,{children:"Tipe"}),e.jsx(n,{children:"Nomor PO."}),e.jsx(n,{children:"Nomor"}),e.jsx(n,{children:"Tanggal"}),e.jsx(n,{children:"Sisa Piutang"}),e.jsx(n,{children:"Pelanggan"}),e.jsx(n,{children:"Divisi"})]})}),e.jsx(S,{children:w.map(s=>{var a,o,u,f;return e.jsxs(g,{className:"cursor-pointer hover:bg-secondary",onClick:()=>Y(s),children:[e.jsx(i,{children:e.jsx(D,{onClick:t=>t.stopPropagation(),onCheckedChange:t=>{k(t,s)},checked:l.map(t=>t.id).includes(s.id)})}),e.jsx(i,{children:s.sales_deposit?"DP":"CR"}),e.jsxs(i,{children:[s.purchase_order_number??"",((a=s.sale)==null?void 0:a.purchase_order_number)??""]}),e.jsxs(i,{children:[s.sale?(o=s.sale)==null?void 0:o.no:"",s.sales_deposit?(u=s.sales_deposit)==null?void 0:u.number:""]}),e.jsx(i,{children:s.date?e.jsx(e.Fragment,{children:s.date?j(s.date).format("DD/MM/YYYY"):""}):e.jsxs(e.Fragment,{children:[s.sale?j(s.sale.sale_date).format("DD/MM/YYYY"):"",s.sales_deposit?j(s.sales_deposit.date).format("DD/MM/YYYY"):""]})}),e.jsx(i,{children:e.jsx(C,{amount:s.remaining_amount})}),e.jsx(i,{children:s.customer.name}),e.jsx(i,{children:(f=s.division)==null?void 0:f.name})]},s.id)})})]})}),e.jsx(M,{children:e.jsxs("div",{className:"flex justify-between items-center w-full",children:[e.jsxs("div",{className:"font-bold text-lg font-mono",children:[e.jsx("div",{children:"Total Dipilih"}),e.jsx(C,{amount:l.reduce((s,a)=>s+Number(a.remaining_amount),0)})]}),e.jsxs("div",{children:[e.jsx(_,{type:"button",variant:"outline",onClick:()=>{x({...r,show:!1})},children:"Batal"}),e.jsx(_,{type:"button",onClick:T,children:"Tambah"})]})]})})]})})})}export{H as default};
