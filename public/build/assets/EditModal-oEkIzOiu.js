import{r as n,j as a,a as d}from"./app-CQ-G37p-.js";import{D,a as w,b as S,c as T,d as q}from"./dialog-CBBIkam9.js";import{P as g}from"./ProcessingButton-Da7kiAJ4.js";import{P as C,s as F}from"./promise-alert-dialog-DMOGPPD8.js";import{t as s}from"./use-toast-XJEkqv7A.js";import{c as f}from"./can-DARgw7Bo.js";import{F as o}from"./form-group-CHZXn8bM.js";import{I as x}from"./input-BXXA-PDa.js";import{T as I}from"./textarea-BvykTLwI.js";import{S as G}from"./SearchWarehouse-Bw-VGbhg.js";import"./index-BHS3gC_j.js";import"./index-B9C1SM0Q.js";import"./index-DqZ46QiR.js";import"./index-D0iIn24t.js";import"./tslib.es6-eMSY344_.js";import"./index-uJ2KZHf0.js";import"./createLucideIcon-iWXofaGH.js";import"./x-D2Pel9EU.js";import"./button-ymMXdPy5.js";import"./label-Blk7FhF1.js";import"./card-Bq41eL_q.js";import"./loader-circle-i2ANfqrZ.js";import"./search-B9EA-nRY.js";function ta({open:k,onClose:l,itemTransaction:i}){var p,h;const[j,c]=n.useState(!1),[v,u]=n.useState(!1),[t,r]=n.useState(i);if(n.useEffect(()=>{async function e(){i&&d.get(`/admin/stock-card/${i.id}`).then(({data:m})=>{r(m.data)}).catch(m=>{s({title:"Gagal memuat data transaksi item",description:"Terjadi kesalahan saat memuat data transaksi item.",variant:"destructive"})})}i&&e()},[i]),!t)return null;async function b(e){if(await F({title:"Hapus Transaksi Item",description:"Apakah Anda yakin ingin menghapus transaksi ini?",confirmText:"Hapus",cancelText:"Batal"})){c(!0);try{await d.delete(`/admin/stock-card/${e==null?void 0:e.id}`),l(),s({title:"Transaksi item berhasil dihapus",description:"Transaksi item telah berhasil dihapus."})}catch{s({title:"Gagal menghapus transaksi item",description:"Terjadi kesalahan saat menghapus transaksi item.",variant:"destructive"})}finally{c(!1)}}}async function y(){u(!0);try{await d.put(`/admin/stock-card/${t.id}`,t),l(),s({title:"Transaksi item berhasil disimpan",description:"Transaksi item telah berhasil disimpan."})}catch{s({title:"Gagal menyimpan transaksi item",description:"Terjadi kesalahan saat menyimpan transaksi item.",variant:"destructive"})}finally{u(!1)}}return a.jsxs(a.Fragment,{children:[a.jsx(D,{open:k,onOpenChange:l,children:a.jsxs(w,{className:"sm:max-w-sm",children:[a.jsx(S,{children:a.jsx(T,{children:"Transaksi Item"})}),a.jsx(a.Fragment,{children:a.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[a.jsx(o,{label:"Tanggal",required:!0,children:a.jsx(x,{type:"date",value:t.date||"",onChange:e=>r({...t,date:e.target.value})})}),a.jsx(o,{label:"Gudang",required:!0,children:a.jsx(G,{value:{id:t.warehouse_id,code:(p=t.warehouse)==null?void 0:p.code,name:(h=t.warehouse)==null?void 0:h.name},onChange:e=>r({...t,warehouse_id:e.id||"",warehouse:e})})}),a.jsx(o,{label:"Keterangan",required:!0,children:a.jsx(I,{value:t.notes||"",onChange:e=>r({...t,notes:e.target.value}),rows:5})}),a.jsx(o,{label:"Jumlah",required:!0,children:a.jsx(x,{className:"text-right",type:"number",value:Number(t.quantity),onChange:e=>r({...t,quantity:e.target.value})})})]})}),a.jsxs(q,{children:[f("update-stock-card")?a.jsx(g,{processingLabel:"Menyimpan",label:"Simpan",type:"button",processing:v,onClick:()=>y()}):null,f("delete-stock-card")?a.jsx(g,{processingLabel:"Menghapus",label:"Hapus",variant:"destructive",type:"button",processing:j,onClick:()=>b(t)}):null]})]})}),a.jsx(C,{})]})}export{ta as default};
