import{q as Y,r as I,j as e}from"./app-CQ-G37p-.js";import{S as h}from"./SearchChartOfAccount-0Jd4yGJY.js";import{S as K}from"./SearchDivision-Budjprvk.js";import{F}from"./file-upload-dropzone-CNZ94Fyj.js";import{F as u}from"./form-group-CHZXn8bM.js";import{I as t}from"./input-BXXA-PDa.js";import{M as x}from"./money-input-Bb590VQ4.js";import{S as j,a as v,b as f,c as g,d}from"./select-BSIJzAmS.js";import{T as U}from"./textarea-BvykTLwI.js";import{h as b}from"./moment-C5S46NFB.js";import"./button-ymMXdPy5.js";import"./index-D0iIn24t.js";import"./createLucideIcon-iWXofaGH.js";import"./card-Bq41eL_q.js";import"./badge-CsIJHFj0.js";import"./loader-circle-i2ANfqrZ.js";import"./search-B9EA-nRY.js";import"./x-D2Pel9EU.js";import"./file-text-vhY6aTSF.js";import"./index-Dhyve51-.js";import"./tslib.es6-eMSY344_.js";import"./index-Cu_r977E.js";import"./circle-alert-DNqBTniX.js";import"./circle-check-big-DDOzmUMH.js";import"./eye-DwuHDobg.js";import"./download-o5rqL5cq.js";import"./label-Blk7FhF1.js";import"./index-DqZ46QiR.js";import"./index-B9C1SM0Q.js";import"./index-C7S3ohsj.js";import"./index-B9VoEdXn.js";import"./index-CZ_DqijM.js";import"./chevron-down-BOk5s691.js";function he({data:i,setData:c,errors:a}){var C,q,S,M,P,y,N,k,V;const s=Y().props.assetTypes;return I.useEffect(()=>{const r=b(i.purchase_date),n=Number(i.useful_life_years)||0,o=Number(i.purchase_price)||0;if(i.depreciation_status){let l=0,p=0;if(i.depreciation_method==="straight_line"){const _=o/(n*12);console.log(_);const m=b().diff(r,"month");l=Math.min(_*m,o),p=o-l}else if(i.depreciation_method==="reducing_balance"){p=Number(i.residual_value)??0;const _=1-Math.pow((Number(i.residual_value)||0)/o,1/n*12),m=b().diff(r,"month");l=o*(1-Math.pow(1-_,m)),l=Math.min(l,o)}c({...i,depreciation_start_date:r.add(1,"month").format("YYYY-MM-DD"),depreciated_value:Math.round(l),residual_value:Math.round(p)})}},[i.purchase_date,i.useful_life_years,i.purchase_price,i.depreciation_method]),e.jsxs("div",{className:"grid md:grid-cols-3 gap-x-4  gap-y-4",children:[e.jsx(u,{label:"Divisi",error:a.division_id,required:!0,children:e.jsx(K,{value:{id:i.division_id,name:(C=i.division)==null?void 0:C.name,code:(q=i.division)==null?void 0:q.code},onChange:r=>{c({...i,division_id:r.id,division:r})}})}),e.jsx(u,{label:"Tipe Aset",error:a.asset_type_id,required:!0,children:e.jsxs(j,{value:i.asset_type_id,onValueChange:r=>{const n=s.find(o=>o.id===r);c({...i,asset_type_id:r,accumulated_depreciation_account_id:(n==null?void 0:n.accumulated_depreciation_account_id)||i.accumulated_depreciation_account_id,accumulated_depreciation_account:(n==null?void 0:n.accumulated_depreciation_account)||i.accumulated_depreciation_account,depreciation_expense_account_id:(n==null?void 0:n.depreciation_expense_account_id)||i.depreciation_expense_account_id,depreciation_expense_account:(n==null?void 0:n.depreciation_expense_account)||i.depreciation_expense_account})},children:[e.jsx(v,{children:e.jsx(f,{placeholder:"Pilih Tipe Aset"})}),e.jsx(g,{children:s.map(r=>e.jsx(d,{value:r.id,onClick:()=>{const n=s.find(o=>o.id===r.id);c({...i,asset_type_id:r.id,accumulated_depreciation_account_id:(n==null?void 0:n.accumulated_depreciation_account_id)||i.accumulated_depreciation_account_id,accumulated_depreciation_account:(n==null?void 0:n.accumulated_depreciation_account)||i.accumulated_depreciation_account,depreciation_expense_account_id:(n==null?void 0:n.depreciation_expense_account_id)||i.depreciation_expense_account_id,depreciation_expense_account:(n==null?void 0:n.depreciation_expense_account)||i.depreciation_expense_account})},children:r.name},r.id))})]})}),e.jsx(u,{label:"Kode",error:a.code,required:!0,children:e.jsx(t,{type:"text",value:i.code,disabled:!0,onChange:r=>{c("code",r.target.value)}})}),e.jsx(u,{label:"Nama",error:a.name,required:!0,children:e.jsx(t,{type:"text",value:i.name,onChange:r=>{c("name",r.target.value)}})}),e.jsx(u,{label:"Status Penyusutan",error:a.depreciation_status,required:!0,children:e.jsxs(j,{value:(S=i.depreciation_status)==null?void 0:S.toString(),onValueChange:r=>{c("depreciation_status",r)},children:[e.jsx(v,{children:e.jsx(f,{placeholder:"Pilih Status"})}),e.jsxs(g,{children:[e.jsx(d,{value:"1",children:"Menyusut"}),e.jsx(d,{value:"0",children:"Tidak Menyusut"})]})]})}),e.jsx(u,{label:"Metode Penyusutan",error:a.depreciation_method,required:!0,children:e.jsxs(j,{value:i.depreciation_method,onValueChange:r=>{c("depreciation_method",r)},children:[e.jsx(v,{children:e.jsx(f,{placeholder:"Pilih Status"})}),e.jsxs(g,{children:[e.jsx(d,{value:"straight_line",children:"Garis Lurus"}),e.jsx(d,{value:"reducing_balance",children:"Saldo Menurun"})]})]})}),e.jsx(u,{label:"Tanggal Beli",error:a.purchase_date,required:!0,children:e.jsx(t,{type:"date",value:i.purchase_date,onChange:r=>{c("purchase_date",r.target.value)}})}),e.jsx(u,{label:"Dibeli Dari",error:a.purchase_from,required:!0,children:e.jsx(t,{type:"text",value:i.purchase_from,onChange:r=>{c("purchase_from",r.target.value)}})}),e.jsx(u,{label:"Harga Beli",error:a.purchase_price,required:!0,children:e.jsx(x,{value:i.purchase_price,onValueChange:r=>{c("purchase_price",r)}})}),e.jsx(u,{label:"Kode Perkiraan Aset",error:a.fixed_asset_account_id,required:!0,children:e.jsx(h,{value:{id:i.fixed_asset_account_id,code:(M=i.fixed_asset_account)==null?void 0:M.code,name:(P=i.fixed_asset_account)==null?void 0:P.name},onChange:r=>{c({...i,fixed_asset_account_id:r.id,fixed_asset_account:r})}})}),e.jsx(u,{label:"Kode Perkiraan Akumulasi Penyusutan",error:a.accumulated_depreciation_account_id,required:!0,children:e.jsx(h,{value:{id:i.accumulated_depreciation_account_id,code:(y=i.accumulated_depreciation_account)==null?void 0:y.code,name:(N=i.accumulated_depreciation_account)==null?void 0:N.name},onChange:r=>{c({...i,accumulated_depreciation_account_id:r.id,accumulated_depreciation_account:r})}})}),e.jsx(u,{label:"Kode Perkiraan Beban Penyusutan",error:a.depreciation_expense_account_id,required:!0,children:e.jsx(h,{value:{id:i.depreciation_expense_account_id,code:(k=i.depreciation_expense_account)==null?void 0:k.code,name:(V=i.depreciation_expense_account)==null?void 0:V.name},onChange:r=>{c({...i,depreciation_expense_account_id:r.id,depreciation_expense_account:r})}})}),e.jsx(u,{label:"Tanggal Mulai Penyusutan",error:a.depreciation_start_date,required:!0,children:e.jsx(t,{type:"date",value:i.depreciation_start_date,onChange:r=>{c("depreciation_start_date",r.target.value)}})}),e.jsx(u,{label:"Usia Susut",error:a.useful_life_years,required:!0,children:e.jsx(t,{type:"text",value:i.useful_life_years,onChange:r=>{c("useful_life_years",r.target.value)}})}),e.jsx(u,{label:"Nilai",error:a.residual_value,required:!0,children:e.jsx(x,{value:i.residual_value,onValueChange:r=>{c("residual_value",r)}})}),e.jsx(u,{label:"Akumulasi Susut",error:a.depreciated_value,required:!0,children:e.jsx(x,{type:"text",value:i.depreciated_value,onValueChange:r=>{c("depreciated_value",r)}})}),e.jsx("div",{className:"col-span-3",children:e.jsx(u,{label:"Deskripsi",error:a.description,children:e.jsx(U,{value:i.description,onChange:r=>{c("description",r.target.value)}})})}),e.jsx("div",{className:"col-span-3",children:e.jsx(u,{label:"Gambar",error:a.picture,children:e.jsx(F,{initialFile:i.picture,onChange:r=>{c("picture",r)}})})}),e.jsx("div",{className:"col-span-3",children:e.jsx(u,{label:"File",error:a.file,children:e.jsx(F,{initialFile:i.file,onChange:r=>{c("file",r)}})})})]})}export{he as default};
