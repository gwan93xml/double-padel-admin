import{r as f,j as e,a as oe}from"./app-CQ-G37p-.js";import{A as me}from"./AuthenticatedLayout-X6euxa7E.js";import{T as xe,a as he,b as N,c,d as ue,e as r,f as je}from"./table-BSdxGOLt.js";import{C as o,a as W,b as X,c as Z,d as m}from"./card-Bq41eL_q.js";import{h}from"./moment-C5S46NFB.js";import{C as n}from"./currency-formatter-D5vTOkIG.js";import{B as T}from"./button-ymMXdPy5.js";import{I as ee}from"./input-BXXA-PDa.js";import{B as i}from"./badge-CsIJHFj0.js";import{F as v}from"./form-group-CHZXn8bM.js";import{S as ge}from"./SearchChartOfAccount-0Jd4yGJY.js";import{S as pe}from"./SearchDivision-Budjprvk.js";import{B as y}from"./book-open-C3EiSG93.js";import{F as be}from"./filter-BZN7rDIQ.js";import{S as fe}from"./search-B9EA-nRY.js";import{F as Ne}from"./file-text-vhY6aTSF.js";import{F as ve}from"./file-spreadsheet-Dv5Qp-1R.js";import{a as ye}from"./createLucideIcon-iWXofaGH.js";import{T as ae,a as se}from"./trending-up-BOlMp1Uy.js";import{C as _e}from"./calendar-BV_-Gsoc.js";import"./index-D0iIn24t.js";import"./index-DqZ46QiR.js";import"./index-BHS3gC_j.js";import"./index-B9C1SM0Q.js";import"./tslib.es6-eMSY344_.js";import"./index-uJ2KZHf0.js";import"./x-D2Pel9EU.js";import"./index-C7S3ohsj.js";import"./index-B9VoEdXn.js";import"./can-DARgw7Bo.js";import"./chevron-right-DWL5tPD-.js";import"./use-toast-XJEkqv7A.js";import"./triangle-alert-byTh5Szo.js";import"./label-Blk7FhF1.js";import"./loader-circle-i2ANfqrZ.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=ye("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);function we({}){var C,$,Y,F,S,M,B,A,I,L,P,E,H,K,O;const[s,g]=f.useState({account:{id:"",name:"",code:""},division:{id:"",name:"",code:""},dateFrom:h().format("YYYY-MM-DD"),dateTo:h().add("1","month").format("YYYY-MM-DD")}),[x,re]=f.useState(0),[l,te]=f.useState([]),[p,D]=f.useState(!1);async function ne(){var a,t;D(!0);try{const d=await oe.get("/admin/ledger/list",{params:{account_id:((a=s.account)==null?void 0:a.id)??"",division_id:((t=s.division)==null?void 0:t.id)??"",date_from:s.dateFrom,date_to:s.dateTo}});te(d.data.data.ledgers),re(d.data.data.start_balance)}catch(d){console.error("Error fetching ledger data:",d)}finally{D(!1)}}const _=()=>l.reduce((a,t)=>a+t.debit,0),k=()=>l.reduce((a,t)=>a+t.credit,0),ie=()=>{var a;return l.length>0&&((a=l[l.length-1])==null?void 0:a.balance)||x},b=()=>_()-k(),le=a=>a.transaction_type==="Purchase"?`/admin/purchase/${a.transaction_id}/edit`:a.transaction_type==="Sale"?`/admin/sale/${a.transaction_id}/edit`:a.transaction_type==="CashIn"?`/admin/cash-in/${a.transaction_id}/edit`:a.transaction_type==="CashOut"?`/admin/cash-out/${a.transaction_id}/edit`:a.transaction_type==="CashTransfer"?`/admin/cash-transfer/${a.transaction_id}/edit`:a.transaction_type==="AssetDepreciation"?`/admin/asset-depreciation/${a.transaction_id}/edit`:a.transaction_type==="receivable"?`/admin/receivable/${a.transaction_id}/edit`:a.transaction_type==="debt"?`/admin/debt/${a.transaction_id}/edit`:`/admin/journal/${a.id}/edit`,de=a=>{var t,d,u,j,z,R,G,Q,q,U,J,V;if(a.journal.transaction_type==="Purchase")return`${((d=(t=a.journal)==null?void 0:t.purchase)==null?void 0:d.note)??""}`;if(a.journal.transaction_type==="Sale")return`${((j=(u=a.journal)==null?void 0:u.sale)==null?void 0:j.note)??""}`;if(a.journal.transaction_type==="CashIn"){const w=((z=a.journal.cash_in)==null?void 0:z.received_from)??"";return`${((G=(R=a.journal)==null?void 0:R.cash_in)==null?void 0:G.description)??""} | Diterima Dari ${w}`}else if(a.journal.transaction_type==="CashOut"){const w=((Q=a.journal.cash_out)==null?void 0:Q.paid_to)??"";return`${((U=(q=a.journal)==null?void 0:q.cash_out)==null?void 0:U.description)??""} | Dibayar Kepada ${w}`}else if(a.journal.transaction_type==="CashTransfer")return`${((V=(J=a.journal)==null?void 0:J.cash_transfer)==null?void 0:V.note)??""}`;return a.journal.notes||"-"},ce=a=>{var t,d,u,j;return a.journal.transaction_type=="Purchase"||a.journal.transaction_type=="Purchase_Inventory"?`|  ${((d=(t=a.journal.purchase)==null?void 0:t.vendor)==null?void 0:d.name)??""}`:a.journal.transaction_type=="Sale"||a.journal.transaction_type=="Sale_Inventory"?`|  ${((j=(u=a.journal.sale)==null?void 0:u.customer)==null?void 0:j.name)??""}`:""};return e.jsxs("div",{className:"p-4 md:p-6  min-h-screen",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 rounded-lg ",children:e.jsx(y,{className:"h-6 w-6 "})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold ",children:"Buku Besar"}),e.jsx("p",{className:"",children:"Laporan detail transaksi per akun dengan saldo berjalan"})]})]})}),e.jsxs(o,{className:"mb-6",children:[e.jsxs(W,{className:"bg-gradient-to-r  rounded-t-lg border-b",children:[e.jsxs(X,{className:"flex items-center gap-2",children:[e.jsx(be,{className:"h-5 w-5"}),"Filter Laporan"]}),e.jsx(Z,{className:"",children:"Pilih akun dan periode untuk melihat buku besar"})]}),e.jsxs(m,{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-4 items-end",children:[e.jsx("div",{className:"lg:col-span-4",children:e.jsx(v,{label:"Pilih Akun",required:!0,children:e.jsx(ge,{value:{id:(C=s.account)==null?void 0:C.id,name:($=s.account)==null?void 0:$.name,code:(Y=s.account)==null?void 0:Y.code},onChange:a=>{g({...s,account:a})},clearable:!0})})}),e.jsx("div",{className:"lg:col-span-4",children:e.jsx(v,{label:"Divisi",children:e.jsx(pe,{value:{id:(F=s.division)==null?void 0:F.id,name:(S=s.division)==null?void 0:S.name,code:(M=s.division)==null?void 0:M.code},onChange:a=>{g({...s,division:a})},clearable:!0})})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(v,{label:"Dari Tanggal",children:e.jsx(ee,{type:"date",value:s.dateFrom,onChange:a=>g({...s,dateFrom:a.target.value})})})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(v,{label:"Hingga Tanggal",children:e.jsx(ee,{type:"date",value:s.dateTo,onChange:a=>g({...s,dateTo:a.target.value})})})}),e.jsx("div",{className:"lg:col-span-12 flex justify-end items-end",children:e.jsx("div",{children:e.jsxs(T,{onClick:ne,disabled:p,className:"flex-1 bg-blue-600 hover:bg-blue-700 dark:text-white",children:[p?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):e.jsx(fe,{className:"h-4 w-4 mr-2"}),p?"Loading...":"Tampilkan"]})})})]}),l.length>0&&e.jsxs("div",{className:"flex justify-end gap-2 mt-4 pt-4 border-t",children:[e.jsx(T,{variant:"outline",size:"sm",asChild:!0,className:"bg-red-50 hover:bg-red-100 text-red-700 border-red-200 dark:hover:text-black",children:e.jsxs("a",{href:`/admin/ledger/export/pdf?account_id=${((B=s.account)==null?void 0:B.id)??""}&division_id=${((A=s.division)==null?void 0:A.id)??""}&date_from=${s.dateFrom}&date_to=${s.dateTo}`,target:"_blank",rel:"noreferrer",children:[e.jsx(Ne,{className:"h-4 w-4 mr-2"}),"Export PDF"]})}),e.jsx(T,{variant:"outline",size:"sm",asChild:!0,className:"bg-green-50 hover:bg-green-100 text-green-700 border-green-200 dark:hover:text-black",children:e.jsxs("a",{href:`/admin/ledger/export/excel?account_id=${((I=s.account)==null?void 0:I.id)??""}&division_id=${((L=s.division)==null?void 0:L.id)??""}&date_from=${s.dateFrom}&date_to=${s.dateTo}`,target:"_blank",rel:"noreferrer",children:[e.jsx(ve,{className:"h-4 w-4 mr-2"}),"Export Excel"]})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx(o,{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:e.jsx(m,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-100 text-sm",children:"Saldo Awal"}),e.jsx("p",{className:"text-xl font-bold",children:e.jsx(n,{amount:x})})]}),e.jsx(ke,{className:"h-8 w-8 text-blue-200"})]})})}),e.jsx(o,{className:"bg-gradient-to-r from-green-500 to-green-600 text-white",children:e.jsx(m,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-100 text-sm",children:"Total Debet"}),e.jsx("p",{className:"text-xl font-bold",children:e.jsx(n,{amount:_()})})]}),e.jsx(ae,{className:"h-8 w-8 text-green-200"})]})})}),e.jsx(o,{className:"bg-gradient-to-r from-red-500 to-red-600 text-white",children:e.jsx(m,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-red-100 text-sm",children:"Total Kredit"}),e.jsx("p",{className:"text-xl font-bold",children:e.jsx(n,{amount:k()})})]}),e.jsx(se,{className:"h-8 w-8 text-red-200"})]})})}),e.jsx(o,{className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white",children:e.jsx(m,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-100 text-sm",children:"Saldo Akhir"}),e.jsx("p",{className:"text-xl font-bold",children:e.jsx(n,{amount:ie()})})]}),e.jsx(y,{className:"h-8 w-8 text-purple-200"})]})})})]}),l.length>0&&e.jsxs(o,{className:"shadow-lg ",children:[e.jsx(W,{className:" border-b",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsxs(X,{className:"text-xl  flex items-center gap-2",children:[e.jsx(y,{className:"h-5 w-5"}),"Detail Buku Besar"]}),e.jsxs(Z,{className:"mt-1",children:[(P=s.account)==null?void 0:P.code," - ",(E=s.account)==null?void 0:E.name,((H=s.division)==null?void 0:H.id)&&e.jsxs("span",{children:[" | Divisi: ",(K=s.division)==null?void 0:K.code," - ",(O=s.division)==null?void 0:O.name]})," |"," ",h(s.dateFrom).format("DD/MM/YYYY")," -"," ",h(s.dateTo).format("DD/MM/YYYY")]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-4 md:mt-0",children:[e.jsxs(i,{variant:"outline",className:"",children:[l.length+1," Transaksi"]}),e.jsxs(i,{variant:"outline",className:`${b()>0?"bg-green-50 text-green-700 border-green-200":b()<0?"bg-red-50 text-red-700 border-red-200":"bg-gray-50 text-gray-700 border-gray-200"}`,children:["Net: ",e.jsx(n,{amount:b()})]})]})]})}),e.jsx(m,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(xe,{children:[e.jsx(he,{children:e.jsxs(N,{className:"",children:[e.jsx(c,{className:"w-16 font-semibold ",children:"No"}),e.jsx(c,{className:"font-semibold ",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_e,{className:"h-4 w-4"}),"Tanggal"]})}),e.jsx(c,{className:"font-semibold ",children:"No. Transaksi"}),e.jsx(c,{className:"font-semibold ",children:"Divisi"}),e.jsx(c,{className:"font-semibold ",children:"Keterangan"}),e.jsx(c,{className:"font-semibold ",children:"Catatan"}),e.jsx(c,{className:"text-right font-semibold ",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx(ae,{className:"h-4 w-4 text-green-600"}),"Debet"]})}),e.jsx(c,{className:"text-right font-semibold ",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx(se,{className:"h-4 w-4 text-red-600"}),"Kredit"]})}),e.jsx(c,{className:"text-right font-semibold ",children:"Saldo"})]})}),e.jsxs(ue,{children:[e.jsxs(N,{className:"",children:[e.jsx(r,{className:"font-medium",children:"1"}),e.jsx(r,{className:"font-medium",children:s.dateFrom?h(s.dateFrom).format("DD/MM/YYYY"):""}),e.jsx(r,{className:"font-medium",children:e.jsx(i,{variant:"outline",className:"",children:"Saldo Awal"})}),e.jsx(r,{className:"text-right",children:e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx(r,{className:"text-right",children:e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx(r,{className:"text-right",children:e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx(r,{className:"text-right",children:e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx(r,{className:"text-right",children:e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx(r,{className:"text-right font-bold",children:e.jsx(i,{variant:"outline",className:`${x>0?"bg-green-50 text-green-700 border-green-200":x<0?"bg-red-50 text-red-700 border-red-200":"bg-gray-50 text-gray-700 border-gray-200"}`,children:e.jsx(n,{amount:x})})})]}),l.map((a,t)=>e.jsxs(N,{className:"hover:bg-blue-50/30 transition-colors",children:[e.jsx(r,{className:"font-medium",children:t+2}),e.jsxs(r,{className:"font-medium",children:[h(a.journal.date).format("DD/MM/YYYY")," "]}),e.jsx(r,{className:"font-medium",children:e.jsxs("a",{href:le(a.journal),className:"text-blue-600 hover:underline",target:"_blank",rel:"noopener noreferrer",children:[a.journal.notes," ",ce(a)]})}),e.jsx(r,{className:"font-medium",children:a.journal.division?e.jsx(i,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:a.journal.division.name}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx(r,{className:"font-medium",children:de(a)}),e.jsx(r,{className:"font-medium",children:a.notes??""}),e.jsx(r,{className:"text-right",children:e.jsx(i,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:e.jsx(n,{amount:a.debit})})}),e.jsx(r,{className:"text-right",children:e.jsx(i,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200",children:e.jsx(n,{amount:a.credit})})}),e.jsx(r,{className:"text-right font-medium",children:e.jsx(i,{variant:"outline",className:`${a.balance>0?"bg-blue-50 text-blue-700 border-blue-200":a.balance<0?"bg-red-50 text-red-700 border-red-200":"bg-gray-50 text-gray-700 border-gray-200"}`,children:e.jsx(n,{amount:a.balance})})})]},a.code))]}),e.jsx(je,{children:e.jsxs(N,{className:" border-t-2",children:[e.jsx(r,{colSpan:6,className:"text-right font-bold text-gray-900",children:"Grand Total"}),e.jsx(r,{className:"text-right font-bold",children:e.jsx(i,{variant:"outline",className:"bg-green-100 text-green-800 border-green-200 font-bold",children:e.jsx(n,{amount:_()})})}),e.jsx(r,{className:"text-right font-bold",children:e.jsx(i,{variant:"outline",className:"bg-red-100 text-red-800 border-red-200 font-bold",children:e.jsx(n,{amount:k()})})}),e.jsx(r,{className:"text-right",children:e.jsxs(i,{variant:"outline",className:"bg-purple-100 text-purple-800 border-purple-200 font-bold",children:["Net: ",e.jsx(n,{amount:b()})]})})]})})]})})})]}),l.length===0&&!p&&e.jsx(o,{className:"text-center py-12",children:e.jsx(m,{children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(y,{className:"h-8 w-8 text-gray-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Belum Ada Data"}),e.jsx("p",{className:"text-gray-500",children:'Pilih akun dan klik "Tampilkan" untuk melihat buku besar'})]})]})})})]})}we.layout=s=>e.jsx(me,{breadcrumbs:[{label:"Dashboard",href:"/admin"},{label:"Akuntansi",href:"#"},{label:"Buku Besar",href:"#"}],children:s});export{we as default};
