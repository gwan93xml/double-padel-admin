import{j as e,W as N,r as w,y as S}from"./app-xdIDsNuc.js";import{B as E}from"./index-D9fYs-5N.js";import{C as k,a as I,b as q,c as F,d as T}from"./card-DPe-xeUS.js";import{F as n}from"./form-group-DJppTG6k.js";import{I as g}from"./input-Pb5O0huv.js";import{I as G}from"./ImageUploader-r4l5jz7T.js";import{C as R}from"./CKEditorComponent-Brj_gHGO.js";import{c as f}from"./utils-jM7Hu9J5.js";import{S as D}from"./star-DujE_Tw0.js";import{t as p}from"./use-toast-BOfnQU58.js";import"./label-DxiqzSVl.js";import"./createLucideIcon-D9qBrcbq.js";import"./x-Cp6Dz_ky.js";import"./check-B2a_CU3u.js";const K={sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"};function z({value:l,onChange:c,error:s,disabled:o=!1,size:m="lg"}){return e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(t=>e.jsx("button",{type:"button",disabled:o,onClick:()=>c(t),className:f("transition-all",o&&"opacity-50 cursor-not-allowed"),children:e.jsx(D,{className:f(K[m],t<=l?"fill-yellow-400 text-yellow-400":"text-gray-300")})},t))}),s&&e.jsx("p",{className:"text-sm text-red-500",children:s})]})}function Y({initialData:l={name:"",title:"",content:"",image:"",rating:5},onSubmit:c,submitButtonText:s,successMessage:o,redirectTo:m}){const{data:t,setData:i,clearErrors:v,errors:a,setError:C}=N({...l}),[x,u]=w.useState(!1);async function b(){var r,h,j;v(),u(!0);try{await c(t),p({title:"Sukses",description:o}),S.visit(m)}catch(d){if(((r=d.response)==null?void 0:r.status)===422){const y=d.response.data.errors;C(y)}else p({variant:"destructive",title:"Gagal",description:((j=(h=d.response)==null?void 0:h.data)==null?void 0:j.message)||"Terjadi kesalahan"})}finally{u(!1)}}return e.jsx("div",{className:"p-5",children:e.jsxs(k,{children:[e.jsxs(I,{children:[e.jsx(q,{children:"Form Testimoni"}),e.jsx(F,{children:"Isikan data testimoni dengan benar"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"mb-4",children:e.jsx(n,{label:"Nama",error:a.name,required:!0,children:e.jsx(g,{type:"text",value:t.name,onChange:r=>{i("name",r.target.value)}})})}),e.jsx("div",{className:"mb-4",children:e.jsx(n,{label:"Judul",error:a.title,required:!0,children:e.jsx(g,{type:"text",value:t.title,onChange:r=>{i("title",r.target.value)}})})}),e.jsx("div",{className:"mb-4",children:e.jsx(n,{label:"Konten",error:a.content,required:!0,children:e.jsx(R,{value:t.content||"",onChange:r=>i("content",r),error:a.content,placeholder:"Tulis testimoni di sini..."})})}),e.jsx("div",{className:"mb-4",children:e.jsx(n,{error:a.image,children:e.jsx(G,{initialValue:t.image,onSuccess:r=>{i("image",r)},onError:r=>{p({variant:"destructive",title:"Gagal",description:r})}})})}),e.jsx("div",{className:"mb-4",children:e.jsx(n,{label:"Rating",error:a.rating,required:!0,children:e.jsx(z,{value:t.rating||5,onChange:r=>i("rating",r),error:a.rating})})}),e.jsx(E,{disabled:x,onClick:b,children:x?`${s}...`:s})]})]})})}export{Y as default};
