import{r as o,j as t}from"./app-CQ-G37p-.js";import{D as I,a as C,b as S,c as _,d as F}from"./dialog-CBBIkam9.js";import{B as j}from"./button-ymMXdPy5.js";import{I as q}from"./input-BXXA-PDa.js";import{T as w}from"./textarea-BvykTLwI.js";import{F as l}from"./form-group-CHZXn8bM.js";import{S as K}from"./SearchItem-DGpcvLrN.js";import{S as B}from"./SearchSubUnit-CTrUekdR.js";import"./index-BHS3gC_j.js";import"./index-B9C1SM0Q.js";import"./index-DqZ46QiR.js";import"./index-D0iIn24t.js";import"./tslib.es6-eMSY344_.js";import"./index-uJ2KZHf0.js";import"./createLucideIcon-iWXofaGH.js";import"./x-D2Pel9EU.js";import"./label-Blk7FhF1.js";import"./card-Bq41eL_q.js";import"./badge-CsIJHFj0.js";import"./loader-circle-i2ANfqrZ.js";import"./search-B9EA-nRY.js";import"./package-Cd0mGsRo.js";import"./select-BSIJzAmS.js";import"./index-C7S3ohsj.js";import"./index-B9VoEdXn.js";import"./index-CZ_DqijM.js";import"./chevron-down-BOk5s691.js";function le({show:a,isEdit:p,item:r,errors:c,warehouseOutId:D,onClose:d,onSave:m,onItemChange:R,onQuantityChange:b,onUnitChange:E,onNotesChange:k,onFocusSearchItem:N}){var h,x,g,y,v;const f=o.useRef(null),n=o.useRef(null),i=o.useRef(null),u=o.useRef(null),T=o.useRef(null);return o.useEffect(()=>{a&&setTimeout(()=>{f.current&&f.current.focus()},150)},[a]),o.useEffect(()=>{const e=s=>{s.key==="Enter"&&i.current&&i.current.contains(document.activeElement)&&(s.preventDefault(),u.current&&u.current.focus())};return a&&document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[a]),t.jsx(I,{open:a,onOpenChange:d,children:t.jsxs(C,{className:"max-h-[80vh] overflow-y-auto",children:[t.jsx(S,{children:t.jsx(_,{children:p?"Edit Item":"Tambahkan Item"})}),t.jsx("form",{onSubmit:e=>e.preventDefault(),children:t.jsxs("div",{className:"space-y-4",children:[t.jsx(l,{label:"Item",error:c.item_id,name:"item_id",children:t.jsx(K,{itemCodeRef:f,warehouseId:D,value:{id:r.item_id??"",code:((h=r.item)==null?void 0:h.code)??"",name:((x=r.item)==null?void 0:x.name)??"",purchase_price:String(((g=r.item)==null?void 0:g.purchase_price)??"0"),selling_price:String(((y=r.item)==null?void 0:y.selling_price)??"0"),unit:((v=r.item)==null?void 0:v.unit)??""},onChange:e=>{R(e),setTimeout(()=>{n.current&&(n.current.focus(),n.current.select())},100)},nextRef:n})}),t.jsx(l,{label:"Jumlah",error:c.quantity,name:"quantity",children:t.jsx(q,{ref:n,type:"number",value:r.quantity,className:"text-right",onFocus:e=>{e.target.select()},onChange:e=>b(e.target.value),onKeyDown:e=>{e.key==="Enter"&&(e.preventDefault(),i.current&&setTimeout(()=>{i.current.focus(),i.current.click()},50))}})}),t.jsx(l,{label:"Satuan",error:c.unit,required:!0,children:t.jsx(B,{ref:i,value:r.unit,itemId:r.item_id,onChange:e=>{E(e),setTimeout(()=>{u.current&&u.current.focus()},100)}})}),t.jsx(l,{label:"Catatan",error:c.notes,name:"notes",children:t.jsx(w,{ref:u,value:r.notes,onChange:e=>k(e.target.value),onKeyDown:e=>{e.key==="Enter"&&!e.shiftKey?(e.preventDefault(),m()):e.key==="ArrowUp"&&n.current&&(n.current.focus(),setTimeout(()=>{var s;return(s=n.current)==null?void 0:s.select()},0))},onFocus:e=>{setTimeout(()=>{e.target.setSelectionRange(e.target.value.length,e.target.value.length)},0)}})})]})}),t.jsxs(F,{children:[t.jsx(j,{type:"button",variant:"outline",onClick:d,children:"Batal"}),t.jsx(j,{ref:T,type:"button",onClick:()=>{m()},onKeyDown:e=>{e.key==="Enter"&&(e.preventDefault(),m())},children:p?"Edit":"Tambah"})]})]})})}export{le as default};
