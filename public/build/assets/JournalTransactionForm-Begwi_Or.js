import{r as o,W as N,j as e,a as T}from"./app-CQ-G37p-.js";import{S as w}from"./SearchChartOfAccount-0Jd4yGJY.js";import{B as y}from"./button-ymMXdPy5.js";import{C as R,d as S}from"./card-Bq41eL_q.js";import{F as c}from"./form-group-CHZXn8bM.js";import{I as D}from"./input-BXXA-PDa.js";import{M as E}from"./money-input-Bb590VQ4.js";import{S as A,a as B,b as I,c as K,d as v}from"./select-BSIJzAmS.js";import{t as F}from"./use-toast-XJEkqv7A.js";import{A as M}from"./index-BiiFumPK.js";import{S as V}from"./save-all-B17KMgUV.js";import{a as L}from"./createLucideIcon-iWXofaGH.js";import"./badge-CsIJHFj0.js";import"./loader-circle-i2ANfqrZ.js";import"./search-B9EA-nRY.js";import"./x-D2Pel9EU.js";import"./file-text-vhY6aTSF.js";import"./index-D0iIn24t.js";import"./label-Blk7FhF1.js";import"./index-DqZ46QiR.js";import"./index-B9C1SM0Q.js";import"./tslib.es6-eMSY344_.js";import"./index-C7S3ohsj.js";import"./index-B9VoEdXn.js";import"./index-CZ_DqijM.js";import"./chevron-down-BOk5s691.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=L("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]),J=o.forwardRef(({journalTransaction:d,onReset:O,onSave:k},b)=>{var x,_;const{data:r,setData:n,errors:s,setError:g}=N({transaction_type:"debit",notes:"",amount:0}),i=o.useRef(null),l=o.useRef(null),p=o.useRef(null),f=o.useRef(null),h=o.useRef(null);o.useImperativeHandle(b,()=>({focusTransactionType:()=>{var t;(t=i.current)==null||t.focus()}})),o.useEffect(()=>{n(d)},[d]);async function m(){var t;try{const a=await T.post("/admin/journal/validate",r);k({...r,debit:r.transaction_type==="debit"?r.amount:0,credit:r.transaction_type==="credit"?r.amount:0}),n({transaction_type:"debit",notes:"",amount:0,chart_of_account_id:"",chart_of_account:{id:"",name:"",code:""}}),setTimeout(()=>{var j;(j=i.current)==null||j.focus()},100)}catch(a){a instanceof M?g(((t=a.response)==null?void 0:t.data.errors)||{}):F({variant:"destructive",title:"Gagal",description:"Terjadi saat memasukkan ke list"})}}function C(){n({transaction_type:"debit",notes:"",amount:0,chart_of_account_id:"",chart_of_account:void 0})}const u=(t,a)=>{t.key==="Enter"&&(t.preventDefault(),a!=null&&a.current?a.current.focus():m())};return e.jsx(e.Fragment,{children:e.jsx(R,{children:e.jsxs(S,{className:"pt-8",children:[e.jsxs("div",{className:"flex gap-x-4",children:[e.jsx("div",{className:"w-1/4",children:e.jsx(c,{label:"Tipe Transaksi",error:s.transaction_type,children:e.jsxs(A,{value:r.transaction_type,onValueChange:t=>{n("transaction_type",t),setTimeout(()=>{var a;(a=l.current)==null||a.focus()},100)},children:[e.jsx(B,{ref:i,onKeyDown:t=>u(t,l),children:e.jsx(I,{placeholder:"Pilih Tipe Transaksi"})}),e.jsxs(K,{children:[e.jsx(v,{value:"debit",children:"Debet"}),e.jsx(v,{value:"credit",children:"Kredit"})]})]})})}),e.jsx("div",{className:"w-3/4",children:e.jsx(c,{label:"Akun",error:s.chart_of_account_id,children:e.jsx(w,{accountCodeRef:l,value:{id:r.chart_of_account_id,name:((x=r.chart_of_account)==null?void 0:x.name)||"",code:((_=r.chart_of_account)==null?void 0:_.code)||""},onChange:t=>{var a;n({...r,chart_of_account_id:(a=t.id)==null?void 0:a.toString(),chart_of_account:t})},nextRef:p})})})]}),e.jsx("div",{className:"",children:e.jsx(c,{label:"Catatan",error:s.notes,children:e.jsx(D,{ref:p,type:"text",placeholder:"Masukkan catatan",value:r.notes,onChange:t=>{n("notes",t.target.value)},onKeyDown:t=>u(t,f)})})}),e.jsxs("div",{className:"flex gap-x-4 items-end",children:[e.jsx("div",{className:"w-2/4",children:e.jsx(c,{label:"Nilai",error:s.amount,children:e.jsx(E,{ref:f,type:"text",placeholder:"Nilai",value:r.amount,onValueChange:t=>{n("amount",t)},onKeyDown:t=>u(t,h)})})}),e.jsxs("div",{className:"w-2/4 pb-2",children:[e.jsxs(y,{ref:h,onClick:m,className:"mr-3",onKeyDown:t=>{t.key==="Enter"&&m()},children:["Masuk List",e.jsx(V,{})]}),e.jsxs(y,{variant:"ghost",onClick:C,children:["Reset",e.jsx(G,{})]})]})]})]})})})});J.displayName="JournalTransactionForm";export{J as default};
