import{j as o}from"./app-CQ-G37p-.js";import{A as v}from"./AuthenticatedLayout-X6euxa7E.js";import{R as b}from"./report-list-CoUR2Q-E.js";import{C as n}from"./currency-formatter-D5vTOkIG.js";import{F as d}from"./form-group-CHZXn8bM.js";import{B as y}from"./button-ymMXdPy5.js";import{h as t}from"./moment-C5S46NFB.js";import{D as j}from"./date-filter-BrNgVtk9.js";import{S as D}from"./SearchVendor-DVTa9TJs.js";import{S as f,a as M,b as _,c as C,d as l}from"./select-BSIJzAmS.js";import{D as T}from"./DivisionList-Dge3XhOp.js";import{S as N}from"./search-B9EA-nRY.js";import"./index-D0iIn24t.js";import"./createLucideIcon-iWXofaGH.js";import"./input-BXXA-PDa.js";import"./index-DqZ46QiR.js";import"./index-BHS3gC_j.js";import"./index-B9C1SM0Q.js";import"./tslib.es6-eMSY344_.js";import"./index-uJ2KZHf0.js";import"./x-D2Pel9EU.js";import"./index-C7S3ohsj.js";import"./index-B9VoEdXn.js";import"./can-DARgw7Bo.js";import"./chevron-right-DWL5tPD-.js";import"./use-toast-XJEkqv7A.js";import"./badge-CsIJHFj0.js";import"./triangle-alert-byTh5Szo.js";import"./calendar-BV_-Gsoc.js";import"./table-BSdxGOLt.js";import"./card-Bq41eL_q.js";import"./list-DIayZXqH.js";import"./filter-BZN7rDIQ.js";import"./file-text-vhY6aTSF.js";import"./file-spreadsheet-Dv5Qp-1R.js";import"./label-Blk7FhF1.js";import"./index-Cu_r977E.js";import"./index-D-8iXXsP.js";import"./calendar-days-CaBtbxTM.js";import"./loader-circle-i2ANfqrZ.js";import"./index-CZ_DqijM.js";import"./chevron-down-BOk5s691.js";import"./checkbox-DaA1krf_.js";import"./command-BCd-qebN.js";import"./dialog-CBBIkam9.js";import"./popover-BMGWAYFn.js";function k({payDebts:m,month_query:p,cashOutDetails:F}){const c={monthFrom:t().format("YYYY-MM"),monthTo:t().format("YYYY-MM"),year:t().format("YYYY"),vendor_id:void 0,vendor:void 0,divisions:[],dateType:"year",date:t().format("YYYY-MM-DD"),dateFrom:t().startOf("month").format("YYYY-MM-DD"),dateTo:t().endOf("month").format("YYYY-MM-DD"),month:p??t().format("YYYY-MM"),untilDate:t().format("YYYY-MM-DD"),sort:"VENDOR_NAME"},h=[{header:"NO",key:"no",renderCell:(r,e)=>e+1},{header:"Tanggal",key:"date",renderCell:r=>{var e;return t((e=r.pay_debt_header)==null?void 0:e.date).format("DD/MM/YYYY")}},{header:"Vendor",key:"vendor",renderCell:r=>{var e,a;return((a=(e=r.debt)==null?void 0:e.vendor)==null?void 0:a.name)??"-"},isMerged:!0,mergeKey:"debt.vendor.name"},{header:"Nota",key:"nota",renderCell:r=>{var e;return((e=r.pay_debt_header)==null?void 0:e.number)??"-"}},{header:"No. Invoice",key:"invoice",renderCell:r=>{var e,a;return((a=(e=r.debt)==null?void 0:e.purchase)==null?void 0:a.invoice_number)??"-"}},{header:"Tanggal Beli",key:"invoice",renderCell:r=>{var e,a;return(a=(e=r.debt)==null?void 0:e.purchase)!=null&&a.purchase_date?t(r.debt.purchase.purchase_date).format("DD/MM/YYYY"):"-"}},{header:"Bayar",key:"paid_amount",renderCell:r=>o.jsx(n,{amount:r.paid_amount}),renderFooter:r=>o.jsx(n,{amount:r.reduce((e,a)=>e+a.paid_amount,0)}),align:"right"},{header:"Discount",key:"discount",renderCell:r=>o.jsx(n,{amount:r.discount}),renderFooter:()=>o.jsx(n,{amount:0}),align:"right"},{header:"Total",key:"total",renderCell:r=>o.jsx(n,{amount:r.paid_amount+r.discount}),renderFooter:r=>o.jsx(n,{amount:r.reduce((e,a)=>e+a.paid_amount+a.discount,0)}),align:"right"}],u=(r,e,a)=>o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-4 items-end",children:[o.jsx("div",{className:"lg:col-span-6",children:o.jsx(d,{label:"Vendor",children:o.jsx(D,{value:r.vendor,onChange:i=>e({...r,vendor:i,vendor_id:i.id}),clearable:!0})})}),o.jsx("div",{className:"lg:col-span-6",children:o.jsx(d,{label:"Divisi",children:o.jsx(T,{selectedDivisions:r.divisions,onSelectionChange:i=>{e({...r,divisions:i})}})})}),o.jsx("div",{className:"lg:col-span-6",children:o.jsx(j,{f:r,setF:e})}),o.jsx("div",{className:"lg:col-span-6",children:o.jsx(d,{label:"Urutan",children:o.jsxs(f,{value:r.sort||void 0,onValueChange:i=>{i&&e({...r,sort:i})},children:[o.jsx(M,{children:o.jsx(_,{placeholder:"Pilih opsi..."})}),o.jsxs(C,{children:[o.jsx(l,{value:"VENDOR_NAME",children:"Nama Vendor"}),o.jsx(l,{value:"DATE",children:"Tanggal"})]})]})})}),o.jsx("div",{className:"lg:col-span-12 border-t pt-2 flex justify-end",children:o.jsxs(y,{onClick:a,children:[o.jsx(N,{className:"h-4 w-4 mr-2"})," Tampilkan"]})})]});function s(r,e){let a=`${r}?monthFrom=${e.monthFrom}&monthTo=${e.monthTo}&vendor_id=${e.vendor_id||""}&dateType=${e.dateType||"year"}&year=${e.year||""}&date=${e.date||""}&dateFrom=${e.dateFrom||""}&dateTo=${e.dateTo||""}&untilDate=${e.untilDate||""}`;return e.sort&&(a+=`&sort=${e.sort}`),e.divisions&&e.divisions.length>0&&e.divisions.forEach((i,g)=>{a+=`&divisions[${g}][id]=${i.id}`}),a}function Y(r){return s("/admin/pay-debt-report/export/pdf",r)}function x(r){return s("/admin/pay-debt-report/export/excel",r)}return o.jsx(b,{title:"Laporan Pembayaran Hutang",description:"Daftar pembayaran hutang berdasarkan filter",fetchUrl:"/admin/pay-debt-report/list",exportPdfUrl:Y,exportExcelUrl:x,initialFilters:c,renderFilter:u,columns:h,isMerged:!0})}k.layout=m=>o.jsx(v,{breadcrumbs:[{label:"Dashboard",href:"/admin"},{label:"Laporan",href:"#"},{label:"Laporan Pembayaran Hutang",href:"#"}],children:m});export{k as default};
