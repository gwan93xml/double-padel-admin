import{r as p,j as e,a as g}from"./app-CQ-G37p-.js";import{B as j}from"./button-ymMXdPy5.js";import{C as T}from"./checkbox-DaA1krf_.js";import{C as m}from"./currency-formatter-D5vTOkIG.js";import{D as Y,a as N,b as D,c as M,d as y}from"./dialog-CBBIkam9.js";import{T as E,a as B,b as f,c as n,d as S,e as i}from"./table-BSdxGOLt.js";import{h as x}from"./moment-C5S46NFB.js";import"./index-D0iIn24t.js";import"./createLucideIcon-iWXofaGH.js";import"./index-B9C1SM0Q.js";import"./index-DqZ46QiR.js";import"./tslib.es6-eMSY344_.js";import"./index-CZ_DqijM.js";import"./index-B9VoEdXn.js";import"./index-uJ2KZHf0.js";import"./index-BHS3gC_j.js";import"./x-D2Pel9EU.js";function W({vendor_id:u,formDialog:r,setFormDialog:l,onChange:b,payDebtHeader:h}){const[C,_]=p.useState([]),[o,t]=p.useState([]);p.useEffect(()=>{async function s(){const{data:a}=await g.get(`/admin/debt-report/list?vendor_id=${u}&pay_debt_header_id=${(h==null?void 0:h.id)||"0"}`);_(a.data)}s(),t([])},[u,r.show]);function w(s,a){t(s?[...o,a]:o.filter(c=>c.id!=a.id))}function k(){b(o),l({...r,show:!1}),t([])}function v(s){s.purchase?window.open(`/admin/purchase/${s.purchase.id}/edit`,"_blank"):s.purchase_deposit&&window.open(`/admin/purchase-deposit/${s.purchase_deposit.id}/edit`,"_blank")}return e.jsx(e.Fragment,{children:e.jsx(Y,{open:r.show,onOpenChange:()=>l({...r,show:!1}),children:e.jsxs(N,{className:"min-w-[70%] ",children:[e.jsx(D,{children:e.jsx(M,{children:r.isEdit?"Edit Item":"Tambahkan item"})}),e.jsx("div",{className:" max-h-[70vh] overflow-y-auto",children:e.jsxs(E,{children:[e.jsx(B,{children:e.jsxs(f,{children:[e.jsx(n,{}),e.jsx(n,{children:"Tipe"}),e.jsx(n,{children:"Nomor"}),e.jsx(n,{children:"Tanggal"}),e.jsx(n,{children:"Sisa Hutang"}),e.jsx(n,{children:"Nama Vendor"}),e.jsx(n,{children:"Divisi"})]})}),e.jsx(S,{children:C.map(s=>{var a,c;return e.jsxs(f,{className:"cursor-pointer hover:bg-secondary",onClick:()=>v(s),children:[e.jsx(i,{children:e.jsx(T,{onClick:d=>d.stopPropagation(),onCheckedChange:d=>{w(d,s)},checked:o.map(d=>d.id).includes(s.id)})}),e.jsx(i,{children:s.purchase_deposit?"DP":"CR"}),e.jsxs(i,{children:[s.invoice_number,s.purchase_deposit?(a=s.purchase_deposit)==null?void 0:a.number:""]}),e.jsx(i,{children:s.date?e.jsx(e.Fragment,{children:s.date?x(s.date).format("DD/MM/YYYY"):""}):e.jsxs(e.Fragment,{children:[s.purchase?x(s.purchase.purchase_date).format("DD/MM/YYYY"):"",s.purchase_deposit?x(s.purchase_deposit.date).format("DD/MM/YYYY"):""]})}),e.jsx(i,{children:e.jsx(m,{amount:s.remaining_amount})}),e.jsx(i,{children:s.vendor.name}),e.jsx(i,{children:(c=s.division)==null?void 0:c.name})]},s.id)})})]})}),e.jsx(y,{children:e.jsxs("div",{className:"flex justify-between items-center w-full",children:[e.jsxs("div",{className:"font-bold text-lg font-mono",children:[e.jsx("div",{children:"Total Dipilih"}),e.jsx(m,{amount:o.reduce((s,a)=>s+Number(a.remaining_amount),0)})]}),e.jsxs("div",{children:[e.jsx(j,{type:"button",variant:"outline",onClick:()=>{l({...r,show:!1})},children:"Batal"}),e.jsx(j,{type:"button",onClick:k,children:"Tambah"})]})]})})]})})})}export{W as default};
