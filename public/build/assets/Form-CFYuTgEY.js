import{W as N,r as g,j as e,y as T}from"./app-xdIDsNuc.js";import{B as F}from"./index-D9fYs-5N.js";import{C as I,a as J,b as P,c as V,d as $}from"./card-DPe-xeUS.js";import{F as u}from"./form-group-DJppTG6k.js";import{I as a}from"./input-Pb5O0huv.js";import{S as v,a as _,b as f,c as S,d as n}from"./select-CnbTIwKL.js";import{t as b}from"./use-toast-BOfnQU58.js";import"./utils-jM7Hu9J5.js";import"./label-DxiqzSVl.js";import"./index-CltWYr8P.js";import"./index-4rFdga_w.js";import"./index-Dy_V4ZJ5.js";import"./index-CCSo0cdO.js";import"./index-DY1xKekZ.js";import"./createLucideIcon-D9qBrcbq.js";import"./check-B2a_CU3u.js";function re({initialData:r,courts:C,users:G,onSubmit:i,submitButtonText:p,successMessage:y,redirectTo:H}){var x;const{data:t,setData:d,clearErrors:q,errors:c,setError:k}=N({id:(r==null?void 0:r.id)||"",court_id:(r==null?void 0:r.court_id)||"",user_id:(r==null?void 0:r.user_id)||"",date:(r==null?void 0:r.date)||"",start_time:(r==null?void 0:r.start_time)||"",end_time:(r==null?void 0:r.end_time)||"",price:(r==null?void 0:r.price)||"",status:(r==null?void 0:r.status)||"available"}),[h,j]=g.useState(!1);async function w(){var s,m,o;q(),j(!0);try{await i(t),b({title:"Sukses",description:y}),T.visit(H)}catch(l){if(((s=l.response)==null?void 0:s.status)===422){const E=l.response.data.errors;k(E)}else b({variant:"destructive",title:"Gagal",description:((o=(m=l.response)==null?void 0:m.data)==null?void 0:o.message)||"Terjadi kesalahan"})}finally{j(!1)}}return g.useEffect(()=>{if(t.start_time){const[s]=t.start_time.split(":").map(Number),m=`${String(s).padStart(2,"0")}:00`,o=new Date;o.setHours(s,0),o.setHours(o.getHours()+1);const l=String(o.getHours()).padStart(2,"0");d({...t,start_time:m,end_time:`${l}:00`})}},[t.start_time]),e.jsx("div",{className:"p-5",children:e.jsxs(I,{children:[e.jsxs(J,{children:[e.jsx(P,{children:"Form Jadwal Lapangan"}),e.jsx(V,{children:"Isikan data jadwal lapangan dengan benar"})]}),e.jsxs($,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(u,{label:"Lapangan",error:c.court_id,required:!0,children:e.jsxs(v,{value:((x=t.court_id)==null?void 0:x.toString())||"",onValueChange:s=>d("court_id",s),children:[e.jsx(_,{children:e.jsx(f,{placeholder:"Pilih lapangan"})}),e.jsx(S,{children:C.map(s=>e.jsxs(n,{value:s.id.toString(),children:[s.venue.name," - ",s.name]},s.id))})]})}),e.jsx(u,{label:"Tanggal",error:c.date,required:!0,children:e.jsx(a,{type:"date",value:t.date||"",onChange:s=>d("date",s.target.value)})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(u,{label:"Jam Mulai",error:c.start_time,required:!0,children:e.jsx(a,{type:"time",value:t.start_time||"",onChange:s=>d("start_time",s.target.value)})}),e.jsx(u,{label:"Jam Selesai",error:c.end_time,required:!0,children:e.jsx(a,{type:"time",value:t.end_time||"",onChange:s=>d("end_time",s.target.value)})})]}),e.jsx(u,{label:"Harga",error:c.price,required:!0,children:e.jsx(a,{type:"number",value:t.price||"",onChange:s=>d("price",s.target.value),min:"0"})}),e.jsx(u,{label:"Status",error:c.status,required:!0,children:e.jsxs(v,{value:t.status||"available",onValueChange:s=>d("status",s),children:[e.jsx(_,{children:e.jsx(f,{placeholder:"Pilih status"})}),e.jsxs(S,{children:[e.jsx(n,{value:"available",children:"Tersedia"}),e.jsx(n,{value:"booked",children:"Dipesan"}),e.jsx(n,{value:"closed",children:"Ditutup"})]})]})})]}),e.jsx(F,{disabled:h,onClick:w,className:"mt-6 w-full",children:h?`${p}...`:p})]})]})})}export{re as default};
