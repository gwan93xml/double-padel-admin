import{W as J,r as j,j as e,y as L}from"./app-xdIDsNuc.js";import{B as p}from"./index-D9fYs-5N.js";import{F as n}from"./form-group-DJppTG6k.js";import{I as c}from"./input-Pb5O0huv.js";import{I as _}from"./ImageUploader-r4l5jz7T.js";import{T as A,a as M,b as v,c as b}from"./tabs-Be33VXZ5.js";import{t as u}from"./use-toast-BOfnQU58.js";import{T as w}from"./textarea-CBlx0qbf.js";import{P as F}from"./plus-g40r8l_n.js";import{T as P}from"./trash-2-DreEqKRe.js";import"./utils-jM7Hu9J5.js";import"./label-DxiqzSVl.js";import"./createLucideIcon-D9qBrcbq.js";import"./x-Cp6Dz_ky.js";import"./check-B2a_CU3u.js";import"./index-CltWYr8P.js";import"./index-OwxvCaeV.js";import"./index-4rFdga_w.js";import"./index-CZTB0vk4.js";function me({initialData:T={slug:"",name:"",description:"",province:"",city:"",address:"",latitude:0,longitude:0,min_price:null,max_price:null,average_rating:null},initialFacilities:S=[],initialPhotos:q=[],onSubmit:D,submitButtonText:f,successMessage:E,redirectTo:I}){const{data:l,setData:i,clearErrors:H,errors:o,setError:G}=J({...T}),[y,N]=j.useState(!1),[m,h]=j.useState(S),[d,g]=j.useState(q);async function z(){var a,s,r;H(),N(!0);try{const t={...l,facilities:m,photos:d};await D(t),u({title:"Sukses",description:E}),L.visit(I)}catch(t){if(((a=t.response)==null?void 0:a.status)===422){const x=t.response.data.errors;G(x)}else u({variant:"destructive",title:"Gagal",description:((r=(s=t.response)==null?void 0:s.data)==null?void 0:r.message)||"Terjadi kesalahan"})}finally{N(!1)}}const K=()=>{h([...m,{name:"",icon:""}])},R=a=>{h(m.filter((s,r)=>r!==a))},k=(a,s,r)=>{const t=[...m];t[a]={...t[a],[s]:r},h(t)},V=()=>{g([...d,{file:"",is_primary:d.length===0}])},B=a=>{const s=d.filter((r,t)=>t!==a);d[a].is_primary&&s.length>0&&(s[0].is_primary=!0),g(s)},C=(a,s,r)=>{const t=[...d];s==="is_primary"&&r&&t.forEach(x=>x.is_primary=!1),t[a]={...t[a],[s]:r},g(t)};return e.jsxs("div",{className:"p-5",children:[e.jsxs(A,{defaultValue:"basic",className:"w-full",children:[e.jsxs(M,{className:"grid w-full grid-cols-3",children:[e.jsx(v,{value:"basic",children:"Informasi Dasar"}),e.jsx(v,{value:"photos",children:"Photo"}),e.jsx(v,{value:"facilities",children:"Fasilitas"})]}),e.jsx(b,{value:"basic",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-x-4 gap-y-4",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(n,{label:"Nama",error:o.name,required:!0,children:e.jsx(c,{type:"text",value:l.name,onChange:a=>{i("name",a.target.value)},placeholder:"Nama venue"})})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(n,{label:"Deskripsi",error:o.description,required:!0,children:e.jsx(w,{value:l.description,onChange:a=>{i("description",a.target.value)},placeholder:"Deskripsi venue",rows:4})})}),e.jsx(n,{label:"Provinsi",error:o.province,required:!0,children:e.jsx(c,{type:"text",value:l.province,onChange:a=>{i("province",a.target.value)},placeholder:"Contoh: Jakarta"})}),e.jsx(n,{label:"Kota/Kabupaten",error:o.city,required:!0,children:e.jsx(c,{type:"text",value:l.city,onChange:a=>{i("city",a.target.value)},placeholder:"Contoh: Jakarta Selatan"})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(n,{label:"Alamat",error:o.address,required:!0,children:e.jsx(w,{value:l.address,onChange:a=>{i("address",a.target.value)},placeholder:"Alamat lengkap venue",rows:3})})}),e.jsx(n,{label:"Latitude",error:o.latitude,required:!0,children:e.jsx(c,{type:"number",step:"0.00000001",value:l.latitude,onChange:a=>{i("latitude",parseFloat(a.target.value))},placeholder:"Contoh: -6.27511"})}),e.jsx(n,{label:"Longitude",error:o.longitude,required:!0,children:e.jsx(c,{type:"number",step:"0.00000001",value:l.longitude,onChange:a=>{i("longitude",parseFloat(a.target.value))},placeholder:"Contoh: 106.79313"})}),e.jsx(n,{label:"Harga Minimum",error:o.min_price,children:e.jsx(c,{type:"number",step:"0.01",value:l.min_price??"",onChange:a=>{i("min_price",a.target.value?parseFloat(a.target.value):null)},placeholder:"Harga minimum (opsional)"})}),e.jsx(n,{label:"Harga Maksimum",error:o.max_price,children:e.jsx(c,{type:"number",step:"0.01",value:l.max_price??"",onChange:a=>{i("max_price",a.target.value?parseFloat(a.target.value):null)},placeholder:"Harga maksimum (opsional)"})}),e.jsx(n,{label:"Rating Rata-rata",error:o.average_rating,children:e.jsx(c,{type:"number",step:"0.01",min:"0",max:"5",value:l.average_rating??"",onChange:a=>{i("average_rating",a.target.value?parseFloat(a.target.value):null)},placeholder:"Rating 0-5 (opsional)"})})]})}),e.jsx(b,{value:"photos",className:"space-y-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Daftar Photo"}),e.jsxs(p,{size:"sm",onClick:V,type:"button",children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),"Tambah Photo"]})]}),d.length===0?e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:e.jsx("p",{className:"text-gray-500",children:"Belum ada photo. Klik tombol di atas untuk menambahkan."})}):e.jsx("div",{className:"space-y-3",children:d.map((a,s)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 space-y-3",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Photo"}),e.jsx(_,{label:"",initialValue:a.file,onSuccess:r=>{C(s,"file",r),u({title:"Sukses",description:"Photo berhasil diunggah"})},onError:r=>{u({variant:"destructive",title:"Gagal",description:r})}})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.is_primary,onChange:r=>C(s,"is_primary",r.target.checked),className:"w-4 h-4 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Jadikan Photo Utama"})]}),e.jsxs(p,{size:"sm",variant:"destructive",onClick:()=>B(s),type:"button",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"Hapus"]})]})]},s))})]})}),e.jsx(b,{value:"facilities",className:"space-y-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Daftar Fasilitas"}),e.jsxs(p,{size:"sm",onClick:K,type:"button",children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),"Tambah Fasilitas"]})]}),m.length===0?e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:e.jsx("p",{className:"text-gray-500",children:"Belum ada fasilitas. Klik tombol di atas untuk menambahkan."})}):e.jsx("div",{className:"space-y-3",children:m.map((a,s)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Nama Fasilitas"}),e.jsx(c,{type:"text",value:a.name,onChange:r=>k(s,"name",r.target.value),placeholder:"Contoh: WiFi, Parkir, Toilet"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Icon/Gambar"}),e.jsx(_,{label:"",initialValue:a.icon,onSuccess:r=>{k(s,"icon",r),u({title:"Sukses",description:"Icon berhasil diunggah"})},onError:r=>{u({variant:"destructive",title:"Gagal",description:r})}})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(p,{size:"sm",variant:"destructive",onClick:()=>R(s),type:"button",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"Hapus"]})})]},s))})]})})]}),e.jsx("div",{className:"mt-6",children:e.jsx(p,{disabled:y,onClick:z,className:"w-full lg:w-auto",children:y?`${f}...`:f})})]})}export{me as default};
