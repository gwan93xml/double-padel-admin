import{j as a}from"./app-CQ-G37p-.js";import{h as o}from"./moment-C5S46NFB.js";import{R as v}from"./report-list-CoUR2Q-E.js";import{B as d}from"./button-ymMXdPy5.js";import{F as l}from"./form-group-CHZXn8bM.js";import{C as n}from"./currency-formatter-D5vTOkIG.js";import{A as g}from"./AuthenticatedLayout-X6euxa7E.js";import{D as j}from"./date-filter-BrNgVtk9.js";import{S as Y}from"./SearchVendor-DVTa9TJs.js";import{D}from"./DivisionList-Dge3XhOp.js";import{S as b,a as f,b as y,c as _,d as p}from"./select-BSIJzAmS.js";import{S as N}from"./search-B9EA-nRY.js";import"./table-BSdxGOLt.js";import"./createLucideIcon-iWXofaGH.js";import"./card-Bq41eL_q.js";import"./list-DIayZXqH.js";import"./filter-BZN7rDIQ.js";import"./file-text-vhY6aTSF.js";import"./file-spreadsheet-Dv5Qp-1R.js";import"./index-D0iIn24t.js";import"./label-Blk7FhF1.js";import"./index-DqZ46QiR.js";import"./input-BXXA-PDa.js";import"./index-BHS3gC_j.js";import"./index-B9C1SM0Q.js";import"./tslib.es6-eMSY344_.js";import"./index-uJ2KZHf0.js";import"./x-D2Pel9EU.js";import"./index-C7S3ohsj.js";import"./index-B9VoEdXn.js";import"./can-DARgw7Bo.js";import"./chevron-right-DWL5tPD-.js";import"./use-toast-XJEkqv7A.js";import"./badge-CsIJHFj0.js";import"./triangle-alert-byTh5Szo.js";import"./calendar-BV_-Gsoc.js";import"./index-Cu_r977E.js";import"./index-D-8iXXsP.js";import"./calendar-days-CaBtbxTM.js";import"./loader-circle-i2ANfqrZ.js";import"./checkbox-DaA1krf_.js";import"./index-CZ_DqijM.js";import"./command-BCd-qebN.js";import"./dialog-CBBIkam9.js";import"./popover-BMGWAYFn.js";import"./chevron-down-BOk5s691.js";function M(){const s={monthFrom:o().format("YYYY-MM"),monthTo:o().format("YYYY-MM"),year:o().format("YYYY"),vendor_id:void 0,vendor:void 0,dateType:"year",date:o().format("YYYY-MM-DD"),dateFrom:o().startOf("month").format("YYYY-MM-DD"),dateTo:o().endOf("month").format("YYYY-MM-DD"),status:"all",untilDate:o().format("YYYY-MM-DD"),divisions:[],sort:"VENDOR_NAME"},u=[{header:"No",key:"no",renderCell:(e,r)=>r+1},{header:"Division",key:"code",renderCell:e=>{var r;return((r=e.division)==null?void 0:r.name)??"-"}},{header:"Nomor Invoice",key:"code",renderCell:e=>e.invoice_number??"-"},{header:"Nama",key:"name",renderCell:e=>{var r;return((r=e.vendor)==null?void 0:r.name)??"-"},isMerged:!0,mergeKey:"vendor.name"},{header:"Tanggal",key:"date",renderCell:e=>a.jsx("div",{className:"",children:o(e.date).format("DD/MM/YYYY")})},{header:"Jatuh Tempo",key:"due_date",renderCell:e=>e.due_date?o(e.due_date).format("DD/MM/YYYY"):"-"},{header:"Total Hutang",key:"amount",renderCell:e=>a.jsx(n,{amount:Number(e.amount)}),renderFooter:e=>a.jsx(n,{amount:e.reduce((r,t)=>r+parseFloat(String(t.amount)),0)})},{header:"Dibayar",key:"paid_amount_filtered",renderCell:e=>a.jsx(n,{amount:Number(e.paid_amount_filtered)}),renderFooter:e=>a.jsx(n,{amount:e.reduce((r,t)=>r+parseFloat(String(t.paid_amount_filtered)),0)})},{header:"Sisa Hutang",key:"remaining_amount_filtered",renderCell:e=>a.jsx(n,{amount:Number(e.remaining_amount_filtered)}),renderFooter:e=>a.jsx(n,{amount:e.reduce((r,t)=>r+parseFloat(String(t.remaining_amount_filtered)),0)})}];function m(e,r){let t=`${e}?monthFrom=${r.monthFrom}&monthTo=${r.monthTo}&vendor_id=${r.vendor_id||""}&dateType=${r.dateType||"year"}&year=${r.year||""}&date=${r.date||""}&dateFrom=${r.dateFrom||""}&dateTo=${r.dateTo||""}&untilDate=${r.untilDate||""}&status=${r.status||"all"}`;return r.sort&&(t+=`&sort=${r.sort}`),r.divisions&&r.divisions.length>0&&r.divisions.forEach((i,x)=>{t+=`&divisions[${x}][id]=${i.id}`}),t}function c(e){return m("/admin/debt-report/export/pdf",e)}function h(e){return m("/admin/debt-report/export/excel",e)}return a.jsx(v,{title:"Laporan Hutang",description:"Daftar hutang berdasarkan filter waktu, vendor, dan divisi",fetchUrl:"/admin/debt-report/list",exportPdfUrl:c,exportExcelUrl:h,initialFilters:s,renderFilter:(e,r,t)=>a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-4 items-end",children:[a.jsx("div",{className:"lg:col-span-6",children:a.jsx(l,{label:"Status Pembayaran",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx(d,{size:"sm",variant:e.status==="all"?"default":"outline",onClick:()=>r({...e,status:"all"}),children:"Semua"}),a.jsx(d,{size:"sm",variant:e.status==="unpaid"?"default":"outline",onClick:()=>r({...e,status:"unpaid"}),children:"Belum Dibayar"}),a.jsx(d,{size:"sm",variant:e.status==="paid"?"default":"outline",onClick:()=>r({...e,status:"paid"}),children:"Sudah Dibayar"})]})})}),a.jsx("div",{className:"lg:col-span-6",children:a.jsx(l,{label:"Divisi",children:a.jsx(D,{selectedDivisions:e.divisions,onSelectionChange:i=>{r({...e,divisions:i})}})})}),a.jsx("div",{className:"lg:col-span-6",children:a.jsx(l,{label:"Vendor",children:a.jsx(Y,{value:e.vendor,onChange:i=>r({...e,vendor:i,vendor_id:i.id}),clearable:!0})})}),a.jsx("div",{className:"lg:col-span-6",children:a.jsx(j,{f:e,setF:r})}),a.jsx("div",{className:"lg:col-span-2",children:a.jsx(l,{label:"Urutan",children:a.jsxs(b,{value:e.sort||void 0,onValueChange:i=>{i&&r({...e,sort:i})},children:[a.jsx(f,{children:a.jsx(y,{placeholder:"Pilih opsi..."})}),a.jsxs(_,{children:[a.jsx(p,{value:"VENDOR_NAME",children:"Nama Vendor"}),a.jsx(p,{value:"DATE",children:"Tanggal"})]})]})})}),a.jsx("div",{className:"lg:col-span-12 flex justify-end gap-2 mt-4 border-t pt-2",children:a.jsxs(d,{onClick:t,children:[a.jsx(N,{className:"h-4 w-4 mr-2"})," Tampilkan"]})})]}),columns:u,isMerged:!0})}M.layout=s=>a.jsx(g,{breadcrumbs:[{label:"Dashboard",href:"/admin/"},{label:"Laporan",href:"#"},{label:"Hutang",href:"#"}],children:s});export{M as default};
