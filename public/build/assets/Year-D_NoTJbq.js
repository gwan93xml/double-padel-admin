import{q as D,r as M,j as e,y as d}from"./app-xdIDsNuc.js";import{A as C}from"./AuthenticatedLayout-DtjjUv9R.js";import{B as x}from"./index-D9fYs-5N.js";import{C as L,a as P,b as R,d as T}from"./card-DPe-xeUS.js";import{S as J,a as _,b as F,c as U,d as A}from"./select-CnbTIwKL.js";import{C as B}from"./chevron-left-BAjotGkp.js";import{C as O}from"./moment-DPfounic.js";import"./utils-jM7Hu9J5.js";import"./input-Pb5O0huv.js";import"./badge-ZAY5fO7e.js";import"./createLucideIcon-D9qBrcbq.js";import"./index-CltWYr8P.js";import"./index-4rFdga_w.js";import"./index-Dy_V4ZJ5.js";import"./index-CCSo0cdO.js";import"./index-CZTB0vk4.js";import"./x-Cp6Dz_ky.js";import"./index-OwxvCaeV.js";import"./check-B2a_CU3u.js";import"./star-DujE_Tw0.js";import"./use-toast-BOfnQU58.js";import"./index-DY1xKekZ.js";const g=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"];function q({courts:m,monthlySchedules:z,selectedCourtId:i,currentYear:l,schedules:c=[]}){D().props;const b=M.useMemo(()=>{const a={};return c==null||c.forEach(t=>{const s=t.date.split(" ")[0];a[s]||(a[s]={available:0,booked:0,closed:0,total:0}),a[s].total++;const o=t.status;(o==="available"||o==="booked"||o==="closed")&&a[s][o]++}),a},[c]),u=(a,t)=>new Date(a,t,0).getDate(),f=(a,t)=>new Date(a,t-1,1).getDay(),j=(a,t)=>{const s=`${l}-${String(t).padStart(2,"0")}-${String(a).padStart(2,"0")}`;return b[s]||{available:0,booked:0,closed:0,total:0}},S=(a,t,s,o)=>o===0?"border ":s>0?"bg-red-50 dark:bg-red-900/30":t>0?"bg-yellow-50 dark:bg-yellow-900/30":"bg-green-50 dark:bg-green-900/30",v=()=>{const a=new URLSearchParams;i&&a.append("court_id",i.toString()),a.append("year",(l-1).toString()),d.visit(`/court-schedule/year?${a.toString()}`)},y=()=>{const a=new URLSearchParams;i&&a.append("court_id",i.toString()),a.append("year",(l+1).toString()),d.visit(`/court-schedule/year?${a.toString()}`)},N=a=>{const t=new URLSearchParams;a&&t.append("court_id",a),t.append("year",l.toString()),d.visit(`/court-schedule/year?${t.toString()}`)},w=(a,t)=>{const s=new URLSearchParams;i&&s.append("court_id",i.toString()),s.append("month",t.toString()),s.append("year",l.toString()),d.visit(`/court-schedule/calendar?${s.toString()}`)},k=a=>{const t=u(l,a),s=f(l,a),o=s===0?6:s-1,h=[];for(let n=0;n<o;n++)h.push(null);for(let n=1;n<=t;n++)h.push(n);return e.jsxs("div",{className:"border rounded-lg p-3 ",children:[e.jsx("h3",{className:"font-semibold text-sm mb-2 text-center",children:g[a-1]}),e.jsx("div",{className:"grid grid-cols-7 gap-0.5 mb-1",children:["S","M","T","W","T","F","S"].map((n,p)=>e.jsx("div",{className:"text-xs font-semibold text-center text-gray-600 py-1",children:["Sen","Sel","Rab","Kam","Jum","Sab","Min"][p]},p))}),e.jsx("div",{className:"grid grid-cols-7 gap-0.5",children:h.map((n,p)=>{if(n===null)return e.jsx("div",{className:"aspect-square  rounded text-xs"},`empty-${p}`);const r=j(n,a),$=S(r.available,r.booked,r.closed,r.total);return e.jsx("div",{className:`aspect-square rounded text-xs p-0.5 cursor-pointer transition-all hover:ring-2 hover:ring-blue-400 ${$}`,onClick:()=>w(n,a),title:`${g[a-1]} ${n}: ${r.total} jadwal (${r.available} tersedia, ${r.booked} dipesan, ${r.closed} ditutup)`,children:e.jsxs("div",{className:"h-full flex flex-col justify-between",children:[e.jsx("span",{className:"font-semibold ",children:n}),r.total>0&&e.jsxs("div",{className:"text-xs space-y-0.5",children:[r.available>0&&e.jsx("div",{className:"bg-green-300 text-green-800 rounded px-0.5 text-xs font-bold",children:r.available}),r.booked>0&&e.jsx("div",{className:"bg-yellow-300 text-yellow-800 rounded px-0.5 text-xs font-bold",children:r.booked}),r.closed>0&&e.jsx("div",{className:"bg-red-300 text-red-800 rounded px-0.5 text-xs font-bold",children:r.closed})]})]})},n)})})]},a)};return e.jsx("div",{className:"p-5 space-y-4",children:e.jsxs(L,{children:[e.jsx(P,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(R,{children:"Jadwal Lapangan - Tahunan"}),e.jsx(x,{size:"sm",variant:"outline",onClick:()=>{const a=new URLSearchParams;i&&a.append("court_id",i.toString()),a.append("month",(new Date().getMonth()+1).toString()),a.append("year",l.toString()),d.visit(`/court-schedule/calendar?${a.toString()}`)},children:"Bulanan"})]}),e.jsx("div",{className:"w-64",children:e.jsxs(J,{value:(i==null?void 0:i.toString())||"",onValueChange:N,children:[e.jsx(_,{children:e.jsx(F,{placeholder:"Pilih lapangan"})}),e.jsx(U,{children:m.map(a=>e.jsxs(A,{value:a.id.toString(),children:[a.venue.name," - ",a.name]},a.id))})]})})]})}),e.jsx(T,{className:"space-y-6",children:i?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx(x,{variant:"outline",size:"sm",onClick:v,children:e.jsx(B,{className:"w-4 h-4"})}),e.jsx("h2",{className:"text-2xl font-semibold",children:l}),e.jsx(x,{variant:"outline",size:"sm",onClick:y,children:e.jsx(O,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:g.map((a,t)=>k(t+1))})]}):e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"Pilih lapangan untuk melihat jadwal tahunan"})})})]})})}q.layout=m=>e.jsx(C,{breadcrumbs:[{label:"Dashboard",href:"/"},{label:"Master Data",href:"#"},{label:"Jadwal Lapangan",href:"/court-schedule"},{label:"Tahunan",href:"#"}],children:m});export{q as default};
