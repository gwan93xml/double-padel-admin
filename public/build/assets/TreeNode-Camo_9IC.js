import{r as d,j as e}from"./app-CQ-G37p-.js";import{D as j,f as g,a as b,b as v,c as k}from"./dialog-CBBIkam9.js";import{B as c}from"./button-ymMXdPy5.js";import N from"./AccountForm-Ko5kIEWr.js";import{c as l}from"./can-DARgw7Bo.js";import{C as S}from"./chevron-down-BOk5s691.js";import{C as T}from"./chevron-right-DWL5tPD-.js";import{F as A}from"./file-text-vhY6aTSF.js";import{P as D}from"./plus-gEoqNGty.js";import{S as O}from"./square-pen-Pz9x-bS-.js";import{T as F}from"./trash-2-CvcuuDsN.js";import"./index-BHS3gC_j.js";import"./index-B9C1SM0Q.js";import"./index-DqZ46QiR.js";import"./index-D0iIn24t.js";import"./tslib.es6-eMSY344_.js";import"./index-uJ2KZHf0.js";import"./createLucideIcon-iWXofaGH.js";import"./x-D2Pel9EU.js";import"./input-BXXA-PDa.js";import"./index-BiiFumPK.js";import"./form-group-CHZXn8bM.js";import"./label-Blk7FhF1.js";import"./use-toast-XJEkqv7A.js";function z({node:a,level:i=0,onAdd:h,onEdit:p,onDelete:n,openIds:s,setOpenIds:o}){const[t,x]=d.useState(!!(s!=null&&s.has(a.id))),[C,f]=d.useState(!1),[y,u]=d.useState(!1),m=Array.isArray(a.children)&&a.children.length>0,w=()=>{h()},_=()=>{p()};return e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"relative bg-white dark:bg-black",children:[e.jsxs("div",{style:{paddingLeft:i*16,zIndex:i==0?1:i*-1+10},className:`sticky top-0 flex items-center p-2 border-b bg-white dark:bg-black hover:bg-gray-50 ${a.deleted_at?"!bg-red-200":""}`,children:[e.jsxs("div",{className:"flex-1 flex items-center cursor-pointer",onClick:()=>{if(m&&x(!t),o){const r=new Set(s);t?r.delete(a.id):r.add(a.id),o(r)}else x(!t)},children:[m?t?e.jsx(S,{className:"w-5 h-5 mr-2"}):e.jsx(T,{className:"w-5 h-5 mr-2"}):e.jsx(A,{className:"w-5 h-5 mr-2"}),e.jsx("span",{className:"font-mono text-sm text-gray-500 mr-2",children:a.code}),e.jsx("span",{className:"font-medium",children:a.name})]}),e.jsxs("div",{className:"flex space-x-1",children:[a.deleted_at&&l("force-delete-chart-of-account")?e.jsx(c,{variant:"destructive",onClick:()=>{confirm("Hapus kode perkiraan ini beserta sub-akunnya?")&&n(a.id,!0)},children:"Force Delete"}):null,!a.deleted_at&&l("create-chart-of-account")?e.jsx(e.Fragment,{children:e.jsxs(j,{open:C,onOpenChange:f,children:[e.jsx(g,{asChild:!0,children:e.jsx(c,{variant:"ghost",size:"icon",children:e.jsx(D,{className:"w-4 h-4"})})}),e.jsxs(b,{className:"max-h-[80vh] overflow-y-auto",children:[e.jsx(v,{children:e.jsx(k,{children:"Tambah Akun"})}),e.jsx(N,{node:{id:"",code:"",name:"",type:a.type,sub_type:a.sub_type,dr_cr:a.dr_cr,parent_id:a.id},onSaved:w,onCancel:()=>f(!1)})]})]})}):null,!a.deleted_at&&l("update-chart-of-account")?e.jsxs(j,{open:y,onOpenChange:u,children:[e.jsx(g,{asChild:!0,children:e.jsx(c,{variant:"ghost",size:"icon",children:e.jsx(O,{className:"w-4 h-4"})})}),e.jsxs(b,{className:"max-h-[80vh] overflow-y-auto",children:[e.jsx(v,{children:e.jsx(k,{children:"Edit Akun"})}),e.jsx(N,{node:a,onSaved:_,onCancel:()=>u(!1)})]})]}):null,!a.deleted_at&&l("delete-chart-of-account")?e.jsx(c,{variant:"ghost",size:"icon",onClick:()=>{confirm("Hapus kode perkiraan ini beserta sub-akunnya?")&&n(a.id)},children:e.jsx(F,{className:"w-4 h-4"})}):null]})]}),t&&m&&e.jsx("div",{children:a.children.map(r=>e.jsx(z,{node:r,level:i+1,onAdd:h,onEdit:p,onDelete:n,openIds:s,setOpenIds:o},r.id))})]})})}export{z as default};
