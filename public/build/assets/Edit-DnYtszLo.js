import{W as E,r as b,j as e,a as _,y as k}from"./app-CQ-G37p-.js";import{S as w,a as B,b as D}from"./SearchUnitReport-BSGRusST.js";import{S as I}from"./SearchVendor-DVTa9TJs.js";import{B as U}from"./button-ymMXdPy5.js";import{F as s}from"./form-group-CHZXn8bM.js";import{I as c}from"./input-BXXA-PDa.js";import{M as f}from"./money-input-Bb590VQ4.js";import{T as V,a as A,b as v,c as o,d as H,e as l}from"./table-BSdxGOLt.js";import{T as K}from"./textarea-BvykTLwI.js";import{t as y}from"./use-toast-XJEkqv7A.js";import{A as M}from"./AuthenticatedLayout-X6euxa7E.js";import"./select-BSIJzAmS.js";import"./index-B9C1SM0Q.js";import"./index-DqZ46QiR.js";import"./index-D0iIn24t.js";import"./tslib.es6-eMSY344_.js";import"./index-C7S3ohsj.js";import"./index-B9VoEdXn.js";import"./createLucideIcon-iWXofaGH.js";import"./index-CZ_DqijM.js";import"./chevron-down-BOk5s691.js";import"./card-Bq41eL_q.js";import"./loader-circle-i2ANfqrZ.js";import"./search-B9EA-nRY.js";import"./x-D2Pel9EU.js";import"./label-Blk7FhF1.js";import"./index-BHS3gC_j.js";import"./index-uJ2KZHf0.js";import"./can-DARgw7Bo.js";import"./chevron-right-DWL5tPD-.js";import"./badge-CsIJHFj0.js";import"./currency-formatter-D5vTOkIG.js";import"./moment-C5S46NFB.js";import"./triangle-alert-byTh5Szo.js";import"./calendar-BV_-Gsoc.js";function R({item:d}){var p,h,x;const{data:a,setData:t,errors:i,setError:C,reset:F,clearErrors:S}=E(d),[m,u]=b.useState(!1);async function N(){S(),u(!0);try{const r=await _.put(`/admin/item-non-stock/${a.id}`,a);y({title:"Sukses",description:"Data item non stok berhasil diubah"}),k.visit("/admin/item-non-stock")}catch(r){if(r.response.status===422){const n=r.response.data.errors;C(n)}else y({variant:"destructive",title:"Gagal",description:r.response.data.message})}finally{u(!1)}}return b.useEffect(()=>{async function r(){const n=await _(`/admin/unit/${a.unit}/by-unit`);t("units",n.data.data.sub_units)}r()},[a.unit]),e.jsxs("div",{className:"p-5 mb-96",children:[e.jsx(s,{label:"Kode",name:"code",error:i.code,required:!0,children:e.jsx(c,{value:a.code,onChange:r=>{t({...a,code:r.target.value})}})}),e.jsx(s,{label:"Nama",name:"name",error:i.name,required:!0,children:e.jsx(c,{value:a.name,onChange:r=>{t({...a,name:r.target.value})}})}),e.jsx(s,{label:"Kategori",name:"item_category_id",error:i.item_category_id,required:!0,children:e.jsx(w,{value:a.item_category_id,onChange:r=>{t({...a,item_category_id:r})}})}),e.jsxs("div",{className:"flex gap-x-3",children:[e.jsxs("div",{className:"w-2/3",children:[e.jsx(s,{label:"Satuan",name:"unit",error:i.unit,required:!0,children:e.jsx(B,{value:a.unit,onChange:r=>{t("unit",r)}})}),e.jsx(s,{label:"Laporan",name:"unit",error:i.unit_report_1||i.unit_report_2,required:!0,children:e.jsx(D,{value1:a.unit_report_1,value2:a.unit_report_2,unit:a.unit,onChange1:r=>{t("unit_report_1",r)},onChange2:r=>{t("unit_report_2",r)}})})]}),e.jsx("div",{className:"w-1/3",children:e.jsxs(V,{children:[e.jsx(A,{children:e.jsxs(v,{children:[e.jsx(o,{children:"NO"}),e.jsx(o,{children:"SATUAN"}),e.jsx(o,{className:"w-[100px]",children:"KONVERSI"}),e.jsx(o,{})]})}),e.jsx(H,{children:(p=a.units)==null?void 0:p.map((r,n)=>e.jsxs(v,{children:[e.jsx(l,{children:n+1}),e.jsx(l,{children:r.name}),e.jsx(l,{children:e.jsx(c,{type:"number",className:"text-end",value:r.conversion,onChange:T=>{var j;t("units",(j=a.units)==null?void 0:j.map((g,q)=>q==n?{...g,conversion:T.target.value}:g))}})}),e.jsx(l,{children:a.units[0].name})]}))})]})})]}),e.jsx(s,{label:"Harga Beli",error:i.purchase_price,required:!0,children:e.jsx(f,{value:a.purchase_price,onValueChange:r=>{t("purchase_price",r)}})}),e.jsx(s,{label:"Harga Jual",error:i.selling_price,required:!0,children:e.jsx(f,{value:a.selling_price,onValueChange:r=>{t("selling_price",r)}})}),e.jsx(s,{label:"Keterangan",required:!0,error:i.description,children:e.jsx(K,{value:a.description,onChange:r=>{t("description",r.target.value)}})}),e.jsx(s,{label:"Vendor",required:!0,error:i.vendor_id,children:e.jsx(I,{value:{id:a.vendor_id??"",name:((h=a.vendor)==null?void 0:h.name)??"",code:((x=a.vendor)==null?void 0:x.code)??""},onChange:r=>{var n;console.log(r),t({...a,vendor:r,vendor_id:(n=r.id)==null?void 0:n.toString()})}})}),e.jsx(U,{disabled:m,onClick:N,children:m?"Mengubah...":"Ubah"})]})}R.layout=d=>e.jsx(M,{breadcrumbs:[{label:"Dashboard",href:"/admin/"},{label:"Master File",href:"#"},{label:"Barang Non Stok",href:"/admin/item-non-stock"},{label:"Edit",href:"#"}],children:d});export{R as default};
