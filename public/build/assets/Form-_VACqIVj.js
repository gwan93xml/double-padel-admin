import{W as N,r as E,j as r,y as F}from"./app-xdIDsNuc.js";import{B as q}from"./index-D9fYs-5N.js";import{C as S}from"./checkbox-C3fx99cs.js";import{F as d}from"./form-group-DJppTG6k.js";import{I as m}from"./input-Pb5O0huv.js";import{t as j}from"./use-toast-BOfnQU58.js";import{C as U,a as G,b as I,c as P,d as R}from"./card-DPe-xeUS.js";import"./utils-jM7Hu9J5.js";import"./index-CltWYr8P.js";import"./index-DY1xKekZ.js";import"./index-CCSo0cdO.js";import"./index-CZTB0vk4.js";import"./check-B2a_CU3u.js";import"./createLucideIcon-D9qBrcbq.js";import"./label-DxiqzSVl.js";function X({initialData:c={email:"",name:"",password:"",roles:[]},roles:f,onSubmit:g,submitButtonText:p,successMessage:C,redirectTo:v,passwordPlaceholder:b}){var h;const{data:s,setData:t,clearErrors:y,errors:o,setError:k}=N({...c,roles:((h=c.roles)==null?void 0:h.map(e=>typeof e=="object"?e.id:e))||[]}),[u,x]=E.useState(!1);async function w(){var e,i,l;y(),x(!0);try{await g(s),j({title:"Sukses",description:C}),F.visit(v)}catch(a){if(((e=a.response)==null?void 0:e.status)===422){const n=a.response.data.errors;k(n)}else j({variant:"destructive",title:"Gagal",description:((l=(i=a.response)==null?void 0:i.data)==null?void 0:l.message)||"Terjadi kesalahan"})}finally{x(!1)}}return r.jsx("div",{className:"p-5",children:r.jsxs(U,{children:[r.jsxs(G,{children:[r.jsx(I,{children:"Form User"}),r.jsx(P,{children:"Kelola data user aplikasi"})]}),r.jsxs(R,{children:[r.jsxs("div",{className:"mb-4",children:[r.jsx(d,{label:"Username/Email",error:o.email,required:!0,children:r.jsx(m,{type:"text",value:s.email,onChange:e=>{t("email",e.target.value)}})}),r.jsx(d,{label:"Nama",error:o.name,required:!0,children:r.jsx(m,{type:"text",value:s.name,onChange:e=>{t("name",e.target.value)}})}),r.jsx(d,{label:"Password",error:o.password,required:!0,children:r.jsx(m,{type:"text",value:s.password,placeholder:b,onChange:e=>{t("password",e.target.value)}})}),r.jsx(d,{label:"Roles",error:o.roles,required:!0,children:r.jsx("div",{className:"grid grid-cols-1 gap-x-4 gap-y-4",children:f.map(e=>{var i;return r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(S,{id:e.name,checked:(i=s.roles)==null?void 0:i.includes(e.id),onCheckedChange:l=>{var a;l?t("roles",[...s.roles||[],e.id]):t("roles",(a=s.roles)==null?void 0:a.filter(n=>n!==e.id))}}),r.jsx("label",{htmlFor:e.name,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:e.name})]},e.id)})})})]}),r.jsx(q,{disabled:u,onClick:w,children:u?`${p}...`:p})]})]})})}export{X as default};
