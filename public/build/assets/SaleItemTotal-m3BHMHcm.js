import{r as f,j as s}from"./app-CQ-G37p-.js";import{A as p}from"./auto-manual-toggle-Drq7Gsew.js";import{I as N}from"./input-BXXA-PDa.js";import{M as r}from"./money-input-Bb590VQ4.js";import{l as i}from"./lodash-Caeo88pO.js";import"./createLucideIcon-iWXofaGH.js";import"./settings-BIxmfjj-.js";function E({data:t,type_ofTax:c,setData:l}){var d,h;f.useEffect(()=>{var e,o;if(t.tax_is_auto)if(c){const u=i.sum(((e=t.items)==null?void 0:e.map(m=>parseFloat(m.subtotal??"0")))??[]),n=i.sum(((o=t.items)==null?void 0:o.map(m=>parseFloat(m.discount??"0")))??[]),a=Math.round((u-n-(t.sales_discount??0))*parseFloat((c==null?void 0:c.rate)||"0")/100);l({...t,tax:a})}else l({...t,tax:0})},[c,JSON.stringify(t.items),t.tax_is_auto,t.sales_discount,t.type_of_tax_id]);function x(){var u,n;const e=i.sum(((u=t.items)==null?void 0:u.map(a=>parseFloat(a.subtotal??"0")))??[]),o=i.sum(((n=t.items)==null?void 0:n.map(a=>parseFloat(a.discount??"0")))??[]);return e-o}function j(){return x()-Number(t.sales_discount??"0")+Number(t.tax??0)-(t.total_retur??0)}return s.jsx("table",{className:"w-full",children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("td",{className:"text-right font-semibold font-mono",children:"SUBTOTAL"}),s.jsx("td",{className:"text-right w-4/5 md:w-3/12 font-bold pl-8",children:s.jsx(r,{readOnly:!0,value:i.sum(((d=t.items)==null?void 0:d.map(e=>parseFloat(e.subtotal??"0")))??[]).toFixed(2)})})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"text-right font-semibold font-mono ",children:"DISKON ITEM"}),s.jsx("td",{className:"text-right font-bold pl-8",children:s.jsx(r,{readOnly:!0,value:i.sum(((h=t.items)==null?void 0:h.map(e=>parseFloat(e.discount??"0")))??[]).toFixed(2)})})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"text-right font-mono font-semibold",children:"DISKON PENJUALAN"}),s.jsx("td",{className:"text-right font-bold pl-8",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-3/5",children:s.jsx(r,{value:t.sales_discount,onValueChange:e=>{l({...t,sales_discount:e,sales_discount_percent:0})}})}),s.jsx("div",{children:s.jsx("span",{className:"mx-2",children:"%"})}),s.jsx("div",{className:"w-2/5",children:s.jsx(N,{type:"number",className:"text-end",value:t.sales_discount_percent,onChange:e=>{const o=parseFloat(e.target.value)||0,n=x()*o/100;l({...t,sales_discount:n.toFixed(2),sales_discount_percent:o})}})})]})})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"text-right font-semibold font-mono",children:"PAJAK"}),s.jsx("td",{className:"text-right font-bold pl-8",children:s.jsxs("div",{className:"flex",children:[s.jsx(p,{isAuto:t.tax_is_auto??!0,onToggle:e=>l("tax_is_auto",e)}),s.jsx(r,{readOnly:t.tax_is_auto,value:t.tax,onValueChange:e=>{l({...t,tax:e})}})]})})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"text-right font-bold font-mono",children:"TOTAL RETUR"}),s.jsx("td",{className:"text-right font-bold pl-8",children:s.jsx(r,{readOnly:!0,value:t.total_retur})})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"text-right font-bold font-mono",children:"TOTAL"}),s.jsx("td",{className:"text-right font-bold pl-8",children:s.jsx(r,{readOnly:!0,value:j().toFixed(2)})})]})]})})}export{E as default};
