import{j as o}from"./app-CQ-G37p-.js";import{A as v}from"./AuthenticatedLayout-X6euxa7E.js";import{R as j}from"./report-list-CoUR2Q-E.js";import{C as n}from"./currency-formatter-D5vTOkIG.js";import{F as m}from"./form-group-CHZXn8bM.js";import{B as b}from"./button-ymMXdPy5.js";import{h as i}from"./moment-C5S46NFB.js";import{D as f}from"./date-filter-BrNgVtk9.js";import{S as y}from"./SearchCustomer-BbTZ5_2l.js";import{D}from"./DivisionList-Dge3XhOp.js";import{S as C,a as M,b as T,c as _,d}from"./select-BSIJzAmS.js";import{S as k}from"./search-B9EA-nRY.js";import"./index-D0iIn24t.js";import"./createLucideIcon-iWXofaGH.js";import"./input-BXXA-PDa.js";import"./index-DqZ46QiR.js";import"./index-BHS3gC_j.js";import"./index-B9C1SM0Q.js";import"./tslib.es6-eMSY344_.js";import"./index-uJ2KZHf0.js";import"./x-D2Pel9EU.js";import"./index-C7S3ohsj.js";import"./index-B9VoEdXn.js";import"./can-DARgw7Bo.js";import"./chevron-right-DWL5tPD-.js";import"./use-toast-XJEkqv7A.js";import"./badge-CsIJHFj0.js";import"./triangle-alert-byTh5Szo.js";import"./calendar-BV_-Gsoc.js";import"./table-BSdxGOLt.js";import"./card-Bq41eL_q.js";import"./list-DIayZXqH.js";import"./filter-BZN7rDIQ.js";import"./file-text-vhY6aTSF.js";import"./file-spreadsheet-Dv5Qp-1R.js";import"./label-Blk7FhF1.js";import"./index-Cu_r977E.js";import"./index-D-8iXXsP.js";import"./calendar-days-CaBtbxTM.js";import"./loader-circle-i2ANfqrZ.js";import"./checkbox-DaA1krf_.js";import"./index-CZ_DqijM.js";import"./command-BCd-qebN.js";import"./dialog-CBBIkam9.js";import"./popover-BMGWAYFn.js";import"./chevron-down-BOk5s691.js";function F({accountReceivables:l,month_query:c,cashInDetails:$}){const p={monthFrom:i().format("YYYY-MM"),monthTo:i().format("YYYY-MM"),year:i().format("YYYY"),customer_id:void 0,customer:void 0,divisions:[],dateType:"year",date:i().format("YYYY-MM-DD"),dateFrom:i().startOf("month").format("YYYY-MM-DD"),dateTo:i().endOf("month").format("YYYY-MM-DD"),month:c??i().format("YYYY-MM"),untilDate:i().format("YYYY")},u=[{header:"NO",key:"no",renderCell:(r,e)=>e+1},{header:"NO. PO",key:"po",renderCell:r=>{var e,a;return((a=(e=r.receivable)==null?void 0:e.sale)==null?void 0:a.purchase_order_number)??"-"}},{header:"Tanggal",key:"date",renderCell:r=>{var e;return i((e=r.account_receivable_header)==null?void 0:e.date).format("DD/MM/YYYY")}},{header:"Pelanggan",key:"customer",renderCell:r=>{var e,a;return((a=(e=r.receivable)==null?void 0:e.customer)==null?void 0:a.name)??"-"},isMerged:!0,mergeKey:"receivable.customer.name"},{header:"Nota",key:"nota",renderCell:r=>{var e;return((e=r.account_receivable_header)==null?void 0:e.number)??"-"}},{header:"No. Invoice",key:"invoice",renderCell:r=>{var e,a;return((a=(e=r.receivable)==null?void 0:e.sale)==null?void 0:a.no)??"-"}},{header:"Bayar",key:"paid_amount",renderCell:r=>o.jsx(n,{amount:r.paid_amount}),renderFooter:r=>o.jsx(n,{amount:r.reduce((e,a)=>e+a.paid_amount,0)}),align:"right"},{header:"Discount",key:"discount",renderCell:r=>o.jsx(n,{amount:r.discount}),renderFooter:()=>o.jsx(n,{amount:0}),align:"right"},{header:"Total",key:"total",renderCell:r=>o.jsx(n,{amount:r.paid_amount+r.discount}),renderFooter:r=>o.jsx(n,{amount:r.reduce((e,a)=>e+a.paid_amount+a.discount,0)}),align:"right"}],h=(r,e,a)=>o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-4 items-end",children:[o.jsx("div",{className:"lg:col-span-3",children:o.jsx(m,{label:"Pelanggan",children:o.jsx(y,{value:r.customer,onChange:t=>e({...r,customer:t,customer_id:t.id}),clearable:!0})})}),o.jsx("div",{className:"lg:col-span-3",children:o.jsx(m,{label:"Divisi",children:o.jsx(D,{selectedDivisions:r.divisions,onSelectionChange:t=>{e({...r,divisions:t})}})})}),o.jsx("div",{className:"lg:col-span-6",children:o.jsx(f,{f:r,setF:e})}),o.jsx("div",{className:"lg:col-span-6",children:o.jsx(m,{label:"Urutan",children:o.jsxs(C,{value:r.sort||void 0,onValueChange:t=>{t&&e({...r,sort:t})},children:[o.jsx(M,{children:o.jsx(T,{placeholder:"Pilih opsi..."})}),o.jsxs(_,{children:[o.jsx(d,{value:"CUSTOMER NAME",children:"Nama Pelanggan"}),o.jsx(d,{value:"DATE",children:"Tanggal"})]})]})})}),o.jsx("div",{className:"lg:col-span-12 ",children:o.jsxs(b,{onClick:a,children:[o.jsx(k,{}),"Tampilkan"]})})]});function s(r,e){let a=`${r}?monthFrom=${e.monthFrom}&monthTo=${e.monthTo}&customer_id=${e.customer_id||""}&dateType=${e.dateType||"year"}&year=${e.year||""}&date=${e.date||""}&dateFrom=${e.dateFrom||""}&dateTo=${e.dateTo||""}&untilDate=${e.untilDate||""}`;return e.sort&&(a+=`&sort=${e.sort}`),e.divisions&&e.divisions.length>0&&e.divisions.forEach((t,Y)=>{a+=`&divisions[${Y}][id]=${t.id}`}),a}function g(r){return s("/admin/account-receivable-report/export/pdf",r)}function x(r){return s("/admin/account-receivable-report/export/excel",r)}return o.jsx(j,{title:"Laporan Penerimaan Piutang",description:"Daftar penerimaan piutang berdasarkan filter",fetchUrl:"/admin/account-receivable-report/list",exportPdfUrl:g,exportExcelUrl:x,initialFilters:p,renderFilter:h,columns:u,isMerged:!0})}F.layout=l=>o.jsx(v,{breadcrumbs:[{label:"Dashboard",href:"/admin"},{label:"Laporan",href:"#"},{label:"Laporan Penerimaan Piutang",href:"/admin/account-receivable-report"}],children:l});export{F as default};
