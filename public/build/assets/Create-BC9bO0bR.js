import{W as _,r as S,j as e,a as N,y as T}from"./app-CQ-G37p-.js";import{B as u}from"./button-ymMXdPy5.js";import{F as b}from"./form-group-CHZXn8bM.js";import{I as m}from"./input-BXXA-PDa.js";import{T as C,a as A,b as x,c,d as E,e as o}from"./table-BSdxGOLt.js";import{A as k}from"./AuthenticatedLayout-X6euxa7E.js";import{t as j}from"./use-toast-XJEkqv7A.js";import{P as w}from"./plus-gEoqNGty.js";import"./index-D0iIn24t.js";import"./createLucideIcon-iWXofaGH.js";import"./label-Blk7FhF1.js";import"./index-DqZ46QiR.js";import"./index-BHS3gC_j.js";import"./index-B9C1SM0Q.js";import"./tslib.es6-eMSY344_.js";import"./index-uJ2KZHf0.js";import"./x-D2Pel9EU.js";import"./index-C7S3ohsj.js";import"./index-B9VoEdXn.js";import"./can-DARgw7Bo.js";import"./chevron-right-DWL5tPD-.js";import"./badge-CsIJHFj0.js";import"./currency-formatter-D5vTOkIG.js";import"./moment-C5S46NFB.js";import"./triangle-alert-byTh5Szo.js";import"./calendar-BV_-Gsoc.js";function D(){const{data:r,setData:i,clearErrors:f,reset:B,errors:d,setError:v}=_({name:"",sub_units:[]}),[p,h]=S.useState(!1);async function g(){f(),h(!0);try{const s=await N.post("/admin/unit",r);j({title:"Sukses",description:"Data satuan berhasil ditambah"}),T.visit("/admin/unit/create")}catch(s){if(s.response.status===422){const t=s.response.data.errors;v(t)}else j({variant:"destructive",title:"Gagal",description:s.response.data.message})}finally{h(!1)}}function y(){i({...r,sub_units:[...r.sub_units,{name:"",conversion:"1"}]})}return e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"grid grid-cols-1 gap-x-4  gap-y-4",children:[e.jsx(b,{label:"Nama",error:d.name,required:!0,children:e.jsx(m,{type:"text",value:r.name,onChange:s=>{i("name",s.target.value)}})}),e.jsx(b,{required:!0,error:d.sub_units,label:"Sub Satuan",children:e.jsxs(C,{children:[e.jsx(A,{children:e.jsxs(x,{children:[e.jsx(c,{className:"w-[10px]",children:"NO"}),e.jsx(c,{className:"w-[60%]",children:"SATUAN"}),e.jsx(c,{children:"KONVERSI"})]})}),e.jsx(E,{children:r.sub_units.map((s,t)=>e.jsxs(x,{children:[e.jsx(o,{children:t+1}),e.jsx(o,{children:e.jsx(m,{type:"text",value:s.name,onChange:n=>{i("sub_units",r.sub_units.map((a,l)=>l===t?{...a,name:n.target.value}:a))}})}),e.jsx(o,{children:e.jsx(m,{type:"number",className:"text-end",value:s.conversion,onChange:n=>{i("sub_units",r.sub_units.map((a,l)=>l===t?{...a,conversion:n.target.value}:a))}})}),e.jsx(o,{children:e.jsx(u,{variant:"destructive",onClick:()=>{i("sub_units",r.sub_units.filter((n,a)=>a!==t))},children:"Hapus"})})]}))})]})}),e.jsx(u,{onClick:y,children:e.jsx(w,{})}),e.jsx("div",{children:e.jsx(u,{disabled:p,onClick:g,children:p?"Menyimpan...":"Simpan"})})]})})}D.layout=r=>e.jsx(k,{breadcrumbs:[{label:"Dashboard",href:"/admin"},{label:"Master File",href:"#"},{label:"Satuan",href:"/admin/unit"},{label:"Tambah",href:"#"}],children:r});export{D as default};
