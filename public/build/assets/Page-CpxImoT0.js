import{r as h,j as e,a as E}from"./app-CQ-G37p-.js";import{A as H}from"./AuthenticatedLayout-X6euxa7E.js";import{T as K,a as O,b as j,c as n,d as R,e as r}from"./table-BSdxGOLt.js";import{C as g,a as z,b as Q,c as U,d as f}from"./card-Bq41eL_q.js";import{h as x}from"./moment-C5S46NFB.js";import{C as p}from"./currency-formatter-D5vTOkIG.js";import{B as b}from"./button-ymMXdPy5.js";import{I as F}from"./input-BXXA-PDa.js";import{B as o}from"./badge-CsIJHFj0.js";import{F as S}from"./form-group-CHZXn8bM.js";import{B as Y}from"./book-open-C3EiSG93.js";import{F as G}from"./filter-BZN7rDIQ.js";import{S as q}from"./search-B9EA-nRY.js";import{F as J}from"./file-text-vhY6aTSF.js";import{F as V}from"./file-spreadsheet-Dv5Qp-1R.js";import{C as W}from"./calendar-BV_-Gsoc.js";import{T as X,a as Z}from"./trending-up-BOlMp1Uy.js";import"./index-D0iIn24t.js";import"./createLucideIcon-iWXofaGH.js";import"./index-DqZ46QiR.js";import"./index-BHS3gC_j.js";import"./index-B9C1SM0Q.js";import"./tslib.es6-eMSY344_.js";import"./index-uJ2KZHf0.js";import"./x-D2Pel9EU.js";import"./index-C7S3ohsj.js";import"./index-B9VoEdXn.js";import"./can-DARgw7Bo.js";import"./chevron-right-DWL5tPD-.js";import"./use-toast-XJEkqv7A.js";import"./triangle-alert-byTh5Szo.js";import"./label-Blk7FhF1.js";function ee({}){const[t,N]=h.useState({account:{id:"",name:"",code:""},dateFrom:x().format("YYYY-MM-DD"),dateTo:x().add("1","month").format("YYYY-MM-DD")}),[ae,B]=h.useState(0),[c,L]=h.useState([]),[m,y]=h.useState(!1);async function I(){y(!0);try{const a=await E.get("/admin/ledger-report/list",{params:{date_from:t.dateFrom,date_to:t.dateTo}});L(a.data.data),B(a.data.data.start_balance)}catch(a){console.error("Error fetching ledger data:",a)}finally{y(!1)}}const M=a=>a.transaction_type==="Purchase"?`/admin/purchase/${a.transaction_id}/edit`:a.transaction_type==="Sale"?`/admin/sale/${a.transaction_id}/edit`:a.transaction_type==="CashIn"?`/admin/cash-in/${a.transaction_id}/edit`:a.transaction_type==="CashOut"?`/admin/cash-out/${a.transaction_id}/edit`:a.transaction_type==="CashTransfer"?`/admin/cash-transfer/${a.transaction_id}/edit`:a.transaction_type==="AssetDepreciation"?`/admin/asset-depreciation/${a.transaction_id}/edit`:a.transaction_type==="receivable"?`/admin/receivable/${a.transaction_id}/edit`:a.transaction_type==="debt"?`/admin/debt/${a.transaction_id}/edit`:`/admin/journal/${a.id}/edit`,P=a=>{var s,i,l,d,_,v,w,T,k,C,$,D;if(a.journal.transaction_type==="Purchase")return`${((i=(s=a.journal)==null?void 0:s.purchase)==null?void 0:i.note)??""}`;if(a.journal.transaction_type==="Sale")return`${((d=(l=a.journal)==null?void 0:l.sale)==null?void 0:d.note)??""}`;if(a.journal.transaction_type==="CashIn"){const u=((_=a.journal.cash_in)==null?void 0:_.received_from)??"";return`${((w=(v=a.journal)==null?void 0:v.cash_in)==null?void 0:w.description)??""} | Diterima Dari ${u}`}else if(a.journal.transaction_type==="CashOut"){const u=((T=a.journal.cash_out)==null?void 0:T.paid_to)??"";return`${((C=(k=a.journal)==null?void 0:k.cash_out)==null?void 0:C.description)??""} | Dibayar Kepada ${u}`}else if(a.journal.transaction_type==="CashTransfer")return`${((D=($=a.journal)==null?void 0:$.cash_transfer)==null?void 0:D.note)??""}`;return a.journal.notes||"-"},A=a=>{var s,i,l,d;return a.journal.transaction_type==="Purchase"||a.journal.transaction_type==="Purchase_Inventory"?`|  ${((i=(s=a.journal.purchase)==null?void 0:s.vendor)==null?void 0:i.name)??""}`:a.journal.transaction_type==="Sale"||a.journal.transaction_type==="Sale_Inventory"?`|  ${((d=(l=a.journal.sale)==null?void 0:l.customer)==null?void 0:d.name)??""}`:""};return e.jsxs("div",{className:"p-4 md:p-6  min-h-screen",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 rounded-lg",children:e.jsx(Y,{className:"h-6 w-6 "})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold ",children:"Buku Besar"}),e.jsx("p",{className:"text-gray-600",children:"Laporan detail transaksi dengan saldo berjalan"})]})]})}),e.jsxs(g,{className:"mb-6",children:[e.jsxs(z,{className:"bg-gradient-to-r  rounded-t-lg border-b",children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-5 w-5"}),"Filter Laporan"]}),e.jsx(U,{className:"",children:"Pilih akun dan periode untuk melihat buku besar"})]}),e.jsxs(f,{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-4 items-end",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(S,{label:"Dari Tanggal",children:e.jsx(F,{type:"date",value:t.dateFrom,onChange:a=>N({...t,dateFrom:a.target.value})})})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(S,{label:"Hingga Tanggal",children:e.jsx(F,{type:"date",value:t.dateTo,onChange:a=>N({...t,dateTo:a.target.value})})})}),e.jsx("div",{className:"lg:col-span-2 flex gap-1",children:e.jsxs(b,{onClick:I,disabled:m,className:"flex-1 bg-blue-600 hover:bg-blue-700 dark:text-white",children:[m?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):e.jsx(q,{className:"h-4 w-4 mr-2"}),m?"Loading...":"Tampilkan"]})})]}),c.length>0&&e.jsxs("div",{className:"flex justify-end gap-2 mt-4 pt-4 border-t",children:[e.jsx(b,{variant:"outline",size:"sm",asChild:!0,className:"bg-red-50 hover:bg-red-100 text-red-700 border-red-200 dark:hover:text-black",children:e.jsxs("a",{href:`/admin/ledger-report/export/pdf?date_from=${t.dateFrom}&date_to=${t.dateTo}`,target:"_blank",rel:"noreferrer",children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"Export PDF"]})}),e.jsx(b,{variant:"outline",size:"sm",asChild:!0,className:"bg-green-50 hover:bg-green-100 text-green-700 border-green-200 dark:hover:text-black",children:e.jsxs("a",{href:`/admin/ledger-report/export/excel?date_from=${t.dateFrom}&date_to=${t.dateTo}`,target:"_blank",rel:"noreferrer",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Export Excel"]})})]})]})]}),c.length>0&&e.jsx(g,{className:"shadow-lg ",children:e.jsx(f,{className:"p-0",children:c.map(a=>e.jsxs("div",{className:"overflow-x-auto my-2",children:[e.jsxs("div",{className:"p-2",children:[e.jsx("span",{className:"font-bold",children:"AKUN"})," : ",a.account.name]}),e.jsxs(K,{children:[e.jsx(O,{children:e.jsxs(j,{className:"",children:[e.jsx(n,{className:"w-16 font-semibold ",style:{width:"10px"},children:"No"}),e.jsx(n,{className:"font-semibold ",style:{width:"100px"},children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-4 w-4"}),"Tanggal"]})}),e.jsx(n,{className:"font-semibold ",style:{width:"200px"},children:"No. Transaksi"}),e.jsx(n,{className:"font-semibold ",style:{width:"200px"},children:"Divisi"}),e.jsx(n,{className:"font-semibold ",style:{width:"200px"},children:"Keterangan"}),e.jsx(n,{className:"font-semibold ",style:{width:"200px"},children:"Catatan"}),e.jsx(n,{className:"text-right font-semibold ",style:{width:"200px"},children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx(X,{className:"h-4 w-4 text-green-600"}),"Debet"]})}),e.jsx(n,{className:"text-right font-semibold ",style:{width:"200px"},children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx(Z,{className:"h-4 w-4 text-red-600"}),"Kredit"]})}),e.jsx(n,{className:"text-right font-semibold ",style:{width:"200px"},children:"Saldo"})]})}),e.jsx(R,{children:e.jsxs(j,{className:"",children:[e.jsx(r,{className:"font-medium",children:"1"}),e.jsx(r,{className:"font-medium",children:t.dateFrom?x(t.dateFrom).format("DD/MM/YYYY"):""}),e.jsx(r,{className:"font-medium",children:e.jsx(o,{variant:"outline",className:"",children:"Saldo Awal"})}),e.jsx(r,{className:"text-right",children:e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx(r,{className:"text-right",children:e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx(r,{className:"text-right",children:e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx(r,{className:"text-right",children:e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx(r,{className:"text-right",children:e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx(r,{className:"text-right font-bold",children:e.jsx(o,{variant:"outline",className:`${a.start_balance>0?"bg-green-50 text-green-700 border-green-200":a.start_balance<0?"bg-red-50 text-red-700 border-red-200":"bg-gray-50 text-gray-700 border-gray-200"}`,children:e.jsx(p,{amount:a.start_balance})})})]})}),a.ledgers.map((s,i)=>{var l;return e.jsxs(j,{className:"hover:bg-blue-50/30 transition-colors",children:[e.jsx(r,{className:"font-medium",children:i+2}),e.jsx(r,{className:"font-medium",children:x(s.journal.date).format("DD/MM/YYYY")}),e.jsx(r,{className:"font-medium",children:e.jsxs("a",{href:M(s.journal),className:"text-blue-600 hover:underline",target:"_blank",rel:"noopener noreferrer",children:[s.journal.notes," ",A(s)]})}),e.jsx(r,{className:"font-medium",children:((l=s.journal.division)==null?void 0:l.name)??"-"}),e.jsx(r,{className:"font-medium",children:P(s)}),e.jsx(r,{className:"font-medium",children:s.notes??""}),e.jsx(r,{className:"text-right",children:e.jsx(o,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:e.jsx(p,{amount:s.debit})})}),e.jsx(r,{className:"text-right",children:e.jsx(o,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200",children:e.jsx(p,{amount:s.credit})})}),e.jsx(r,{className:"text-right font-medium",children:e.jsx(o,{variant:"outline",className:`${s.balance>0?"bg-blue-50 text-blue-700 border-blue-200":s.balance<0?"bg-red-50 text-red-700 border-red-200":"bg-gray-50 text-gray-700 border-gray-200"}`,children:e.jsx(p,{amount:s.balance})})})]},s.code)})]})]}))})}),c.length===0&&!m&&e.jsx(g,{className:"text-center py-12",children:e.jsx(f,{children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(Y,{className:"h-8 w-8 text-gray-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Belum Ada Data"}),e.jsx("p",{className:"text-gray-500",children:'Pilih akun dan klik "Tampilkan" untuk melihat buku besar'})]})]})})})]})}ee.layout=t=>e.jsx(H,{breadcrumbs:[{label:"Dashboard",href:"/admin"},{label:"Laporan",href:"#"},{label:"Buku Besar",href:"#"}],children:t});export{ee as default};
